import{n as Ne,L as ve,e as y,s as G,b as A,l as F,d as _,c as V,m as C,p as _e,i as k,J as tt,a as ce,E as ut,o as z,a0 as $t,g as oe,F as Jt,x as ae,y as fe,A as mr,I as we,al as dr,q as _t,a5 as Ce,r as q,G as Fe,K as je,P as ot,B as gr,_ as mt}from"../chunks/scheduler.CGmLp2a4.js";import{S as Ye,i as Le,c as D,a as L,m as O,t as d,b as S,d as P,g as $,e as J,h as St,f as Ue}from"../chunks/index.0VfkS216.js";import{e as be,u as pr,o as wr}from"../chunks/each.af2GrV1H.js";import{P as br}from"../chunks/Pending_Animation.BCk8rEEV.js";import{d as kr}from"../chunks/stage.CgdBoOr3.js";import{s as pe}from"../chunks/dom.BLTHKhgi.js";import{g as rt}from"../chunks/clock.CLX1guZT.js";import{s as Sr,e as vt}from"../chunks/dom.C29wazc_.js";import{g as vr}from"../chunks/dimensions.PpBVpshh.js";import{P as De}from"../chunks/PortalPreview.C5wcwwNw.js";import{P as Qt,S as Et,b as Rt,a as Tt}from"../chunks/data.DaBRP2ae.js";import{P as Er,a as Rr,b as Tr,c as yr,d as Ar,e as Br,f as Hr,S as Zt,g as Ze,r as Mr,h as Cr,i as Dr,j as Or,k as ht,l as yt,m as Pr,n as Ir,o as Wr,p as Nr,q as Yr,s as Lr,t as Gr,u as Vr,v as Kr,w as zr,x as qr,y as Fr,z as jr}from"../chunks/data.F3epN_eb.js";import{F as Ur}from"../chunks/FreqSpeeds.B7GnCY9H.js";import{F as Xr}from"../chunks/FreqSpectacle.ESiOLKzO.js";import{g as $r}from"../chunks/settings.DMUTQVnp.js";import{W as Jr,S as Qr,D as Zr}from"../chunks/DomCanvasRenderer.H2UWDel5.js";import{b as xr}from"../chunks/pixi.BNw4JtJK.js";import{F as es}from"../chunks/FloatingIconButton.btoQFb2K.js";import{s as At}from"../chunks/index.DeK1U9ZM.js";import{P as xt}from"../chunks/Panel.sN8Va6Kq.js";import{A as ts}from"../chunks/AppControlsTable.uip0ZYzk.js";import{A as rs,s as Xe}from"../chunks/AppDialog.Dpfl69no.js";import{l as $e}from"../chunks/songs.BcB-hfLc.js";import{a as Je}from"../chunks/play_song.-YVw_H94.js";import{l as Me,s as he}from"../chunks/storage.BRfawDas.js";const xe=(i=0)=>new Promise(e=>setTimeout(e,i)),Qe=Object.freeze([]);function ss(i){let e,t;return e=new Ur({props:{elapsedTime:i[0].time/4,width:100,height:30,hzItems:[3],lowestHzItemCount:1}}),{c(){D(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,s){O(e,r,s),t=!0},p(r,[s]){const l={};s&1&&(l.elapsedTime=r[0].time/4),e.$set(l)},i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){P(e,r)}}}function is(i,e,t){let r;const s=rt();return ve(i,s,l=>t(0,r=l)),[r,s]}let ls=class extends Ye{constructor(e){super(),Le(this,e,is,ss,Ne,{})}};const ns={name:"secret2",slug:"secret2",showHomeButton:!0,Preview:ls};function os(i){let e,t;return e=new Xr({props:{elapsedTime:i[0].time/4,width:100,height:10,hzItems:[5],lowestHzItemCount:1}}),{c(){D(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,s){O(e,r,s),t=!0},p(r,[s]){const l={};s&1&&(l.elapsedTime=r[0].time/4),e.$set(l)},i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){P(e,r)}}}function as(i,e,t){let r;const s=rt();return ve(i,s,l=>t(0,r=l)),[r,s]}class fs extends Ye{constructor(e){super(),Le(this,e,as,os,Ne,{})}}const cs={name:"secret3",slug:"secret3",showHomeButton:!0,Preview:fs};function us(i){let e,t,r,s,l,n,o;return t=new Jr({props:{worldWidth:i[5],worldHeight:i[6],viewWidth:i[3],viewHeight:i[4],viewportWidth:i[1],viewportHeight:i[2],stage:i[0],pixi:i[12],domCanvasRenderer:i[10]}}),s=new Qr({props:{controller:i[7]}}),{c(){e=y("div"),D(t.$$.fragment),r=G(),D(s.$$.fragment),this.h()},l(a){e=A(a,"DIV",{class:!0});var f=F(e);L(t.$$.fragment,f),f.forEach(_),r=V(a),L(s.$$.fragment,a),this.h()},h(){C(e,"class","view svelte-1fxwwt5"),_e(e,"transform",i[9])},m(a,f){k(a,e,f),O(t,e,null),k(a,r,f),O(s,a,f),l=!0,n||(o=tt(window,"keydown",i[13]),n=!0)},p(a,f){const c={};f[0]&32&&(c.worldWidth=a[5]),f[0]&64&&(c.worldHeight=a[6]),f[0]&8&&(c.viewWidth=a[3]),f[0]&16&&(c.viewHeight=a[4]),f[0]&2&&(c.viewportWidth=a[1]),f[0]&4&&(c.viewportHeight=a[2]),f[0]&1&&(c.stage=a[0]),f[0]&1024&&(c.domCanvasRenderer=a[10]),t.$set(c),f[0]&512&&_e(e,"transform",a[9]);const p={};f[0]&128&&(p.controller=a[7]),s.$set(p)},i(a){l||(d(t.$$.fragment,a),d(s.$$.fragment,a),l=!0)},o(a){S(t.$$.fragment,a),S(s.$$.fragment,a),l=!1},d(a){a&&(_(e),_(r)),P(t),P(s,a),n=!1,o()}}}function hs(i,e,t){let r,s,l,n=ce,o=()=>(n(),n=ut(ue,b=>t(29,l=b)),ue),a;i.$$.on_destroy.push(()=>n());let{viewportWidth:f}=e,{viewportHeight:c}=e,{viewWidth:p}=e,{viewHeight:u}=e,{worldWidth:v}=e,{worldHeight:R}=e,{cameraUnlocked:w=!1}=e,{speed_booster_enabled:T=!1}=e,{strengthBoosterEnabled:E=!1}=e,{strengthBooster1Enabled:U=!1}=e,{strengthBooster2Enabled:B=!1}=e,{strengthBooster3Enabled:te=!1}=e,{starshipX:I=0}=e,{starshipY:H=0}=e,{starshipAngle:W=0}=e,{starshipShieldRadius:Y=0}=e,{finish:h}=e,{stage:g}=e,{enableDomCanvasRenderer:N=!1}=e;const re=rt();ve(i,re,b=>t(27,a=b));const M=xr();let X,ue,K,Ee=!1;const Re=()=>{!Ee&&g.finished&&(Ee=!0,h(l)),t(14,I=g.player.x),t(15,H=g.player.y),t(16,W=Ge(W,g.player.directionX,g.player.directionY)),t(17,Y=g.player.radius)},Ge=(b,x,se)=>!x&&!se?b:Ve(x,se),Ve=(b,x)=>Math.atan2(x,b),me=(b,x,se,ee)=>{if(b===se&&x===ee)return"";const ie=Math.min(b/se,x/ee);return`scale3d(${ie}, ${ie}, 1)`},Te=b=>{b.key==="q"&&!b.ctrlKey&&(pe(b),h(null))};return i.$$set=b=>{"viewportWidth"in b&&t(1,f=b.viewportWidth),"viewportHeight"in b&&t(2,c=b.viewportHeight),"viewWidth"in b&&t(3,p=b.viewWidth),"viewHeight"in b&&t(4,u=b.viewHeight),"worldWidth"in b&&t(5,v=b.worldWidth),"worldHeight"in b&&t(6,R=b.worldHeight),"cameraUnlocked"in b&&t(18,w=b.cameraUnlocked),"speed_booster_enabled"in b&&t(19,T=b.speed_booster_enabled),"strengthBoosterEnabled"in b&&t(20,E=b.strengthBoosterEnabled),"strengthBooster1Enabled"in b&&t(21,U=b.strengthBooster1Enabled),"strengthBooster2Enabled"in b&&t(22,B=b.strengthBooster2Enabled),"strengthBooster3Enabled"in b&&t(23,te=b.strengthBooster3Enabled),"starshipX"in b&&t(14,I=b.starshipX),"starshipY"in b&&t(15,H=b.starshipY),"starshipAngle"in b&&t(16,W=b.starshipAngle),"starshipShieldRadius"in b&&t(17,Y=b.starshipShieldRadius),"finish"in b&&t(24,h=b.finish),"stage"in b&&t(0,g=b.stage),"enableDomCanvasRenderer"in b&&t(25,N=b.enableDomCanvasRenderer)},i.$$.update=()=>{i.$$.dirty[0]&33554432&&t(10,r=N?new Zr:null),i.$$.dirty[0]&524288&&t(0,g.player.speed=T?Er:Rr,g),i.$$.dirty[0]&15728640&&t(0,g.player.strength=(E?Tr:yr)+(U?Ar:0)+(B?Br:0)+(te?Hr:0),g),i.$$.dirty[0]&262144&&t(0,g.freezeCamera=!w,g),i.$$.dirty[0]&1&&t(26,{camera:X,scores:ue,controller:K}=g,X,o(t(8,ue)),(t(7,K),t(0,g),t(1,f),t(2,c),t(3,p),t(4,u),t(5,v),t(6,R),t(19,T),t(20,E),t(21,U),t(22,B),t(23,te),t(18,w))),i.$$.dirty[0]&134217728&&Re(),i.$$.dirty[0]&67420160&&w&&X.setPosition(I,H),i.$$.dirty[0]&130&&K&&t(7,K.viewportWidth=f,K),i.$$.dirty[0]&132&&K&&t(7,K.viewportHeight=c,K),i.$$.dirty[0]&136&&K&&t(7,K.viewWidth=p,K),i.$$.dirty[0]&144&&K&&t(7,K.viewHeight=u,K),i.$$.dirty[0]&160&&K&&t(7,K.worldWidth=v,K),i.$$.dirty[0]&192&&K&&t(7,K.worldHeight=R,K),i.$$.dirty[0]&120&&t(9,s=me(p,u,v,R))},[g,f,c,p,u,v,R,K,ue,s,r,re,M,Te,I,H,W,Y,w,T,E,U,B,te,h,N,X,a]}class _s extends Ye{constructor(e){super(),Le(this,e,hs,us,Ne,{viewportWidth:1,viewportHeight:2,viewWidth:3,viewHeight:4,worldWidth:5,worldHeight:6,cameraUnlocked:18,speed_booster_enabled:19,strengthBoosterEnabled:20,strengthBooster1Enabled:21,strengthBooster2Enabled:22,strengthBooster3Enabled:23,starshipX:14,starshipY:15,starshipAngle:16,starshipShieldRadius:17,finish:24,stage:0,enableDomCanvasRenderer:25},null,[-1,-1])}}function ms(i){let e;return{c(){e=ae("play")},l(t){e=fe(t,"play")},m(t,r){k(t,e,r)},d(t){t&&_(e)}}}function ds(i){let e;return{c(){e=ae("exit")},l(t){e=fe(t,"exit")},m(t,r){k(t,e,r)},d(t){t&&_(e)}}}function gs(i){let e,t,r,s="<code>[Space]</code>";function l(a,f){return a[2]?ds:ms}let n=l(i),o=n(i);return{c(){e=y("div"),o.c(),t=G(),r=y("small"),r.innerHTML=s,this.h()},l(a){e=A(a,"DIV",{class:!0});var f=F(e);o.l(f),f.forEach(_),t=V(a),r=A(a,"SMALL",{class:!0,"data-svelte-h":!0}),oe(r)!=="svelte-125shhp"&&(r.innerHTML=s),this.h()},h(){C(e,"class","button-text svelte-1uhbdjt"),C(r,"class","svelte-1uhbdjt")},m(a,f){k(a,e,f),o.m(e,null),k(a,t,f),k(a,r,f)},p(a,f){n!==(n=l(a))&&(o.d(1),o=n(a),o&&(o.c(),o.m(e,null)))},d(a){a&&(_(e),_(t),_(r)),o.d()}}}function Bt(i){let e,t;return e=new De({props:{on_click:i[8],$$slots:{default:[ps]},$$scope:{ctx:i}}}),{c(){D(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,s){O(e,r,s),t=!0},p(r,s){const l={};s&10&&(l.on_click=r[8]),s&512&&(l.$$scope={dirty:s,ctx:r}),e.$set(l)},i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){P(e,r)}}}function ps(i){let e,t="↻",r,s,l="restart",n,o,a="<code>[r]</code>";return{c(){e=y("div"),e.textContent=t,r=G(),s=y("div"),s.textContent=l,n=G(),o=y("small"),o.innerHTML=a,this.h()},l(f){e=A(f,"DIV",{style:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1h8n14r"&&(e.textContent=t),r=V(f),s=A(f,"DIV",{class:!0,"data-svelte-h":!0}),oe(s)!=="svelte-27v868"&&(s.textContent=l),n=V(f),o=A(f,"SMALL",{class:!0,"data-svelte-h":!0}),oe(o)!=="svelte-12c5dmt"&&(o.innerHTML=a),this.h()},h(){_e(e,"font-size","84px"),C(s,"class","button-text svelte-1uhbdjt"),C(o,"class","svelte-1uhbdjt")},m(f,c){k(f,e,c),k(f,r,c),k(f,s,c),k(f,n,c),k(f,o,c)},p:ce,d(f){f&&(_(e),_(r),_(s),_(n),_(o))}}}function ws(i){let e,t,r,s;t=new Qt({props:{on_click:i[7],starshipMode:i[2],$$slots:{default:[gs]},$$scope:{ctx:i}}});let l=i[2]&&Bt(i);return{c(){e=y("div"),D(t.$$.fragment),r=G(),l&&l.c(),this.h()},l(n){e=A(n,"DIV",{class:!0});var o=F(e);L(t.$$.fragment,o),r=V(o),l&&l.l(o),o.forEach(_),this.h()},h(){C(e,"class","starship_preview svelte-1uhbdjt")},m(n,o){k(n,e,o),O(t,e,null),z(e,r),l&&l.m(e,null),s=!0},p(n,o){const a={};o&10&&(a.on_click=n[7]),o&4&&(a.starshipMode=n[2]),o&516&&(a.$$scope={dirty:o,ctx:n}),t.$set(a),n[2]?l?(l.p(n,o),o&4&&d(l,1)):(l=Bt(n),l.c(),d(l,1),l.m(e,null)):l&&($(),S(l,1,1,()=>{l=null}),J())},i(n){s||(d(t.$$.fragment,n),d(l),s=!0)},o(n){S(t.$$.fragment,n),S(l),s=!1},d(n){n&&_(e),P(t),l&&l.d()}}}function Ht(i){let e,t,r,s;return t=new xt({props:{$$slots:{default:[vs]},$$scope:{ctx:i}}}),{c(){e=y("div"),D(t.$$.fragment)},l(l){e=A(l,"DIV",{});var n=F(e);L(t.$$.fragment,n),n.forEach(_)},m(l,n){k(l,e,n),O(t,e,null),s=!0},p(l,n){const o={};n&624&&(o.$$scope={dirty:n,ctx:l}),t.$set(o)},i(l){s||(d(t.$$.fragment,l),l&&$t(()=>{s&&(r||(r=St(e,At,{},!0)),r.run(1))}),s=!0)},o(l){S(t.$$.fragment,l),l&&(r||(r=St(e,At,{},!1)),r.run(0)),s=!1},d(l){l&&_(e),P(t),l&&r&&r.end()}}}function Mt(i){let e,t,r,s,l,n,o,a;r=new Zt({props:{scores:i[6],defaultIcon:"❔"}});function f(u,v){return u[6].crew_rescued_at_once_count>=5?Ss:u[6].crew_rescued_at_once_count?ks:bs}let c=f(i),p=c(i);return{c(){e=y("br"),t=G(),D(r.$$.fragment),s=G(),l=y("br"),n=G(),o=y("p"),p.c(),this.h()},l(u){e=A(u,"BR",{}),t=V(u),L(r.$$.fragment,u),s=V(u),l=A(u,"BR",{}),n=V(u),o=A(u,"P",{class:!0});var v=F(o);p.l(v),v.forEach(_),this.h()},h(){C(o,"class","box mb_lg")},m(u,v){k(u,e,v),k(u,t,v),O(r,u,v),k(u,s,v),k(u,l,v),k(u,n,v),k(u,o,v),p.m(o,null),a=!0},p(u,v){const R={};v&64&&(R.scores=u[6]),r.$set(R),c===(c=f(u))&&p?p.p(u,v):(p.d(1),p=c(u),p&&(p.c(),p.m(o,null)))},i(u){a||(d(r.$$.fragment,u),a=!0)},o(u){S(r.$$.fragment,u),a=!1},d(u){u&&(_(e),_(t),_(s),_(l),_(n),_(o)),P(r,u),p.d()}}}function bs(i){let e;return{c(){e=ae("no crewmembers have been rescued")},l(t){e=fe(t,"no crewmembers have been rescued")},m(t,r){k(t,e,r)},p:ce,d(t){t&&_(e)}}}function ks(i){let e=i[6].crew_rescued_at_once_count+"",t,r,s,l=i[6].crew_rescued_at_once_count!==1&&Ct();return{c(){t=ae(e),r=ae(" crewmember"),l&&l.c(),s=ae(`
								rescued in your best run`)},l(n){t=fe(n,e),r=fe(n," crewmember"),l&&l.l(n),s=fe(n,`
								rescued in your best run`)},m(n,o){k(n,t,o),k(n,r,o),l&&l.m(n,o),k(n,s,o)},p(n,o){o&64&&e!==(e=n[6].crew_rescued_at_once_count+"")&&mr(t,e),n[6].crew_rescued_at_once_count!==1?l||(l=Ct(),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(n){n&&(_(t),_(r),_(s)),l&&l.d(n)}}}function Ss(i){let e,t="full crew ready";return{c(){e=y("a"),e.textContent=t,this.h()},l(r){e=A(r,"A",{href:!0,"data-svelte-h":!0}),oe(e)!=="svelte-u8hoje"&&(e.textContent=t),this.h()},h(){C(e,"href","/unlock")},m(r,s){k(r,e,s)},p:ce,d(r){r&&_(e)}}}function Ct(i){let e;return{c(){e=ae("s")},l(t){e=fe(t,"s")},m(t,r){k(t,e,r)},d(t){t&&_(e)}}}function Dt(i){let e,t="reset scores",r,s;return{c(){e=y("button"),e.textContent=t},l(l){e=A(l,"BUTTON",{"data-svelte-h":!0}),oe(e)!=="svelte-6507cw"&&(e.textContent=t)},m(l,n){k(l,e,n),r||(s=tt(e,"click",function(){Jt(i[4])&&i[4].apply(this,arguments)}),r=!0)},p(l,n){i=l},d(l){l&&_(e),r=!1,s()}}}function Ot(i){let e,t="import scores",r,s;return{c(){e=y("button"),e.textContent=t},l(l){e=A(l,"BUTTON",{"data-svelte-h":!0}),oe(e)!=="svelte-cxeod6"&&(e.textContent=t)},m(l,n){k(l,e,n),r||(s=tt(e,"click",function(){Jt(i[5])&&i[5].apply(this,arguments)}),r=!0)},p(l,n){i=l},d(l){l&&_(e),r=!1,s()}}}function vs(i){let e,t,r="scores",s,l,n,o,a,f=i[6]&&Mt(i),c=i[4]&&Dt(i),p=i[5]&&Ot(i);return{c(){e=y("div"),t=y("h2"),t.textContent=r,s=G(),f&&f.c(),l=G(),n=y("div"),c&&c.c(),o=G(),p&&p.c(),this.h()},l(u){e=A(u,"DIV",{});var v=F(e);t=A(v,"H2",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-1itypu1"&&(t.textContent=r),s=V(v),f&&f.l(v),l=V(v),n=A(v,"DIV",{class:!0});var R=F(n);c&&c.l(R),o=V(R),p&&p.l(R),R.forEach(_),v.forEach(_),this.h()},h(){C(t,"class","svelte-1uhbdjt"),C(n,"class","box row")},m(u,v){k(u,e,v),z(e,t),z(e,s),f&&f.m(e,null),z(e,l),z(e,n),c&&c.m(n,null),z(n,o),p&&p.m(n,null),a=!0},p(u,v){u[6]?f?(f.p(u,v),v&64&&d(f,1)):(f=Mt(u),f.c(),d(f,1),f.m(e,l)):f&&($(),S(f,1,1,()=>{f=null}),J()),u[4]?c?c.p(u,v):(c=Dt(u),c.c(),c.m(n,o)):c&&(c.d(1),c=null),u[5]?p?p.p(u,v):(p=Ot(u),p.c(),p.m(n,null)):p&&(p.d(1),p=null)},i(u){a||(d(f),a=!0)},o(u){S(f),a=!1},d(u){u&&_(e),f&&f.d(),c&&c.d(),p&&p.d()}}}function Es(i){let e,t="<td><code>[Space]</code></td><td>toggle starship game</td>",r,s,l="<td><code>[r]</code></td><td>restart starship game</td>";return{c(){e=y("tr"),e.innerHTML=t,r=G(),s=y("tr"),s.innerHTML=l},l(n){e=A(n,"TR",{"data-svelte-h":!0}),oe(e)!=="svelte-xj8t5n"&&(e.innerHTML=t),r=V(n),s=A(n,"TR",{"data-svelte-h":!0}),oe(s)!=="svelte-1ed4puq"&&(s.innerHTML=l)},m(n,o){k(n,e,o),k(n,r,o),k(n,s,o)},p:ce,d(n){n&&(_(e),_(r),_(s))}}}function Rs(i){let e,t,r,s,l,n,o;r=new xt({props:{$$slots:{default:[ws]},$$scope:{ctx:i}}});let a=(i[4]||i[5])&&Ht(i);return n=new ts({props:{clock:i[0],$$slots:{default:[Es]},$$scope:{ctx:i}}}),{c(){e=y("div"),t=y("div"),D(r.$$.fragment),s=G(),a&&a.c(),l=G(),D(n.$$.fragment),this.h()},l(f){e=A(f,"DIV",{class:!0});var c=F(e);t=A(c,"DIV",{class:!0});var p=F(t);L(r.$$.fragment,p),p.forEach(_),s=V(c),a&&a.l(c),l=V(c),L(n.$$.fragment,c),c.forEach(_),this.h()},h(){C(t,"class","box starship_preview_wrapper svelte-1uhbdjt"),C(e,"class","wrapper svelte-1uhbdjt")},m(f,c){k(f,e,c),z(e,t),O(r,t,null),z(e,s),a&&a.m(e,null),z(e,l),O(n,e,null),o=!0},p(f,[c]){const p={};c&526&&(p.$$scope={dirty:c,ctx:f}),r.$set(p),f[4]||f[5]?a?(a.p(f,c),c&48&&d(a,1)):(a=Ht(f),a.c(),d(a,1),a.m(e,l)):a&&($(),S(a,1,1,()=>{a=null}),J());const u={};c&1&&(u.clock=f[0]),c&512&&(u.$$scope={dirty:c,ctx:f}),n.$set(u)},i(f){o||(d(r.$$.fragment,f),d(a),d(n.$$.fragment,f),o=!0)},o(f){S(r.$$.fragment,f),S(a),S(n.$$.fragment,f),o=!1},d(f){f&&_(e),P(r),a&&a.d(),P(n)}}}function Ts(i,e,t){let{clock:r}=e,{exit:s}=e,{starshipMode:l}=e,{toggleStarshipMode:n}=e,{resetScores:o}=e,{importScores:a}=e,{scores:f}=e;const c=async()=>{s(),await n()},p=async()=>{s(),n(),await xe(),await xe(),n()};return i.$$set=u=>{"clock"in u&&t(0,r=u.clock),"exit"in u&&t(1,s=u.exit),"starshipMode"in u&&t(2,l=u.starshipMode),"toggleStarshipMode"in u&&t(3,n=u.toggleStarshipMode),"resetScores"in u&&t(4,o=u.resetScores),"importScores"in u&&t(5,a=u.importScores),"scores"in u&&t(6,f=u.scores)},[r,s,l,n,o,a,f,c,p]}class ys extends Ye{constructor(e){super(),Le(this,e,Ts,Rs,Ne,{clock:0,exit:1,starshipMode:2,toggleStarshipMode:3,resetScores:4,importScores:5,scores:6})}}function Pt(i,e,t){const r=i.slice();return r[80]=e[t],r}function It(i,e,t){const r=i.slice();return r[83]=e[t],r}function Wt(i,e,t){const r=i.slice();return r[80]=e[t],r}function Nt(i,e,t){const r=i.slice();return r[83]=e[t],r}function As(i){let e,t,r;var s=Ze.Preview;function l(n,o){return{}}return s&&(e=Ce(s,l())),{c(){e&&D(e.$$.fragment),t=q()},l(n){e&&L(e.$$.fragment,n),t=q()},m(n,o){e&&O(e,n,o),k(n,t,o),r=!0},p(n,o){if(s!==(s=Ze.Preview)){if(e){$();const a=e;S(a.$$.fragment,1,0,()=>{P(a,1)}),J()}s?(e=Ce(s,l()),D(e.$$.fragment),d(e.$$.fragment,1),O(e,t.parentNode,t)):e=null}},i(n){r||(e&&d(e.$$.fragment,n),r=!0)},o(n){e&&S(e.$$.fragment,n),r=!1},d(n){n&&_(t),e&&P(e,n)}}}function Yt(i){let e,t;return e=new Ir({props:{unlocked:i[30],scores:i[12],on_click:i[30]?void 0:i[64]}}),{c(){D(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,s){O(e,r,s),t=!0},p(r,s){const l={};s[0]&1073741824&&(l.unlocked=r[30]),s[0]&4096&&(l.scores=r[12]),s[0]&1073741952&&(l.on_click=r[30]?void 0:r[64]),e.$set(l)},i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){P(e,r)}}}function Bs(i){let e,t;return e=new De({props:{href:i[83].slug,classes:"portal_preview--"+i[83].slug,$$slots:{default:[Ms]},$$scope:{ctx:i}}}),{c(){D(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,s){O(e,r,s),t=!0},p(r,s){const l={};s[2]&536870912&&(l.$$scope={dirty:s,ctx:r}),e.$set(l)},i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){P(e,r)}}}function Hs(i){let e,t;return e=new Qt({props:{on_click:i[51],classes:"portal_preview--starship"}}),{c(){D(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,s){O(e,r,s),t=!0},p:ce,i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){P(e,r)}}}function Ms(i){let e,t,r;var s=i[83].Preview;function l(n,o){return{}}return s&&(e=Ce(s,l())),{c(){e&&D(e.$$.fragment),t=q()},l(n){e&&L(e.$$.fragment,n),t=q()},m(n,o){e&&O(e,n,o),k(n,t,o),r=!0},p(n,o){if(s!==(s=n[83].Preview)){if(e){$();const a=e;S(a.$$.fragment,1,0,()=>{P(a,1)}),J()}s?(e=Ce(s,l()),D(e.$$.fragment),d(e.$$.fragment,1),O(e,t.parentNode,t)):e=null}},i(n){r||(e&&d(e.$$.fragment,n),r=!0)},o(n){e&&S(e.$$.fragment,n),r=!1},d(n){n&&_(t),e&&P(e,n)}}}function Lt(i,e){let t,r,s,l,n;const o=[Hs,Bs],a=[];function f(c,p){return c[83]===c[40]?0:1}return r=f(e),s=a[r]=o[r](e),{key:i,first:null,c(){t=q(),s.c(),l=q(),this.h()},l(c){t=q(),s.l(c),l=q(),this.h()},h(){this.first=t},m(c,p){k(c,t,p),a[r].m(c,p),k(c,l,p),n=!0},p(c,p){e=c,s.p(e,p)},i(c){n||(d(s),n=!0)},o(c){S(s),n=!1},d(c){c&&(_(t),_(l)),a[r].d(c)}}}function Gt(i){let e,t=[],r=new Map,s,l=be(i[80]);const n=o=>o[83];for(let o=0;o<l.length;o+=1){let a=Nt(i,l,o),f=n(a);r.set(f,t[o]=Lt(f,a))}return{c(){e=y("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=A(o,"DIV",{class:!0});var a=F(e);for(let f=0;f<t.length;f+=1)t[f].l(a);a.forEach(_),this.h()},h(){C(e,"class","portals svelte-mtti39")},m(o,a){k(o,e,a);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},p(o,a){a[1]&1050112&&(l=be(o[80]),$(),t=pr(t,a,n,1,o,l,r,e,wr,Lt,null,Nt),J())},i(o){if(!s){for(let a=0;a<l.length;a+=1)d(t[a]);s=!0}},o(o){for(let a=0;a<t.length;a+=1)S(t[a]);s=!1},d(o){o&&_(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Vt(i){let e,t;return e=new De({props:{classes:"show-more-button",on_click:i[65],$$slots:{default:[Is]},$$scope:{ctx:i}}}),{c(){D(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,s){O(e,r,s),t=!0},p(r,s){const l={};s[0]&8192|s[1]&64|s[2]&536870912&&(l.$$scope={dirty:s,ctx:r}),e.$set(l)},i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){P(e,r)}}}function Cs(i){let e,t;return{c(){e=y("img"),this.h()},l(r){e=A(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){mt(e.src,t="/assets/earth/night_lights_3.png")||C(e,"src",t),C(e,"alt","night lights of Asia and Australia"),C(e,"class","night-light svelte-mtti39")},m(r,s){k(r,e,s)},d(r){r&&_(e)}}}function Ds(i){let e,t;return{c(){e=y("img"),this.h()},l(r){e=A(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){mt(e.src,t="/assets/earth/night_lights_2.png")||C(e,"src",t),C(e,"alt","night lights of the Americas"),C(e,"class","night-light svelte-mtti39")},m(r,s){k(r,e,s)},d(r){r&&_(e)}}}function Os(i){let e,t;return{c(){e=y("img"),this.h()},l(r){e=A(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){mt(e.src,t="/assets/earth/night_lights_1.png")||C(e,"src",t),C(e,"alt","night lights of Africa, Europe, and the Middle East"),C(e,"class","night-light svelte-mtti39")},m(r,s){k(r,e,s)},d(r){r&&_(e)}}}function Ps(i){let e;function t(l,n){return l[86]===0?Os:l[86]===1?Ds:Cs}let r=t(i),s=r(i);return{c(){s.c(),e=q()},l(l){s.l(l),e=q()},m(l,n){s.m(l,n),k(l,e,n)},p(l,n){r!==(r=t(l))&&(s.d(1),s=r(l),s&&(s.c(),s.m(e.parentNode,e)))},d(l){l&&_(e),s.d(l)}}}function Is(i){let e,t,r;return e=new br({props:{running:i[13]&&i[37].running,$$slots:{default:[Ps,({index:s})=>({86:s}),({index:s})=>[0,0,s?16777216:0]]},$$scope:{ctx:i}}}),{c(){t=y("div"),D(e.$$.fragment),this.h()},l(s){t=A(s,"DIV",{style:!0});var l=F(t);L(e.$$.fragment,l),this.h()},h(){_e(t,"display","contents"),_e(t,"--animation_duration","var(--duration_6)")},m(s,l){k(s,t,l),O(e,t,null),r=!0},p(s,l){const n={};l[0]&8192|l[1]&64&&(n.running=s[13]&&s[37].running),l[2]&553648128&&(n.$$scope={dirty:l,ctx:s}),e.$set(n)},i(s){r||(d(e.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),r=!1},d(s){s&&e&&_(t),P(e,s)}}}function Kt(i){let e,t,r=be(i[21]),s=[];for(let n=0;n<r.length;n+=1)s[n]=qt(Pt(i,r,n));const l=n=>S(s[n],1,1,()=>{s[n]=null});return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=q()},l(n){for(let o=0;o<s.length;o+=1)s[o].l(n);e=q()},m(n,o){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,o);k(n,e,o),t=!0},p(n,o){if(o[0]&2097152){r=be(n[21]);let a;for(a=0;a<r.length;a+=1){const f=Pt(n,r,a);s[a]?(s[a].p(f,o),d(s[a],1)):(s[a]=qt(f),s[a].c(),d(s[a],1),s[a].m(e.parentNode,e))}for($(),a=r.length;a<s.length;a+=1)l(a);J()}},i(n){if(!t){for(let o=0;o<r.length;o+=1)d(s[o]);t=!0}},o(n){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)S(s[o]);t=!1},d(n){n&&_(e),_t(s,n)}}}function Ws(i){let e,t,r;var s=i[83].Preview;function l(n,o){return{}}return s&&(e=Ce(s,l())),{c(){e&&D(e.$$.fragment),t=q()},l(n){e&&L(e.$$.fragment,n),t=q()},m(n,o){e&&O(e,n,o),k(n,t,o),r=!0},p(n,o){if(o[0]&2097152&&s!==(s=n[83].Preview)){if(e){$();const a=e;S(a.$$.fragment,1,0,()=>{P(a,1)}),J()}s?(e=Ce(s,l()),D(e.$$.fragment),d(e.$$.fragment,1),O(e,t.parentNode,t)):e=null}},i(n){r||(e&&d(e.$$.fragment,n),r=!0)},o(n){e&&S(e.$$.fragment,n),r=!1},d(n){n&&_(t),e&&P(e,n)}}}function zt(i){let e,t;return e=new De({props:{href:i[83].slug,classes:"portal_preview--"+i[83].slug,$$slots:{default:[Ws]},$$scope:{ctx:i}}}),{c(){D(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,s){O(e,r,s),t=!0},p(r,s){const l={};s[0]&2097152&&(l.href=r[83].slug),s[0]&2097152&&(l.classes="portal_preview--"+r[83].slug),s[0]&2097152|s[2]&536870912&&(l.$$scope={dirty:s,ctx:r}),e.$set(l)},i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){P(e,r)}}}function qt(i){let e,t,r,s=be(i[80]),l=[];for(let o=0;o<s.length;o+=1)l[o]=zt(It(i,s,o));const n=o=>S(l[o],1,1,()=>{l[o]=null});return{c(){e=y("div");for(let o=0;o<l.length;o+=1)l[o].c();t=G(),this.h()},l(o){e=A(o,"DIV",{class:!0});var a=F(e);for(let f=0;f<l.length;f+=1)l[f].l(a);t=V(a),a.forEach(_),this.h()},h(){C(e,"class","portals strength-portals svelte-mtti39")},m(o,a){k(o,e,a);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(e,null);z(e,t),r=!0},p(o,a){if(a[0]&2097152){s=be(o[80]);let f;for(f=0;f<s.length;f+=1){const c=It(o,s,f);l[f]?(l[f].p(c,a),d(l[f],1)):(l[f]=zt(c),l[f].c(),d(l[f],1),l[f].m(e,t))}for($(),f=s.length;f<l.length;f+=1)n(f);J()}},i(o){if(!r){for(let a=0;a<s.length;a+=1)d(l[a]);r=!0}},o(o){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)S(l[a]);r=!1},d(o){o&&_(e),_t(l,o)}}}function Ft(i){let e,t,r;return t=new De({props:{on_click:i[46],role:"checkbox","aria-label":"speed booster","aria-checked":i[29],$$slots:{default:[Ns]},$$scope:{ctx:i}}}),{c(){e=y("div"),D(t.$$.fragment),this.h()},l(s){e=A(s,"DIV",{class:!0});var l=F(e);L(t.$$.fragment,l),l.forEach(_),this.h()},h(){C(e,"class","portals svelte-mtti39")},m(s,l){k(s,e,l),O(t,e,null),r=!0},p(s,l){const n={};l[0]&536870912&&(n["aria-checked"]=s[29]),l[0]&536870912|l[2]&536870912&&(n.$$scope={dirty:l,ctx:s}),t.$set(n)},i(s){r||(d(t.$$.fragment,s),r=!0)},o(s){S(t.$$.fragment,s),r=!1},d(s){s&&_(e),P(t)}}}function Ns(i){let e,t;return{c(){e=y("div"),t=ae(et),this.h()},l(r){e=A(r,"DIV",{class:!0});var s=F(e);t=fe(s,et),s.forEach(_),this.h()},h(){C(e,"class","booster svelte-mtti39"),we(e,"disabled",!i[29])},m(r,s){k(r,e,s),z(e,t)},p(r,s){s[0]&536870912&&we(e,"disabled",!r[29])},d(r){r&&_(e)}}}function jt(i){let e,t,r,s,l,n,o,a;function f(w){i[67](w)}function c(w){i[68](w)}function p(w){i[69](w)}function u(w){i[70](w)}let v={viewportWidth:i[19],viewportHeight:i[15],viewWidth:i[3],viewHeight:i[4],worldWidth:i[5],worldHeight:i[6],speed_booster_enabled:i[29],strengthBoosterEnabled:i[28],strengthBooster1Enabled:i[0],strengthBooster2Enabled:i[1],strengthBooster3Enabled:i[2],cameraUnlocked:i[16],stage:i[11],finish:i[43],enableDomCanvasRenderer:i[33]};i[8]!==void 0&&(v.starshipX=i[8]),i[9]!==void 0&&(v.starshipY=i[9]),i[10]!==void 0&&(v.starshipAngle=i[10]),i[22]!==void 0&&(v.starshipShieldRadius=i[22]),e=new _s({props:v}),Fe.push(()=>Ue(e,"starshipX",f)),Fe.push(()=>Ue(e,"starshipY",c)),Fe.push(()=>Ue(e,"starshipAngle",p)),Fe.push(()=>Ue(e,"starshipShieldRadius",u));let R=i[23]&&Ut(i);return{c(){D(e.$$.fragment),n=G(),R&&R.c(),o=q()},l(w){L(e.$$.fragment,w),n=V(w),R&&R.l(w),o=q()},m(w,T){O(e,w,T),k(w,n,T),R&&R.m(w,T),k(w,o,T),a=!0},p(w,T){const E={};T[0]&524288&&(E.viewportWidth=w[19]),T[0]&32768&&(E.viewportHeight=w[15]),T[0]&8&&(E.viewWidth=w[3]),T[0]&16&&(E.viewHeight=w[4]),T[0]&32&&(E.worldWidth=w[5]),T[0]&64&&(E.worldHeight=w[6]),T[0]&536870912&&(E.speed_booster_enabled=w[29]),T[0]&268435456&&(E.strengthBoosterEnabled=w[28]),T[0]&1&&(E.strengthBooster1Enabled=w[0]),T[0]&2&&(E.strengthBooster2Enabled=w[1]),T[0]&4&&(E.strengthBooster3Enabled=w[2]),T[0]&65536&&(E.cameraUnlocked=w[16]),T[0]&2048&&(E.stage=w[11]),T[1]&4&&(E.enableDomCanvasRenderer=w[33]),!t&&T[0]&256&&(t=!0,E.starshipX=w[8],je(()=>t=!1)),!r&&T[0]&512&&(r=!0,E.starshipY=w[9],je(()=>r=!1)),!s&&T[0]&1024&&(s=!0,E.starshipAngle=w[10],je(()=>s=!1)),!l&&T[0]&4194304&&(l=!0,E.starshipShieldRadius=w[22],je(()=>l=!1)),e.$set(E),w[23]?R?(R.p(w,T),T[0]&8388608&&d(R,1)):(R=Ut(w),R.c(),d(R,1),R.m(o.parentNode,o)):R&&($(),S(R,1,1,()=>{R=null}),J())},i(w){a||(d(e.$$.fragment,w),d(R),a=!0)},o(w){S(e.$$.fragment,w),S(R),a=!1},d(w){w&&(_(n),_(o)),P(e,w),R&&R.d(w)}}}function Ut(i){let e,t,r,s,l;return t=new es({props:{label:"return home",style:"font-size: var(--size_xl9)",$$slots:{default:[Gs]},$$scope:{ctx:i}}}),t.$on("click",i[71]),s=new Zt({props:{scores:i[31]&&i[36]}}),{c(){e=y("div"),D(t.$$.fragment),r=G(),D(s.$$.fragment),this.h()},l(n){e=A(n,"DIV",{class:!0});var o=F(e);L(t.$$.fragment,o),r=V(o),L(s.$$.fragment,o),o.forEach(_),this.h()},h(){C(e,"class","exit svelte-mtti39")},m(n,o){k(n,e,o),O(t,e,null),z(e,r),O(s,e,null),l=!0},p(n,o){const a={};o[1]&32|o[2]&536870912&&(a.$$scope={dirty:o,ctx:n}),t.$set(a);const f={};o[1]&33&&(f.scores=n[31]&&n[36]),s.$set(f)},i(n){l||(d(t.$$.fragment,n),d(s.$$.fragment,n),l=!0)},o(n){S(t.$$.fragment,n),S(s.$$.fragment,n),l=!1},d(n){n&&_(e),P(t),P(s)}}}function Ys(i){let e;return{c(){e=ae("↩")},l(t){e=fe(t,"↩")},m(t,r){k(t,e,r)},p:ce,d(t){t&&_(e)}}}function Ls(i){let e;return{c(){e=ae(et)},l(t){e=fe(t,et)},m(t,r){k(t,e,r)},p:ce,d(t){t&&_(e)}}}function Gs(i){let e,t;function r(n,o){return o[1]&32&&(e=null),e==null&&(e=!!(n[36]&&ht(n[36]))),e?Ls:Ys}let s=r(i,[-1,-1,-1]),l=s(i);return{c(){l.c(),t=q()},l(n){l.l(n),t=q()},m(n,o){l.m(n,o),k(n,t,o)},p(n,o){s===(s=r(n,o))&&l?l.p(n,o):(l.d(1),l=s(n),l&&(l.c(),l.m(t.parentNode,t)))},d(n){n&&_(t),l.d(n)}}}function Vs(i){let e,t;return e=new ys({props:{clock:i[39],exit:i[79],starshipMode:i[7],toggleStarshipMode:i[50],scores:i[12],resetScores:i[12]?i[44]:void 0,importScores:i[45]}}),{c(){D(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,s){O(e,r,s),t=!0},p(r,s){const l={};s[2]&131072&&(l.exit=r[79]),s[0]&128&&(l.starshipMode=r[7]),s[0]&4096&&(l.scores=r[12]),s[0]&4096&&(l.resetScores=r[12]?r[44]:void 0),e.$set(l)},i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){P(e,r)}}}function Ks(i){let e,t,r,s,l,n,o,a,f,c,p,u,v,R,w,T;s=new De({props:{href:Ze.slug,classes:"portal_preview--"+Ze.slug,$$slots:{default:[As]},$$scope:{ctx:i}}});let E=i[12]&&Yt(i),U=be(i[41]),B=[];for(let h=0;h<U.length;h+=1)B[h]=Gt(Wt(i,U,h));const te=h=>S(B[h],1,1,()=>{B[h]=null});let I=i[17]&&Vt(i),H=i[13]&&Kt(i),W=i[18]&&Ft(i),Y=i[11]&&jt(i);return v=new rs({props:{$$slots:{default:[Vs,({exit:h})=>({79:h}),({exit:h})=>[0,0,h?131072:0]]},$$scope:{ctx:i}}}),{c(){e=y("div"),t=y("nav"),r=y("header"),D(s.$$.fragment),l=G(),E&&E.c(),n=G();for(let h=0;h<B.length;h+=1)B[h].c();o=G(),I&&I.c(),a=G(),H&&H.c(),f=G(),W&&W.c(),p=G(),Y&&Y.c(),u=G(),D(v.$$.fragment),this.h()},l(h){e=A(h,"DIV",{class:!0});var g=F(e);t=A(g,"NAV",{class:!0});var N=F(t);r=A(N,"HEADER",{class:!0});var re=F(r);L(s.$$.fragment,re),re.forEach(_),l=V(N),E&&E.l(N),n=V(N);for(let M=0;M<B.length;M+=1)B[M].l(N);o=V(N),I&&I.l(N),a=V(N),H&&H.l(N),f=V(N),W&&W.l(N),N.forEach(_),p=V(g),Y&&Y.l(g),g.forEach(_),u=V(h),L(v.$$.fragment,h),this.h()},h(){C(r,"class","portals svelte-mtti39"),C(t,"class","svelte-mtti39"),$t(()=>i[66].call(t)),_e(t,"transform",i[7]?`translate3d(${i[26]}px, ${i[25]}px,	0) scale3d(${i[27]}, ${i[27]}, ${i[27]})	rotate(${i[32]}rad)`:"none"),_e(t,"transition",i[35]?"none":`transform ${i[24]}ms ease-in-out`),C(e,"class","home svelte-mtti39"),we(e,"starship-mode",i[7]),we(e,"starship-ready",i[35]),we(e,"starship-transitioning",i[20])},m(h,g){k(h,e,g),z(e,t),z(t,r),O(s,r,null),z(t,l),E&&E.m(t,null),z(t,n);for(let N=0;N<B.length;N+=1)B[N]&&B[N].m(t,null);z(t,o),I&&I.m(t,null),z(t,a),H&&H.m(t,null),z(t,f),W&&W.m(t,null),c=dr(t,i[66].bind(t)),z(e,p),Y&&Y.m(e,null),k(h,u,g),O(v,h,g),R=!0,w||(T=tt(window,"keydown",i[52]),w=!0)},p(h,g){const N={};if(g[2]&536870912&&(N.$$scope={dirty:g,ctx:h}),s.$set(N),h[12]?E?(E.p(h,g),g[0]&4096&&d(E,1)):(E=Yt(h),E.c(),d(E,1),E.m(t,n)):E&&($(),S(E,1,1,()=>{E=null}),J()),g[1]&1050112){U=be(h[41]);let M;for(M=0;M<U.length;M+=1){const X=Wt(h,U,M);B[M]?(B[M].p(X,g),d(B[M],1)):(B[M]=Gt(X),B[M].c(),d(B[M],1),B[M].m(t,o))}for($(),M=U.length;M<B.length;M+=1)te(M);J()}h[17]?I?(I.p(h,g),g[0]&131072&&d(I,1)):(I=Vt(h),I.c(),d(I,1),I.m(t,a)):I&&($(),S(I,1,1,()=>{I=null}),J()),h[13]?H?(H.p(h,g),g[0]&8192&&d(H,1)):(H=Kt(h),H.c(),d(H,1),H.m(t,f)):H&&($(),S(H,1,1,()=>{H=null}),J()),h[18]?W?(W.p(h,g),g[0]&262144&&d(W,1)):(W=Ft(h),W.c(),d(W,1),W.m(t,null)):W&&($(),S(W,1,1,()=>{W=null}),J()),g[0]&234881152|g[1]&2&&_e(t,"transform",h[7]?`translate3d(${h[26]}px, ${h[25]}px,	0) scale3d(${h[27]}, ${h[27]}, ${h[27]})	rotate(${h[32]}rad)`:"none"),g[0]&16777216|g[1]&16&&_e(t,"transition",h[35]?"none":`transform ${h[24]}ms ease-in-out`),h[11]?Y?(Y.p(h,g),g[0]&2048&&d(Y,1)):(Y=jt(h),Y.c(),d(Y,1),Y.m(e,null)):Y&&($(),S(Y,1,1,()=>{Y=null}),J()),(!R||g[0]&128)&&we(e,"starship-mode",h[7]),(!R||g[1]&16)&&we(e,"starship-ready",h[35]),(!R||g[0]&1048576)&&we(e,"starship-transitioning",h[20]);const re={};g[0]&4224|g[2]&537001984&&(re.$$scope={dirty:g,ctx:h}),v.$set(re)},i(h){if(!R){d(s.$$.fragment,h),d(E);for(let g=0;g<U.length;g+=1)d(B[g]);d(I),d(H),d(W),d(Y),d(v.$$.fragment,h),R=!0}},o(h){S(s.$$.fragment,h),S(E),B=B.filter(Boolean);for(let g=0;g<B.length;g+=1)S(B[g]);S(I),S(H),S(W),S(Y),S(v.$$.fragment,h),R=!1},d(h){h&&(_(e),_(u)),P(s),E&&E.d(),_t(B,h),I&&I.d(),H&&H.d(),W&&W.d(),c(),Y&&Y.d(),P(v,h),w=!1,T()}}}const Xt=500,at="cpg_home_scores",ft="cpg_speed_booster_toggled",et="🙌",ct="cpg_strength_booster_toggled";function zs(i,e,t){let r,s,l,n,o,a,f,c,p,u,v,R,w,T,E,U,B,te,I,H,W,Y,h,g,N=ce,re=()=>(N(),N=ut(v,m=>t(36,g=m)),v),M,X,ue=ce,K=()=>(ue(),ue=ut(f,m=>t(61,X=m)),f),Ee,Re,Ge;ve(i,Xe,m=>t(73,M=m)),i.$$.on_destroy.push(()=>N()),i.$$.on_destroy.push(()=>ue());const Ve=vr();ve(i,Ve,m=>t(63,Re=m));const me=rt();ve(i,me,m=>t(37,Ge=m));let Te=Me(Et,!1),b=Me(Rt,!1),x=Me(Tt,!1);const se={width:2560,height:1440};let ee,ie,de,ke;const dt=Symbol(),er=[[Wr],[Nr],[Yr,Lr,Gr],[dt,Vr,Kr]];let gt;const pt=$r();ve(i,pt,m=>t(62,Ee=m));let Ke=0,le=!1,ne=0,Oe=0,Pe=0,ye=0,st=0,Q=null;const tr=()=>{t(11,Q=new Fr({exit:m=>console.log("exited stage",m),worldWidth:de,worldHeight:ke,viewWidth:ee,viewHeight:ie,viewportWidth:r,viewportHeight:s,data:{freezeCamera:!H}})),j||(Ae=jr(Q),ze(Ae))},rr=()=>{Q&&(Q.destroy(),t(11,Q=null))};let j=Me(at,void 0,m=>{if(!m||typeof m.crew_rescued_at_once_count!="number"||isNaN(m.crew_rescued_at_once_count)||!Array.isArray(m.crew)||!m.crew.every(Z=>typeof Z=="boolean"))throw Error()}),Ae;const ze=m=>kr(m,j)?!1:(he(at,m),t(12,j=m),!0);let Ie=!1;const wt=async m=>{if(Ie)return;if(!m)return We();t(23,Ie=!0);const Z=zr(m,j);ze(Z)&&(!R&&ht(Z)&&bt(),!T&&yt(Z)&&await lt())},it=()=>{confirm("delete all scores?")&&(he(at,void 0),t(12,j=void 0),he(ft,!1),t(55,Be=!1),he(ct,!1),t(13,Se=!1),he(Et,!1),t(0,Te=!1),he(Rt,!1),t(1,b=!1),he(Tt,!1),t(2,x=!1))},sr=()=>{var Z;const m=(Z=prompt("import scores",j?JSON.stringify(j):Ae?JSON.stringify(Ae):void 0))==null?void 0:Z.trim();if(m==="")Ae?ze(Ae):it();else try{const ge=m===void 0?void 0:qr(m);ge&&ze(ge)}catch(ge){alert("failed to parse scores: "+ge)}};let Be=Me(ft,!1);const bt=()=>{t(55,Be=!Be)};let Se=Me(ct,!1);const lt=async()=>{t(13,Se=!Se),Se&&await Sr()};let He;const qe=async()=>{le||(console.log("enterStarshipMode"),t(23,Ie=!1),t(10,ye=0),t(7,le=!0),me.pause(),me.reset(),ot(Xe,M=!1,M),t(54,ne++,ne),await xe(n+50),t(54,ne--,ne))},We=async()=>{le&&(console.log("exitStarshipMode"),t(10,ye=0),t(7,le=!1),me.resume(),ot(Xe,M=!1,M),t(54,ne++,ne),await xe(n+50),t(54,ne--,ne),t(53,Ke++,Ke))},kt=()=>le?We():qe(),ir=()=>ot(Xe,M=!0,M),lr=async m=>{m.key===" "&&!m.ctrlKey&&vt(m.currentTarget)?(pe(m),await kt()):m.key==="r"&&!m.ctrlKey&&vt(m.currentTarget)?(pe(m),We(),await gr(),await qe()):m.key==="F2"?(pe(m),m.ctrlKey?(it(),t(23,Ie=!1)):le&&(me.pause(),g&&await wt(g))):m.key==="1"&&m.ctrlKey?(pe(m),await Je($e("Spacey Intro"))):m.key==="2"&&m.ctrlKey?(pe(m),await Je($e("Spacey Outro"))):m.key==="3"&&m.ctrlKey?(pe(m),await Je($e("Futuristic 4"))):m.key==="4"&&m.ctrlKey&&(pe(m),await Je($e("Futuristic 1")))},nr=async()=>{le||await qe()},or=()=>void lt();function ar(){He=this.clientHeight,t(14,He)}function fr(m){Oe=m,t(8,Oe)}function cr(m){Pe=m,t(9,Pe)}function ur(m){ye=m,t(10,ye)}function hr(m){st=m,t(22,st)}const _r=()=>We();return i.$$.update=()=>{if(i.$$.dirty[2]&2&&t(19,{width:r,height:s}=Re,r,(t(15,s),t(63,Re))),i.$$.dirty[0]&4096&&t(58,w=!!j&&Mr(j)),i.$$.dirty[1]&134217728&&t(16,H=w),i.$$.dirty[0]&622712)if(H){t(3,ee=r),t(4,ie=s);const m=se.width,Z=se.height,ge=m/ee,nt=Z/ie;nt>1&&nt>ge?(t(6,ke=Z),t(5,de=ee*nt|0)):ge>1?(t(5,de=m),t(6,ke=ie*ge|0)):(t(5,de=ee),t(6,ke=ie))}else{t(5,de=se.width),t(6,ke=se.height);const m=de/ke,Z=r/s;t(3,ee=r*Math.min(1,m/Z)|0),t(4,ie=s*Math.min(1,Z/m)|0)}i.$$.dirty[0]&40&&t(56,l=ee/de),i.$$.dirty[0]&7&&t(21,gt=[[...b?[ns]:Qe,...Te?[Cr]:Qe,Dr,...Te?[Or]:Qe,...x?[cs]:Qe]]),i.$$.dirty[0]&4096|i.$$.dirty[1]&4194304&&t(24,n=j||Ke>1?Xt:Xt*1),i.$$.dirty[1]&8388608&&t(20,o=ne>0),i.$$.dirty[0]&1048704&&t(35,a=le&&!o),i.$$.dirty[0]&128&&(rr(),le&&tr()),i.$$.dirty[0]&2048&&K(t(34,f=Q==null?void 0:Q.camera)),i.$$.dirty[0]&2048&&t(57,c=Q==null?void 0:Q.player),i.$$.dirty[2]&1&&t(33,p=Ee.dev_mode),i.$$.dirty[0]&1024&&t(32,u=ye+Math.PI/2),i.$$.dirty[0]&2048&&re(t(31,v=Q==null?void 0:Q.scores)),i.$$.dirty[0]&4096&&t(60,R=!!j&&ht(j)),i.$$.dirty[0]&4096&&t(59,T=!!j&&yt(j)),i.$$.dirty[0]&4096&&t(30,E=!!j&&Pr(j)),i.$$.dirty[1]&16777216&&he(ft,!!Be),i.$$.dirty[1]&536870912&&t(18,U=R),i.$$.dirty[0]&262144|i.$$.dirty[1]&16777216&&t(29,B=U&&Be),i.$$.dirty[0]&8192&&he(ct,!!Se),i.$$.dirty[1]&268435456&&t(17,te=T),i.$$.dirty[0]&139264&&t(28,I=te&&Se),i.$$.dirty[0]&16384|i.$$.dirty[1]&100663296&&t(27,W=c?c.radius*2/He*l:1),i.$$.dirty[0]&256|i.$$.dirty[1]&1107296256&&t(26,Y=(X?(Oe-X.x)*X.scale:Oe)*l),i.$$.dirty[0]&49664|i.$$.dirty[1]&1107296256&&t(25,h=X?(Pe-X.y)*X.scale*l-(He-s)/2:Pe-(He-s)/2)},[Te,b,x,ee,ie,de,ke,le,Oe,Pe,ye,Q,j,Se,He,s,H,te,U,r,o,gt,st,Ie,n,h,Y,W,I,B,E,v,u,p,f,a,g,Ge,Ve,me,dt,er,pt,wt,it,sr,bt,lt,qe,We,kt,ir,lr,Ke,ne,Be,l,c,w,T,R,X,Ee,Re,nr,or,ar,fr,cr,ur,hr,_r]}class pi extends Ye{constructor(e){super(),Le(this,e,zs,Ks,Ne,{},null,[-1,-1,-1])}}export{pi as component};
