import{n as Z,e as b,s as V,b as k,l as g,c as q,d as _,m as f,p as z,i as D,o as p,J as w,a as O,C as $,L as x,M as ee,j as E,k as T,x as Y,y as F,g as H,A as J}from"../chunks/scheduler.317e39f5.js";import{S as te,i as se}from"../chunks/index.3972ef43.js";import{s as ie}from"../chunks/spring.c7a7a961.js";import{l as N}from"../chunks/maths.c8a7eaa0.js";import{s as A}from"../chunks/dom.affe8f60.js";import{g as re}from"../chunks/dimensions.37c4a151.js";import{g as ne}from"../chunks/audio_ctx.d73bbd7d.js";import{v as oe,S as I}from"../chunks/audio_helpers.4e685ec3.js";function j(s){let e,t,u,n,l,d,o,a,m;return{c(){e=E("svg"),t=E("filter"),u=E("feGaussianBlur"),n=E("circle"),o=E("circle"),this.h()},l(i){e=T(i,"svg",{class:!0});var r=g(e);t=T(r,"filter",{id:!0,height:!0,width:!0,y:!0,x:!0});var h=g(t);u=T(h,"feGaussianBlur",{in:!0,stdDeviation:!0}),g(u).forEach(_),h.forEach(_),n=T(r,"circle",{class:!0,cx:!0,cy:!0,r:!0,filter:!0}),g(n).forEach(_),o=T(r,"circle",{class:!0,cx:!0,cy:!0,r:!0}),g(o).forEach(_),r.forEach(_),this.h()},h(){f(u,"in","SourceGraphic"),f(u,"stdDeviation","10"),f(t,"id","blurOuter"),f(t,"height","200%"),f(t,"width","200%"),f(t,"y","-50%"),f(t,"x","-50%"),f(n,"class","outer svelte-1af6dkz"),f(n,"cx",l=s[5].x),f(n,"cy",d=s[5].y),f(n,"r",20),f(n,"filter","url(#blurOuter)"),f(o,"class","inner svelte-1af6dkz"),f(o,"cx",a=s[5].x),f(o,"cy",m=s[5].y),f(o,"r",2),f(e,"class","absolute0 w-100 h-100 z-2")},m(i,r){D(i,e,r),p(e,t),p(t,u),p(e,n),p(e,o)},p(i,r){r&32&&l!==(l=i[5].x)&&f(n,"cx",l),r&32&&d!==(d=i[5].y)&&f(n,"cy",d),r&32&&a!==(a=i[5].x)&&f(o,"cx",a),r&32&&m!==(m=i[5].y)&&f(o,"cy",m)},d(i){i&&_(e)}}}function B(s){let e,t,u,n,l="%";return{c(){e=b("div"),t=b("div"),u=Y(s[3]),n=b("span"),n.textContent=l,this.h()},l(d){e=k(d,"DIV",{class:!0});var o=g(e);t=k(o,"DIV",{});var a=g(t);u=F(a,s[3]),n=k(a,"SPAN",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-1s6wbiw"&&(n.textContent=l),a.forEach(_),o.forEach(_),this.h()},h(){f(n,"class","unit svelte-1af6dkz"),f(e,"class","volume h-100 absolute z-1 t-0 flex items-center justify-start svelte-1af6dkz")},m(d,o){D(d,e,o),p(e,t),p(t,u),p(t,n)},p(d,o){o&8&&J(u,d[3])},d(d){d&&_(e)}}}function X(s){let e,t,u,n,l="hz";return{c(){e=b("div"),t=b("div"),u=Y(s[4]),n=b("span"),n.textContent=l,this.h()},l(d){e=k(d,"DIV",{class:!0});var o=g(e);t=k(o,"DIV",{});var a=g(t);u=F(a,s[4]),n=k(a,"SPAN",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-1ewdw3h"&&(n.textContent=l),a.forEach(_),o.forEach(_),this.h()},h(){f(n,"class","unit svelte-1af6dkz"),f(e,"class","freq absolute z-1 w-100 l-0 flex items-start justify-center svelte-1af6dkz")},m(d,o){D(d,e,o),p(e,t),p(t,u),p(t,n)},p(d,o){o&16&&J(u,d[4])},d(d){d&&_(e)}}}function le(s){let e,t,u,n,l,d,o,a=s[5]&&j(s),m=s[0]!==void 0&&B(s),i=s[1]!==void 0&&X(s);return{c(){e=b("div"),a&&a.c(),t=V(),m&&m.c(),u=V(),i&&i.c(),n=V(),l=b("div"),this.h()},l(r){e=k(r,"DIV",{class:!0,style:!0});var h=g(e);a&&a.l(h),t=q(h),m&&m.l(h),u=q(h),i&&i.l(h),n=q(h),l=k(h,"DIV",{role:!0,class:!0}),g(l).forEach(_),h.forEach(_),this.h()},h(){f(l,"role","none"),f(l,"class","absolute z-3 w-100 h-100"),f(e,"class","hearing-test svelte-1af6dkz"),z(e,"width",s[2].width+"px"),z(e,"height",s[2].height+"px")},m(r,h){D(r,e,h),a&&a.m(e,null),p(e,t),m&&m.m(e,null),p(e,u),i&&i.m(e,null),p(e,n),p(e,l),d||(o=[w(l,"mousedown",s[8]),w(l,"mouseup",s[9]),w(l,"mouseleave",s[9]),w(l,"mousemove",s[10]),w(l,"touchstart",s[8]),w(l,"touchend",s[9]),w(l,"touchcancel",s[9]),w(l,"touchmove",s[10])],d=!0)},p(r,[h]){r[5]?a?a.p(r,h):(a=j(r),a.c(),a.m(e,t)):a&&(a.d(1),a=null),r[0]!==void 0?m?m.p(r,h):(m=B(r),m.c(),m.m(e,u)):m&&(m.d(1),m=null),r[1]!==void 0?i?i.p(r,h):(i=X(r),i.c(),i.m(e,n)):i&&(i.d(1),i=null),h&4&&z(e,"width",r[2].width+"px"),h&4&&z(e,"height",r[2].height+"px")},i:O,o:O,d(r){r&&_(e),a&&a.d(),m&&m.d(),i&&i.d(),d=!1,$(o)}}}const ae=0,ce=25e3,ue=0,fe=1;function de(s,e,t){let u,n,l,d,o,a;const m=re();x(s,m,c=>t(2,o=c));const i=ne();let r=-300,h=-300;const M=ie({x:r,y:h},{stiffness:.08,damping:.32});x(s,M,c=>t(5,a=c));let v,y;const L=(c,C)=>N(ae,ce,c/C),U=(c,C)=>N(ue,fe,1-c/C),K=()=>{v||(t(14,y=i.createGain()),t(14,y.gain.value=0,y),y.connect(i.destination),t(13,v=i.createOscillator()),t(13,v.type="sine",v),v.start(),v.connect(y))},P=()=>{v&&(y.gain.setTargetAtTime(0,i.currentTime,I),v.stop(i.currentTime+I*2),t(13,v=void 0),t(14,y=void 0))};ee(P);const S=c=>"touches"in c&&c.touches.length?c.touches[0].clientX:c.clientX,G=c=>"touches"in c&&c.touches.length?c.touches[0].clientY:c.clientY,Q=c=>{!("touches"in c)&&c.button!==0||(A(c),K(),t(11,r=S(c)),t(12,h=G(c)))},R=c=>{!i||!v||!("touches"in c)&&c.button!==0||(A(c),P())},W=c=>{!i||!v||(A(c),t(11,r=S(c)),t(12,h=G(c)))};return s.$$.update=()=>{s.$$.dirty&6144&&M.set({x:r,y:h}),s.$$.dirty&2052&&t(1,u=r>=0&&o.width?L(r,o.width):void 0),s.$$.dirty&2&&t(4,n=u===void 0?"":Math.round(u)),s.$$.dirty&8194&&v&&u!==void 0&&v.frequency.setValueAtTime(u,i.currentTime),s.$$.dirty&4100&&t(0,l=h>=0&&o.height?U(h,o.height):void 0),s.$$.dirty&1&&t(3,d=l===void 0?"":Math.round(l*100)),s.$$.dirty&16385&&y&&l!==void 0&&y.gain.setTargetAtTime(oe(l),i.currentTime,I)},[l,u,o,d,n,a,m,M,Q,R,W,r,h,v,y]}class be extends te{constructor(e){super(),se(this,e,de,le,Z,{})}}export{be as component};
