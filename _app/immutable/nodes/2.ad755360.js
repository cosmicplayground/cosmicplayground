import{n as Ne,c as ve,e as T,s as G,d as B,m as U,f as _,b as V,o as M,q as _e,i as k,J as tt,a as ce,E as ut,p as z,X as $t,g as oe,F as Jt,y as fe,z as ae,B as ms,I as we,al as ps,r as _t,a3 as Me,t as q,G as Ue,K as Xe,a5 as ot,a0 as gs,V as mt}from"../chunks/scheduler.24efe3e9.js";import{S as Ye,i as Le,c as O,a as L,m as D,t as p,b as S,d as P,g as $,e as J,h as St,f as Fe}from"../chunks/index.d51c8976.js";import{e as be,u as ds,o as ws}from"../chunks/each.9800de32.js";import{P as bs}from"../chunks/PendingAnimation.dd421148.js";import{d as ks}from"../chunks/stage.0434bfc9.js";import{s as de}from"../chunks/dom.affe8f60.js";import{g as st}from"../chunks/clock.06e05f62.js";import{e as vt}from"../chunks/dom.1da668fa.js";import{g as Ss}from"../chunks/dimensions.c3d7a04e.js";import{P as Oe}from"../chunks/PortalPreview.30601181.js";import{P as Qt,S as Et,b as yt,a as Rt}from"../chunks/data.9d5ad88d.js";import{P as vs,a as Es,b as ys,c as Rs,d as Ts,e as Bs,f as As,S as Zt,g as Ze,r as Cs,h as Hs,i as Ms,j as Os,k as ht,l as Tt,m as Ds,n as Ps,o as Is,p as Ws,q as Ns,s as Ys,t as Ls,u as Gs,v as Vs,w as Ks,x as zs,y as qs,z as Us}from"../chunks/data.eef2f01c.js";import{F as Xs}from"../chunks/FreqSpeeds.3e2724de.js";import{F as Fs}from"../chunks/FreqSpectacle.733136d3.js";import{g as js}from"../chunks/settings.a7df8492.js";import{W as $s,S as Js,D as Qs}from"../chunks/DomCanvasRenderer.6d444c6a.js";import{b as Zs}from"../chunks/pixi.afbe3b2f.js";import{F as xs}from"../chunks/FloatingIconButton.8ddff8ad.js";import{s as Bt}from"../chunks/index.4636f668.js";import{P as xt}from"../chunks/Panel.057221e0.js";import{A as er}from"../chunks/AppControlsTable.1ff8090e.js";import{A as tr,s as je}from"../chunks/AppDialog.b09d66ab.js";import{l as $e}from"../chunks/songs.25d08a73.js";import{a as Je}from"../chunks/play_song.85ae12ce.js";import{l as He,s as he}from"../chunks/storage.18a7f2b0.js";import{s as sr}from"../chunks/freezeframe.24ae45dd.js";const xe=(l=0)=>new Promise(e=>setTimeout(e,l)),Qe=Object.freeze([]);function rr(l){let e,t;return e=new Xs({props:{elapsedTime:l[0].time/4,width:100,height:30,hzItems:[3],lowestHzItemCount:1}}),{c(){O(e.$$.fragment)},l(s){L(e.$$.fragment,s)},m(s,r){D(e,s,r),t=!0},p(s,[r]){const i={};r&1&&(i.elapsedTime=s[0].time/4),e.$set(i)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function lr(l,e,t){let s;const r=st();return ve(l,r,i=>t(0,s=i)),[s,r]}let ir=class extends Ye{constructor(e){super(),Le(this,e,lr,rr,Ne,{})}};const nr={name:"secret2",slug:"secret2",showHomeButton:!0,Preview:ir};function or(l){let e,t;return e=new Fs({props:{elapsedTime:l[0].time/4,width:100,height:10,hzItems:[5],lowestHzItemCount:1}}),{c(){O(e.$$.fragment)},l(s){L(e.$$.fragment,s)},m(s,r){D(e,s,r),t=!0},p(s,[r]){const i={};r&1&&(i.elapsedTime=s[0].time/4),e.$set(i)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function fr(l,e,t){let s;const r=st();return ve(l,r,i=>t(0,s=i)),[s,r]}class ar extends Ye{constructor(e){super(),Le(this,e,fr,or,Ne,{})}}const cr={name:"secret3",slug:"secret3",showHomeButton:!0,Preview:ar};function ur(l){let e,t,s,r,i,n,o;return t=new $s({props:{worldWidth:l[5],worldHeight:l[6],viewWidth:l[3],viewHeight:l[4],viewportWidth:l[1],viewportHeight:l[2],stage:l[0],pixi:l[12],domCanvasRenderer:l[10]}}),r=new Js({props:{controller:l[7]}}),{c(){e=T("div"),O(t.$$.fragment),s=G(),O(r.$$.fragment),this.h()},l(f){e=B(f,"DIV",{class:!0});var a=U(e);L(t.$$.fragment,a),a.forEach(_),s=V(f),L(r.$$.fragment,f),this.h()},h(){M(e,"class","view svelte-1fxwwt5"),_e(e,"transform",l[9])},m(f,a){k(f,e,a),D(t,e,null),k(f,s,a),D(r,f,a),i=!0,n||(o=tt(window,"keydown",l[13]),n=!0)},p(f,a){const c={};a[0]&32&&(c.worldWidth=f[5]),a[0]&64&&(c.worldHeight=f[6]),a[0]&8&&(c.viewWidth=f[3]),a[0]&16&&(c.viewHeight=f[4]),a[0]&2&&(c.viewportWidth=f[1]),a[0]&4&&(c.viewportHeight=f[2]),a[0]&1&&(c.stage=f[0]),a[0]&1024&&(c.domCanvasRenderer=f[10]),t.$set(c),a[0]&512&&_e(e,"transform",f[9]);const d={};a[0]&128&&(d.controller=f[7]),r.$set(d)},i(f){i||(p(t.$$.fragment,f),p(r.$$.fragment,f),i=!0)},o(f){S(t.$$.fragment,f),S(r.$$.fragment,f),i=!1},d(f){f&&(_(e),_(s)),P(t),P(r,f),n=!1,o()}}}function hr(l,e,t){let s,r,i,n=ce,o=()=>(n(),n=ut(ue,b=>t(29,i=b)),ue),f;l.$$.on_destroy.push(()=>n());let{viewportWidth:a}=e,{viewportHeight:c}=e,{viewWidth:d}=e,{viewHeight:u}=e,{worldWidth:v}=e,{worldHeight:y}=e,{cameraUnlocked:w=!1}=e,{speedBoosterEnabled:R=!1}=e,{strengthBoosterEnabled:E=!1}=e,{strengthBooster1Enabled:F=!1}=e,{strengthBooster2Enabled:A=!1}=e,{strengthBooster3Enabled:te=!1}=e,{starshipX:I=0}=e,{starshipY:C=0}=e,{starshipAngle:W=0}=e,{starshipShieldRadius:Y=0}=e,{finish:h}=e,{stage:g}=e,{enableDomCanvasRenderer:N=!1}=e;const se=st();ve(l,se,b=>t(27,f=b));const H=Zs();let j,ue,K,Ee=!1;const ye=()=>{!Ee&&g.finished&&(Ee=!0,h(i)),t(14,I=g.player.x),t(15,C=g.player.y),t(16,W=Ge(W,g.player.directionX,g.player.directionY)),t(17,Y=g.player.radius)},Ge=(b,x,re)=>!x&&!re?b:Ve(x,re),Ve=(b,x)=>Math.atan2(x,b),me=(b,x,re,ee)=>{if(b===re&&x===ee)return"";const le=Math.min(b/re,x/ee);return`scale3d(${le}, ${le}, 1)`},Re=b=>{b.key==="q"&&!b.ctrlKey&&(de(b),h(null))};return l.$$set=b=>{"viewportWidth"in b&&t(1,a=b.viewportWidth),"viewportHeight"in b&&t(2,c=b.viewportHeight),"viewWidth"in b&&t(3,d=b.viewWidth),"viewHeight"in b&&t(4,u=b.viewHeight),"worldWidth"in b&&t(5,v=b.worldWidth),"worldHeight"in b&&t(6,y=b.worldHeight),"cameraUnlocked"in b&&t(18,w=b.cameraUnlocked),"speedBoosterEnabled"in b&&t(19,R=b.speedBoosterEnabled),"strengthBoosterEnabled"in b&&t(20,E=b.strengthBoosterEnabled),"strengthBooster1Enabled"in b&&t(21,F=b.strengthBooster1Enabled),"strengthBooster2Enabled"in b&&t(22,A=b.strengthBooster2Enabled),"strengthBooster3Enabled"in b&&t(23,te=b.strengthBooster3Enabled),"starshipX"in b&&t(14,I=b.starshipX),"starshipY"in b&&t(15,C=b.starshipY),"starshipAngle"in b&&t(16,W=b.starshipAngle),"starshipShieldRadius"in b&&t(17,Y=b.starshipShieldRadius),"finish"in b&&t(24,h=b.finish),"stage"in b&&t(0,g=b.stage),"enableDomCanvasRenderer"in b&&t(25,N=b.enableDomCanvasRenderer)},l.$$.update=()=>{l.$$.dirty[0]&33554432&&t(10,s=N?new Qs:null),l.$$.dirty[0]&524288&&t(0,g.player.speed=R?vs:Es,g),l.$$.dirty[0]&15728640&&t(0,g.player.strength=(E?ys:Rs)+(F?Ts:0)+(A?Bs:0)+(te?As:0),g),l.$$.dirty[0]&262144&&t(0,g.freezeCamera=!w,g),l.$$.dirty[0]&1&&t(26,{camera:j,scores:ue,controller:K}=g,j,o(t(8,ue)),(t(7,K),t(0,g),t(1,a),t(2,c),t(3,d),t(4,u),t(5,v),t(6,y),t(19,R),t(20,E),t(21,F),t(22,A),t(23,te),t(18,w))),l.$$.dirty[0]&134217728&&ye(),l.$$.dirty[0]&67420160&&w&&j.setPosition(I,C),l.$$.dirty[0]&130&&K&&t(7,K.viewportWidth=a,K),l.$$.dirty[0]&132&&K&&t(7,K.viewportHeight=c,K),l.$$.dirty[0]&136&&K&&t(7,K.viewWidth=d,K),l.$$.dirty[0]&144&&K&&t(7,K.viewHeight=u,K),l.$$.dirty[0]&160&&K&&t(7,K.worldWidth=v,K),l.$$.dirty[0]&192&&K&&t(7,K.worldHeight=y,K),l.$$.dirty[0]&120&&t(9,r=me(d,u,v,y))},[g,a,c,d,u,v,y,K,ue,r,s,se,H,Re,I,C,W,Y,w,R,E,F,A,te,h,N,j,f]}class _r extends Ye{constructor(e){super(),Le(this,e,hr,ur,Ne,{viewportWidth:1,viewportHeight:2,viewWidth:3,viewHeight:4,worldWidth:5,worldHeight:6,cameraUnlocked:18,speedBoosterEnabled:19,strengthBoosterEnabled:20,strengthBooster1Enabled:21,strengthBooster2Enabled:22,strengthBooster3Enabled:23,starshipX:14,starshipY:15,starshipAngle:16,starshipShieldRadius:17,finish:24,stage:0,enableDomCanvasRenderer:25},null,[-1,-1])}}function mr(l){let e;return{c(){e=fe("play")},l(t){e=ae(t,"play")},m(t,s){k(t,e,s)},d(t){t&&_(e)}}}function pr(l){let e;return{c(){e=fe("exit")},l(t){e=ae(t,"exit")},m(t,s){k(t,e,s)},d(t){t&&_(e)}}}function gr(l){let e,t,s,r="<code>[Space]</code>";function i(f,a){return f[2]?pr:mr}let n=i(l),o=n(l);return{c(){e=T("div"),o.c(),t=G(),s=T("small"),s.innerHTML=r,this.h()},l(f){e=B(f,"DIV",{class:!0});var a=U(e);o.l(a),a.forEach(_),t=V(f),s=B(f,"SMALL",{class:!0,"data-svelte-h":!0}),oe(s)!=="svelte-125shhp"&&(s.innerHTML=r),this.h()},h(){M(e,"class","button-text svelte-1cfp5v3"),M(s,"class","svelte-1cfp5v3")},m(f,a){k(f,e,a),o.m(e,null),k(f,t,a),k(f,s,a)},p(f,a){n!==(n=i(f))&&(o.d(1),o=n(f),o&&(o.c(),o.m(e,null)))},d(f){f&&(_(e),_(t),_(s)),o.d()}}}function At(l){let e,t;return e=new Oe({props:{onClick:l[8],$$slots:{default:[dr]},$$scope:{ctx:l}}}),{c(){O(e.$$.fragment)},l(s){L(e.$$.fragment,s)},m(s,r){D(e,s,r),t=!0},p(s,r){const i={};r&10&&(i.onClick=s[8]),r&512&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function dr(l){let e,t="↻",s,r,i="restart",n,o,f="<code>[r]</code>";return{c(){e=T("div"),e.textContent=t,s=G(),r=T("div"),r.textContent=i,n=G(),o=T("small"),o.innerHTML=f,this.h()},l(a){e=B(a,"DIV",{style:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1h8n14r"&&(e.textContent=t),s=V(a),r=B(a,"DIV",{class:!0,"data-svelte-h":!0}),oe(r)!=="svelte-27v868"&&(r.textContent=i),n=V(a),o=B(a,"SMALL",{class:!0,"data-svelte-h":!0}),oe(o)!=="svelte-12c5dmt"&&(o.innerHTML=f),this.h()},h(){_e(e,"font-size","84px"),M(r,"class","button-text svelte-1cfp5v3"),M(o,"class","svelte-1cfp5v3")},m(a,c){k(a,e,c),k(a,s,c),k(a,r,c),k(a,n,c),k(a,o,c)},p:ce,d(a){a&&(_(e),_(s),_(r),_(n),_(o))}}}function wr(l){let e,t,s,r;t=new Qt({props:{onClick:l[7],starshipMode:l[2],$$slots:{default:[gr]},$$scope:{ctx:l}}});let i=l[2]&&At(l);return{c(){e=T("div"),O(t.$$.fragment),s=G(),i&&i.c(),this.h()},l(n){e=B(n,"DIV",{class:!0});var o=U(e);L(t.$$.fragment,o),s=V(o),i&&i.l(o),o.forEach(_),this.h()},h(){M(e,"class","starship_preview svelte-1cfp5v3")},m(n,o){k(n,e,o),D(t,e,null),z(e,s),i&&i.m(e,null),r=!0},p(n,o){const f={};o&10&&(f.onClick=n[7]),o&4&&(f.starshipMode=n[2]),o&516&&(f.$$scope={dirty:o,ctx:n}),t.$set(f),n[2]?i?(i.p(n,o),o&4&&p(i,1)):(i=At(n),i.c(),p(i,1),i.m(e,null)):i&&($(),S(i,1,1,()=>{i=null}),J())},i(n){r||(p(t.$$.fragment,n),p(i),r=!0)},o(n){S(t.$$.fragment,n),S(i),r=!1},d(n){n&&_(e),P(t),i&&i.d()}}}function Ct(l){let e,t,s,r;return t=new xt({props:{$$slots:{default:[vr]},$$scope:{ctx:l}}}),{c(){e=T("div"),O(t.$$.fragment)},l(i){e=B(i,"DIV",{});var n=U(e);L(t.$$.fragment,n),n.forEach(_)},m(i,n){k(i,e,n),D(t,e,null),r=!0},p(i,n){const o={};n&624&&(o.$$scope={dirty:n,ctx:i}),t.$set(o)},i(i){r||(p(t.$$.fragment,i),i&&$t(()=>{r&&(s||(s=St(e,Bt,{},!0)),s.run(1))}),r=!0)},o(i){S(t.$$.fragment,i),i&&(s||(s=St(e,Bt,{},!1)),s.run(0)),r=!1},d(i){i&&_(e),P(t),i&&s&&s.end()}}}function Ht(l){let e,t,s,r,i,n,o,f;s=new Zt({props:{scores:l[6],defaultIcon:"❔"}});function a(u,v){return u[6].crew_rescued_at_once_count>=5?Sr:u[6].crew_rescued_at_once_count?kr:br}let c=a(l),d=c(l);return{c(){e=T("br"),t=G(),O(s.$$.fragment),r=G(),i=T("br"),n=G(),o=T("p"),d.c(),this.h()},l(u){e=B(u,"BR",{}),t=V(u),L(s.$$.fragment,u),r=V(u),i=B(u,"BR",{}),n=V(u),o=B(u,"P",{class:!0});var v=U(o);d.l(v),v.forEach(_),this.h()},h(){M(o,"class","box spaced")},m(u,v){k(u,e,v),k(u,t,v),D(s,u,v),k(u,r,v),k(u,i,v),k(u,n,v),k(u,o,v),d.m(o,null),f=!0},p(u,v){const y={};v&64&&(y.scores=u[6]),s.$set(y),c===(c=a(u))&&d?d.p(u,v):(d.d(1),d=c(u),d&&(d.c(),d.m(o,null)))},i(u){f||(p(s.$$.fragment,u),f=!0)},o(u){S(s.$$.fragment,u),f=!1},d(u){u&&(_(e),_(t),_(r),_(i),_(n),_(o)),P(s,u),d.d()}}}function br(l){let e;return{c(){e=fe("no crewmembers have been rescued")},l(t){e=ae(t,"no crewmembers have been rescued")},m(t,s){k(t,e,s)},p:ce,d(t){t&&_(e)}}}function kr(l){let e=l[6].crew_rescued_at_once_count+"",t,s,r,i=l[6].crew_rescued_at_once_count!==1&&Mt();return{c(){t=fe(e),s=fe(" crewmember"),i&&i.c(),r=fe(`
								rescued in your best run`)},l(n){t=ae(n,e),s=ae(n," crewmember"),i&&i.l(n),r=ae(n,`
								rescued in your best run`)},m(n,o){k(n,t,o),k(n,s,o),i&&i.m(n,o),k(n,r,o)},p(n,o){o&64&&e!==(e=n[6].crew_rescued_at_once_count+"")&&ms(t,e),n[6].crew_rescued_at_once_count!==1?i||(i=Mt(),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(n){n&&(_(t),_(s),_(r)),i&&i.d(n)}}}function Sr(l){let e,t="full crew ready";return{c(){e=T("a"),e.textContent=t,this.h()},l(s){e=B(s,"A",{href:!0,"data-svelte-h":!0}),oe(e)!=="svelte-u8hoje"&&(e.textContent=t),this.h()},h(){M(e,"href","/unlock")},m(s,r){k(s,e,r)},p:ce,d(s){s&&_(e)}}}function Mt(l){let e;return{c(){e=fe("s")},l(t){e=ae(t,"s")},m(t,s){k(t,e,s)},d(t){t&&_(e)}}}function Ot(l){let e,t="reset scores",s,r;return{c(){e=T("button"),e.textContent=t},l(i){e=B(i,"BUTTON",{"data-svelte-h":!0}),oe(e)!=="svelte-6507cw"&&(e.textContent=t)},m(i,n){k(i,e,n),s||(r=tt(e,"click",function(){Jt(l[4])&&l[4].apply(this,arguments)}),s=!0)},p(i,n){l=i},d(i){i&&_(e),s=!1,r()}}}function Dt(l){let e,t="import scores",s,r;return{c(){e=T("button"),e.textContent=t},l(i){e=B(i,"BUTTON",{"data-svelte-h":!0}),oe(e)!=="svelte-cxeod6"&&(e.textContent=t)},m(i,n){k(i,e,n),s||(r=tt(e,"click",function(){Jt(l[5])&&l[5].apply(this,arguments)}),s=!0)},p(i,n){l=i},d(i){i&&_(e),s=!1,r()}}}function vr(l){let e,t,s="scores",r,i,n,o,f,a=l[6]&&Ht(l),c=l[4]&&Ot(l),d=l[5]&&Dt(l);return{c(){e=T("div"),t=T("h2"),t.textContent=s,r=G(),a&&a.c(),i=G(),n=T("div"),c&&c.c(),o=G(),d&&d.c(),this.h()},l(u){e=B(u,"DIV",{});var v=U(e);t=B(v,"H2",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-1itypu1"&&(t.textContent=s),r=V(v),a&&a.l(v),i=V(v),n=B(v,"DIV",{class:!0});var y=U(n);c&&c.l(y),o=V(y),d&&d.l(y),y.forEach(_),v.forEach(_),this.h()},h(){M(t,"class","svelte-1cfp5v3"),M(n,"class","box row")},m(u,v){k(u,e,v),z(e,t),z(e,r),a&&a.m(e,null),z(e,i),z(e,n),c&&c.m(n,null),z(n,o),d&&d.m(n,null),f=!0},p(u,v){u[6]?a?(a.p(u,v),v&64&&p(a,1)):(a=Ht(u),a.c(),p(a,1),a.m(e,i)):a&&($(),S(a,1,1,()=>{a=null}),J()),u[4]?c?c.p(u,v):(c=Ot(u),c.c(),c.m(n,o)):c&&(c.d(1),c=null),u[5]?d?d.p(u,v):(d=Dt(u),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},i(u){f||(p(a),f=!0)},o(u){S(a),f=!1},d(u){u&&_(e),a&&a.d(),c&&c.d(),d&&d.d()}}}function Er(l){let e,t="<td><code>[Space]</code></td><td>toggle starship game</td>",s,r,i="<td><code>[r]</code></td><td>restart starship game</td>";return{c(){e=T("tr"),e.innerHTML=t,s=G(),r=T("tr"),r.innerHTML=i},l(n){e=B(n,"TR",{"data-svelte-h":!0}),oe(e)!=="svelte-xj8t5n"&&(e.innerHTML=t),s=V(n),r=B(n,"TR",{"data-svelte-h":!0}),oe(r)!=="svelte-1ed4puq"&&(r.innerHTML=i)},m(n,o){k(n,e,o),k(n,s,o),k(n,r,o)},p:ce,d(n){n&&(_(e),_(s),_(r))}}}function yr(l){let e,t,s,r,i,n,o;s=new xt({props:{$$slots:{default:[wr]},$$scope:{ctx:l}}});let f=(l[4]||l[5])&&Ct(l);return n=new er({props:{clock:l[0],$$slots:{default:[Er]},$$scope:{ctx:l}}}),{c(){e=T("div"),t=T("div"),O(s.$$.fragment),r=G(),f&&f.c(),i=G(),O(n.$$.fragment),this.h()},l(a){e=B(a,"DIV",{class:!0});var c=U(e);t=B(c,"DIV",{class:!0});var d=U(t);L(s.$$.fragment,d),d.forEach(_),r=V(c),f&&f.l(c),i=V(c),L(n.$$.fragment,c),c.forEach(_),this.h()},h(){M(t,"class","box starship_preview_wrapper svelte-1cfp5v3"),M(e,"class","wrapper svelte-1cfp5v3")},m(a,c){k(a,e,c),z(e,t),D(s,t,null),z(e,r),f&&f.m(e,null),z(e,i),D(n,e,null),o=!0},p(a,[c]){const d={};c&526&&(d.$$scope={dirty:c,ctx:a}),s.$set(d),a[4]||a[5]?f?(f.p(a,c),c&48&&p(f,1)):(f=Ct(a),f.c(),p(f,1),f.m(e,i)):f&&($(),S(f,1,1,()=>{f=null}),J());const u={};c&1&&(u.clock=a[0]),c&512&&(u.$$scope={dirty:c,ctx:a}),n.$set(u)},i(a){o||(p(s.$$.fragment,a),p(f),p(n.$$.fragment,a),o=!0)},o(a){S(s.$$.fragment,a),S(f),S(n.$$.fragment,a),o=!1},d(a){a&&_(e),P(s),f&&f.d(),P(n)}}}function Rr(l,e,t){let{clock:s}=e,{exit:r}=e,{starshipMode:i}=e,{toggleStarshipMode:n}=e,{resetScores:o}=e,{importScores:f}=e,{scores:a}=e;const c=async()=>{r(),await n()},d=async()=>{r(),n(),await xe(),await xe(),n()};return l.$$set=u=>{"clock"in u&&t(0,s=u.clock),"exit"in u&&t(1,r=u.exit),"starshipMode"in u&&t(2,i=u.starshipMode),"toggleStarshipMode"in u&&t(3,n=u.toggleStarshipMode),"resetScores"in u&&t(4,o=u.resetScores),"importScores"in u&&t(5,f=u.importScores),"scores"in u&&t(6,a=u.scores)},[s,r,i,n,o,f,a,c,d]}class Tr extends Ye{constructor(e){super(),Le(this,e,Rr,yr,Ne,{clock:0,exit:1,starshipMode:2,toggleStarshipMode:3,resetScores:4,importScores:5,scores:6})}}function Pt(l,e,t){const s=l.slice();return s[80]=e[t],s}function It(l,e,t){const s=l.slice();return s[83]=e[t],s}function Wt(l,e,t){const s=l.slice();return s[80]=e[t],s}function Nt(l,e,t){const s=l.slice();return s[83]=e[t],s}function Br(l){let e,t,s;var r=Ze.Preview;function i(n,o){return{}}return r&&(e=Me(r,i())),{c(){e&&O(e.$$.fragment),t=q()},l(n){e&&L(e.$$.fragment,n),t=q()},m(n,o){e&&D(e,n,o),k(n,t,o),s=!0},p(n,o){if(r!==(r=Ze.Preview)){if(e){$();const f=e;S(f.$$.fragment,1,0,()=>{P(f,1)}),J()}r?(e=Me(r,i()),O(e.$$.fragment),p(e.$$.fragment,1),D(e,t.parentNode,t)):e=null}},i(n){s||(e&&p(e.$$.fragment,n),s=!0)},o(n){e&&S(e.$$.fragment,n),s=!1},d(n){n&&_(t),e&&P(e,n)}}}function Yt(l){let e,t;return e=new Ps({props:{unlocked:l[30],scores:l[12],onClick:l[30]?void 0:l[64]}}),{c(){O(e.$$.fragment)},l(s){L(e.$$.fragment,s)},m(s,r){D(e,s,r),t=!0},p(s,r){const i={};r[0]&1073741824&&(i.unlocked=s[30]),r[0]&4096&&(i.scores=s[12]),r[0]&1073741952&&(i.onClick=s[30]?void 0:s[64]),e.$set(i)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Ar(l){let e,t;return e=new Oe({props:{href:l[83].slug,classes:"portal_preview--"+l[83].slug,$$slots:{default:[Hr]},$$scope:{ctx:l}}}),{c(){O(e.$$.fragment)},l(s){L(e.$$.fragment,s)},m(s,r){D(e,s,r),t=!0},p(s,r){const i={};r[2]&536870912&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Cr(l){let e,t;return e=new Qt({props:{onClick:l[51],classes:"portal_preview--starship"}}),{c(){O(e.$$.fragment)},l(s){L(e.$$.fragment,s)},m(s,r){D(e,s,r),t=!0},p:ce,i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Hr(l){let e,t,s;var r=l[83].Preview;function i(n,o){return{}}return r&&(e=Me(r,i())),{c(){e&&O(e.$$.fragment),t=q()},l(n){e&&L(e.$$.fragment,n),t=q()},m(n,o){e&&D(e,n,o),k(n,t,o),s=!0},p(n,o){if(r!==(r=n[83].Preview)){if(e){$();const f=e;S(f.$$.fragment,1,0,()=>{P(f,1)}),J()}r?(e=Me(r,i()),O(e.$$.fragment),p(e.$$.fragment,1),D(e,t.parentNode,t)):e=null}},i(n){s||(e&&p(e.$$.fragment,n),s=!0)},o(n){e&&S(e.$$.fragment,n),s=!1},d(n){n&&_(t),e&&P(e,n)}}}function Lt(l,e){let t,s,r,i,n;const o=[Cr,Ar],f=[];function a(c,d){return c[83]===c[40]?0:1}return s=a(e),r=f[s]=o[s](e),{key:l,first:null,c(){t=q(),r.c(),i=q(),this.h()},l(c){t=q(),r.l(c),i=q(),this.h()},h(){this.first=t},m(c,d){k(c,t,d),f[s].m(c,d),k(c,i,d),n=!0},p(c,d){e=c,r.p(e,d)},i(c){n||(p(r),n=!0)},o(c){S(r),n=!1},d(c){c&&(_(t),_(i)),f[s].d(c)}}}function Gt(l){let e,t=[],s=new Map,r,i=be(l[80]);const n=o=>o[83];for(let o=0;o<i.length;o+=1){let f=Nt(l,i,o),a=n(f);s.set(a,t[o]=Lt(a,f))}return{c(){e=T("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=B(o,"DIV",{class:!0});var f=U(e);for(let a=0;a<t.length;a+=1)t[a].l(f);f.forEach(_),this.h()},h(){M(e,"class","portals svelte-mtti39")},m(o,f){k(o,e,f);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null);r=!0},p(o,f){f[1]&1050112&&(i=be(o[80]),$(),t=ds(t,f,n,1,o,i,s,e,ws,Lt,null,Nt),J())},i(o){if(!r){for(let f=0;f<i.length;f+=1)p(t[f]);r=!0}},o(o){for(let f=0;f<t.length;f+=1)S(t[f]);r=!1},d(o){o&&_(e);for(let f=0;f<t.length;f+=1)t[f].d()}}}function Vt(l){let e,t;return e=new Oe({props:{classes:"show-more-button",onClick:l[65],$$slots:{default:[Ir]},$$scope:{ctx:l}}}),{c(){O(e.$$.fragment)},l(s){L(e.$$.fragment,s)},m(s,r){D(e,s,r),t=!0},p(s,r){const i={};r[0]&8192|r[1]&64|r[2]&536870912&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Mr(l){let e,t;return{c(){e=T("img"),this.h()},l(s){e=B(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){mt(e.src,t="/assets/earth/night_lights_3.png")||M(e,"src",t),M(e,"alt","night lights of Asia and Australia"),M(e,"class","night-light svelte-mtti39")},m(s,r){k(s,e,r)},d(s){s&&_(e)}}}function Or(l){let e,t;return{c(){e=T("img"),this.h()},l(s){e=B(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){mt(e.src,t="/assets/earth/night_lights_2.png")||M(e,"src",t),M(e,"alt","night lights of the Americas"),M(e,"class","night-light svelte-mtti39")},m(s,r){k(s,e,r)},d(s){s&&_(e)}}}function Dr(l){let e,t;return{c(){e=T("img"),this.h()},l(s){e=B(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){mt(e.src,t="/assets/earth/night_lights_1.png")||M(e,"src",t),M(e,"alt","night lights of Africa, Europe, and the Middle East"),M(e,"class","night-light svelte-mtti39")},m(s,r){k(s,e,r)},d(s){s&&_(e)}}}function Pr(l){let e;function t(i,n){return i[86]===0?Dr:i[86]===1?Or:Mr}let s=t(l),r=s(l);return{c(){r.c(),e=q()},l(i){r.l(i),e=q()},m(i,n){r.m(i,n),k(i,e,n)},p(i,n){s!==(s=t(i))&&(r.d(1),r=s(i),r&&(r.c(),r.m(e.parentNode,e)))},d(i){i&&_(e),r.d(i)}}}function Ir(l){let e,t,s;return e=new bs({props:{running:l[13]&&l[37].running,$$slots:{default:[Pr,({index:r})=>({86:r}),({index:r})=>[0,0,r?16777216:0]]},$$scope:{ctx:l}}}),{c(){t=T("div"),O(e.$$.fragment),this.h()},l(r){t=B(r,"DIV",{style:!0});var i=U(t);L(e.$$.fragment,i),this.h()},h(){_e(t,"display","contents"),_e(t,"--animation_duration","var(--duration_6)")},m(r,i){k(r,t,i),D(e,t,null),s=!0},p(r,i){const n={};i[0]&8192|i[1]&64&&(n.running=r[13]&&r[37].running),i[2]&553648128&&(n.$$scope={dirty:i,ctx:r}),e.$set(n)},i(r){s||(p(e.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),s=!1},d(r){r&&e&&_(t),P(e,r)}}}function Kt(l){let e,t,s=be(l[21]),r=[];for(let n=0;n<s.length;n+=1)r[n]=qt(Pt(l,s,n));const i=n=>S(r[n],1,1,()=>{r[n]=null});return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=q()},l(n){for(let o=0;o<r.length;o+=1)r[o].l(n);e=q()},m(n,o){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(n,o);k(n,e,o),t=!0},p(n,o){if(o[0]&2097152){s=be(n[21]);let f;for(f=0;f<s.length;f+=1){const a=Pt(n,s,f);r[f]?(r[f].p(a,o),p(r[f],1)):(r[f]=qt(a),r[f].c(),p(r[f],1),r[f].m(e.parentNode,e))}for($(),f=s.length;f<r.length;f+=1)i(f);J()}},i(n){if(!t){for(let o=0;o<s.length;o+=1)p(r[o]);t=!0}},o(n){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)S(r[o]);t=!1},d(n){n&&_(e),_t(r,n)}}}function Wr(l){let e,t,s;var r=l[83].Preview;function i(n,o){return{}}return r&&(e=Me(r,i())),{c(){e&&O(e.$$.fragment),t=q()},l(n){e&&L(e.$$.fragment,n),t=q()},m(n,o){e&&D(e,n,o),k(n,t,o),s=!0},p(n,o){if(o[0]&2097152&&r!==(r=n[83].Preview)){if(e){$();const f=e;S(f.$$.fragment,1,0,()=>{P(f,1)}),J()}r?(e=Me(r,i()),O(e.$$.fragment),p(e.$$.fragment,1),D(e,t.parentNode,t)):e=null}},i(n){s||(e&&p(e.$$.fragment,n),s=!0)},o(n){e&&S(e.$$.fragment,n),s=!1},d(n){n&&_(t),e&&P(e,n)}}}function zt(l){let e,t;return e=new Oe({props:{href:l[83].slug,classes:"portal_preview--"+l[83].slug,$$slots:{default:[Wr]},$$scope:{ctx:l}}}),{c(){O(e.$$.fragment)},l(s){L(e.$$.fragment,s)},m(s,r){D(e,s,r),t=!0},p(s,r){const i={};r[0]&2097152&&(i.href=s[83].slug),r[0]&2097152&&(i.classes="portal_preview--"+s[83].slug),r[0]&2097152|r[2]&536870912&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function qt(l){let e,t,s,r=be(l[80]),i=[];for(let o=0;o<r.length;o+=1)i[o]=zt(It(l,r,o));const n=o=>S(i[o],1,1,()=>{i[o]=null});return{c(){e=T("div");for(let o=0;o<i.length;o+=1)i[o].c();t=G(),this.h()},l(o){e=B(o,"DIV",{class:!0});var f=U(e);for(let a=0;a<i.length;a+=1)i[a].l(f);t=V(f),f.forEach(_),this.h()},h(){M(e,"class","portals strength-portals svelte-mtti39")},m(o,f){k(o,e,f);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);z(e,t),s=!0},p(o,f){if(f[0]&2097152){r=be(o[80]);let a;for(a=0;a<r.length;a+=1){const c=It(o,r,a);i[a]?(i[a].p(c,f),p(i[a],1)):(i[a]=zt(c),i[a].c(),p(i[a],1),i[a].m(e,t))}for($(),a=r.length;a<i.length;a+=1)n(a);J()}},i(o){if(!s){for(let f=0;f<r.length;f+=1)p(i[f]);s=!0}},o(o){i=i.filter(Boolean);for(let f=0;f<i.length;f+=1)S(i[f]);s=!1},d(o){o&&_(e),_t(i,o)}}}function Ut(l){let e,t,s;return t=new Oe({props:{onClick:l[46],$$slots:{default:[Nr]},$$scope:{ctx:l}}}),{c(){e=T("div"),O(t.$$.fragment),this.h()},l(r){e=B(r,"DIV",{class:!0});var i=U(e);L(t.$$.fragment,i),i.forEach(_),this.h()},h(){M(e,"class","portals svelte-mtti39")},m(r,i){k(r,e,i),D(t,e,null),s=!0},p(r,i){const n={};i[0]&536870912|i[2]&536870912&&(n.$$scope={dirty:i,ctx:r}),t.$set(n)},i(r){s||(p(t.$$.fragment,r),s=!0)},o(r){S(t.$$.fragment,r),s=!1},d(r){r&&_(e),P(t)}}}function Nr(l){let e,t;return{c(){e=T("span"),t=fe(et),this.h()},l(s){e=B(s,"SPAN",{class:!0});var r=U(e);t=ae(r,et),r.forEach(_),this.h()},h(){M(e,"class","booster svelte-mtti39"),we(e,"disabled",!l[29])},m(s,r){k(s,e,r),z(e,t)},p(s,r){r[0]&536870912&&we(e,"disabled",!s[29])},d(s){s&&_(e)}}}function Xt(l){let e,t,s,r,i,n,o,f;function a(w){l[67](w)}function c(w){l[68](w)}function d(w){l[69](w)}function u(w){l[70](w)}let v={viewportWidth:l[19],viewportHeight:l[15],viewWidth:l[3],viewHeight:l[4],worldWidth:l[5],worldHeight:l[6],speedBoosterEnabled:l[29],strengthBoosterEnabled:l[28],strengthBooster1Enabled:l[0],strengthBooster2Enabled:l[1],strengthBooster3Enabled:l[2],cameraUnlocked:l[16],stage:l[11],finish:l[43],enableDomCanvasRenderer:l[33]};l[8]!==void 0&&(v.starshipX=l[8]),l[9]!==void 0&&(v.starshipY=l[9]),l[10]!==void 0&&(v.starshipAngle=l[10]),l[22]!==void 0&&(v.starshipShieldRadius=l[22]),e=new _r({props:v}),Ue.push(()=>Fe(e,"starshipX",a)),Ue.push(()=>Fe(e,"starshipY",c)),Ue.push(()=>Fe(e,"starshipAngle",d)),Ue.push(()=>Fe(e,"starshipShieldRadius",u));let y=l[23]&&Ft(l);return{c(){O(e.$$.fragment),n=G(),y&&y.c(),o=q()},l(w){L(e.$$.fragment,w),n=V(w),y&&y.l(w),o=q()},m(w,R){D(e,w,R),k(w,n,R),y&&y.m(w,R),k(w,o,R),f=!0},p(w,R){const E={};R[0]&524288&&(E.viewportWidth=w[19]),R[0]&32768&&(E.viewportHeight=w[15]),R[0]&8&&(E.viewWidth=w[3]),R[0]&16&&(E.viewHeight=w[4]),R[0]&32&&(E.worldWidth=w[5]),R[0]&64&&(E.worldHeight=w[6]),R[0]&536870912&&(E.speedBoosterEnabled=w[29]),R[0]&268435456&&(E.strengthBoosterEnabled=w[28]),R[0]&1&&(E.strengthBooster1Enabled=w[0]),R[0]&2&&(E.strengthBooster2Enabled=w[1]),R[0]&4&&(E.strengthBooster3Enabled=w[2]),R[0]&65536&&(E.cameraUnlocked=w[16]),R[0]&2048&&(E.stage=w[11]),R[1]&4&&(E.enableDomCanvasRenderer=w[33]),!t&&R[0]&256&&(t=!0,E.starshipX=w[8],Xe(()=>t=!1)),!s&&R[0]&512&&(s=!0,E.starshipY=w[9],Xe(()=>s=!1)),!r&&R[0]&1024&&(r=!0,E.starshipAngle=w[10],Xe(()=>r=!1)),!i&&R[0]&4194304&&(i=!0,E.starshipShieldRadius=w[22],Xe(()=>i=!1)),e.$set(E),w[23]?y?(y.p(w,R),R[0]&8388608&&p(y,1)):(y=Ft(w),y.c(),p(y,1),y.m(o.parentNode,o)):y&&($(),S(y,1,1,()=>{y=null}),J())},i(w){f||(p(e.$$.fragment,w),p(y),f=!0)},o(w){S(e.$$.fragment,w),S(y),f=!1},d(w){w&&(_(n),_(o)),P(e,w),y&&y.d(w)}}}function Ft(l){let e,t,s,r,i;return t=new xs({props:{label:"return home",style:"font-size: var(--size_xl9)",$$slots:{default:[Gr]},$$scope:{ctx:l}}}),t.$on("click",l[71]),r=new Zt({props:{scores:l[31]&&l[36]}}),{c(){e=T("div"),O(t.$$.fragment),s=G(),O(r.$$.fragment),this.h()},l(n){e=B(n,"DIV",{class:!0});var o=U(e);L(t.$$.fragment,o),s=V(o),L(r.$$.fragment,o),o.forEach(_),this.h()},h(){M(e,"class","exit svelte-mtti39")},m(n,o){k(n,e,o),D(t,e,null),z(e,s),D(r,e,null),i=!0},p(n,o){const f={};o[1]&32|o[2]&536870912&&(f.$$scope={dirty:o,ctx:n}),t.$set(f);const a={};o[1]&33&&(a.scores=n[31]&&n[36]),r.$set(a)},i(n){i||(p(t.$$.fragment,n),p(r.$$.fragment,n),i=!0)},o(n){S(t.$$.fragment,n),S(r.$$.fragment,n),i=!1},d(n){n&&_(e),P(t),P(r)}}}function Yr(l){let e;return{c(){e=fe("↩")},l(t){e=ae(t,"↩")},m(t,s){k(t,e,s)},p:ce,d(t){t&&_(e)}}}function Lr(l){let e;return{c(){e=fe(et)},l(t){e=ae(t,et)},m(t,s){k(t,e,s)},p:ce,d(t){t&&_(e)}}}function Gr(l){let e,t;function s(n,o){return o[1]&32&&(e=null),e==null&&(e=!!(n[36]&&ht(n[36]))),e?Lr:Yr}let r=s(l,[-1,-1,-1]),i=r(l);return{c(){i.c(),t=q()},l(n){i.l(n),t=q()},m(n,o){i.m(n,o),k(n,t,o)},p(n,o){r===(r=s(n,o))&&i?i.p(n,o):(i.d(1),i=r(n),i&&(i.c(),i.m(t.parentNode,t)))},d(n){n&&_(t),i.d(n)}}}function Vr(l){let e,t;return e=new Tr({props:{clock:l[39],exit:l[79],starshipMode:l[7],toggleStarshipMode:l[50],scores:l[12],resetScores:l[12]?l[44]:void 0,importScores:l[45]}}),{c(){O(e.$$.fragment)},l(s){L(e.$$.fragment,s)},m(s,r){D(e,s,r),t=!0},p(s,r){const i={};r[2]&131072&&(i.exit=s[79]),r[0]&128&&(i.starshipMode=s[7]),r[0]&4096&&(i.scores=s[12]),r[0]&4096&&(i.resetScores=s[12]?s[44]:void 0),e.$set(i)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Kr(l){let e,t,s,r,i,n,o,f,a,c,d,u,v,y,w,R;r=new Oe({props:{href:Ze.slug,classes:"portal_preview--"+Ze.slug,$$slots:{default:[Br]},$$scope:{ctx:l}}});let E=l[12]&&Yt(l),F=be(l[41]),A=[];for(let h=0;h<F.length;h+=1)A[h]=Gt(Wt(l,F,h));const te=h=>S(A[h],1,1,()=>{A[h]=null});let I=l[17]&&Vt(l),C=l[13]&&Kt(l),W=l[18]&&Ut(l),Y=l[11]&&Xt(l);return v=new tr({props:{$$slots:{default:[Vr,({exit:h})=>({79:h}),({exit:h})=>[0,0,h?131072:0]]},$$scope:{ctx:l}}}),{c(){e=T("div"),t=T("nav"),s=T("header"),O(r.$$.fragment),i=G(),E&&E.c(),n=G();for(let h=0;h<A.length;h+=1)A[h].c();o=G(),I&&I.c(),f=G(),C&&C.c(),a=G(),W&&W.c(),d=G(),Y&&Y.c(),u=G(),O(v.$$.fragment),this.h()},l(h){e=B(h,"DIV",{class:!0});var g=U(e);t=B(g,"NAV",{class:!0});var N=U(t);s=B(N,"HEADER",{class:!0});var se=U(s);L(r.$$.fragment,se),se.forEach(_),i=V(N),E&&E.l(N),n=V(N);for(let H=0;H<A.length;H+=1)A[H].l(N);o=V(N),I&&I.l(N),f=V(N),C&&C.l(N),a=V(N),W&&W.l(N),N.forEach(_),d=V(g),Y&&Y.l(g),g.forEach(_),u=V(h),L(v.$$.fragment,h),this.h()},h(){M(s,"class","portals svelte-mtti39"),M(t,"class","svelte-mtti39"),$t(()=>l[66].call(t)),_e(t,"transform",l[7]?`translate3d(${l[26]}px, ${l[25]}px,	0) scale3d(${l[27]}, ${l[27]}, ${l[27]})	rotate(${l[32]}rad)`:"none"),_e(t,"transition",l[35]?"none":`transform ${l[24]}ms ease-in-out`),M(e,"class","home svelte-mtti39"),we(e,"starship-mode",l[7]),we(e,"starship-ready",l[35]),we(e,"starship-transitioning",l[20])},m(h,g){k(h,e,g),z(e,t),z(t,s),D(r,s,null),z(t,i),E&&E.m(t,null),z(t,n);for(let N=0;N<A.length;N+=1)A[N]&&A[N].m(t,null);z(t,o),I&&I.m(t,null),z(t,f),C&&C.m(t,null),z(t,a),W&&W.m(t,null),c=ps(t,l[66].bind(t)),z(e,d),Y&&Y.m(e,null),k(h,u,g),D(v,h,g),y=!0,w||(R=tt(window,"keydown",l[52]),w=!0)},p(h,g){const N={};if(g[2]&536870912&&(N.$$scope={dirty:g,ctx:h}),r.$set(N),h[12]?E?(E.p(h,g),g[0]&4096&&p(E,1)):(E=Yt(h),E.c(),p(E,1),E.m(t,n)):E&&($(),S(E,1,1,()=>{E=null}),J()),g[1]&1050112){F=be(h[41]);let H;for(H=0;H<F.length;H+=1){const j=Wt(h,F,H);A[H]?(A[H].p(j,g),p(A[H],1)):(A[H]=Gt(j),A[H].c(),p(A[H],1),A[H].m(t,o))}for($(),H=F.length;H<A.length;H+=1)te(H);J()}h[17]?I?(I.p(h,g),g[0]&131072&&p(I,1)):(I=Vt(h),I.c(),p(I,1),I.m(t,f)):I&&($(),S(I,1,1,()=>{I=null}),J()),h[13]?C?(C.p(h,g),g[0]&8192&&p(C,1)):(C=Kt(h),C.c(),p(C,1),C.m(t,a)):C&&($(),S(C,1,1,()=>{C=null}),J()),h[18]?W?(W.p(h,g),g[0]&262144&&p(W,1)):(W=Ut(h),W.c(),p(W,1),W.m(t,null)):W&&($(),S(W,1,1,()=>{W=null}),J()),g[0]&234881152|g[1]&2&&_e(t,"transform",h[7]?`translate3d(${h[26]}px, ${h[25]}px,	0) scale3d(${h[27]}, ${h[27]}, ${h[27]})	rotate(${h[32]}rad)`:"none"),g[0]&16777216|g[1]&16&&_e(t,"transition",h[35]?"none":`transform ${h[24]}ms ease-in-out`),h[11]?Y?(Y.p(h,g),g[0]&2048&&p(Y,1)):(Y=Xt(h),Y.c(),p(Y,1),Y.m(e,null)):Y&&($(),S(Y,1,1,()=>{Y=null}),J()),(!y||g[0]&128)&&we(e,"starship-mode",h[7]),(!y||g[1]&16)&&we(e,"starship-ready",h[35]),(!y||g[0]&1048576)&&we(e,"starship-transitioning",h[20]);const se={};g[0]&4224|g[2]&537001984&&(se.$$scope={dirty:g,ctx:h}),v.$set(se)},i(h){if(!y){p(r.$$.fragment,h),p(E);for(let g=0;g<F.length;g+=1)p(A[g]);p(I),p(C),p(W),p(Y),p(v.$$.fragment,h),y=!0}},o(h){S(r.$$.fragment,h),S(E),A=A.filter(Boolean);for(let g=0;g<A.length;g+=1)S(A[g]);S(I),S(C),S(W),S(Y),S(v.$$.fragment,h),y=!1},d(h){h&&(_(e),_(u)),P(r),E&&E.d(),_t(A,h),I&&I.d(),C&&C.d(),W&&W.d(),c(),Y&&Y.d(),P(v,h),w=!1,R()}}}const jt=500,ft="cpg_home_scores",at="cpg_speed_booster_toggled",et="🙌",ct="cpg_strength_booster_toggled";function zr(l,e,t){let s,r,i,n,o,f,a,c,d,u,v,y,w,R,E,F,A,te,I,C,W,Y,h,g,N=ce,se=()=>(N(),N=ut(v,m=>t(36,g=m)),v),H,j,ue=ce,K=()=>(ue(),ue=ut(a,m=>t(61,j=m)),a),Ee,ye,Ge;ve(l,je,m=>t(73,H=m)),l.$$.on_destroy.push(()=>N()),l.$$.on_destroy.push(()=>ue());const Ve=Ss();ve(l,Ve,m=>t(63,ye=m));const me=st();ve(l,me,m=>t(37,Ge=m));let Re=He(Et,!1),b=He(yt,!1),x=He(Rt,!1);const re={width:2560,height:1440};let ee,le,pe,ke;const pt=Symbol(),es=[[Is],[Ws],[Ns,Ys,Ls],[pt,Gs,Vs]];let gt;const dt=js();ve(l,dt,m=>t(62,Ee=m));let Ke=0,ie=!1,ne=0,De=0,Pe=0,Te=0,rt=0,Q=null;const ts=()=>{t(11,Q=new qs({exit:m=>console.log("exited stage",m),worldWidth:pe,worldHeight:ke,viewWidth:ee,viewHeight:le,viewportWidth:s,viewportHeight:r,data:{freezeCamera:!C}})),X||(Be=Us(Q),ze(Be))},ss=()=>{Q&&(Q.destroy(),t(11,Q=null))};let X=(()=>He(ft,void 0,m=>{if(!m||typeof m.crew_rescued_at_once_count!="number"||isNaN(m.crew_rescued_at_once_count)||!Array.isArray(m.crew)||!m.crew.every(Z=>typeof Z=="boolean"))throw Error()}))(),Be;const ze=m=>ks(m,X)?!1:(he(ft,m),t(12,X=m),!0);let Ie=!1;const wt=async m=>{if(Ie)return;if(!m)return We();t(23,Ie=!0);const Z=Ks(m,X);ze(Z)&&(!y&&ht(Z)&&bt(),!R&&Tt(Z)&&await it())},lt=()=>{confirm("delete all scores?")&&(he(ft,void 0),t(12,X=void 0),he(at,!1),t(55,Ae=!1),he(ct,!1),t(13,Se=!1),he(Et,!1),t(0,Re=!1),he(yt,!1),t(1,b=!1),he(Rt,!1),t(2,x=!1))},rs=()=>{var Z;const m=(Z=prompt("import scores",X?JSON.stringify(X):Be?JSON.stringify(Be):void 0))==null?void 0:Z.trim();if(m==="")Be?ze(Be):lt();else try{const ge=m===void 0?void 0:zs(m);ge&&ze(ge)}catch(ge){alert("failed to parse scores: "+ge)}};let Ae=He(at,!1);const bt=()=>{t(55,Ae=!Ae)};let Se=He(ct,!1);const it=async()=>{t(13,Se=!Se),Se&&await sr()};let Ce;const qe=async()=>{ie||(console.log("enterStarshipMode"),t(23,Ie=!1),t(10,Te=0),t(7,ie=!0),me.pause(),me.reset(),ot(je,H=!1,H),t(54,ne++,ne),await xe(n+50),t(54,ne--,ne))},We=async()=>{ie&&(console.log("exitStarshipMode"),t(10,Te=0),t(7,ie=!1),me.resume(),ot(je,H=!1,H),t(54,ne++,ne),await xe(n+50),t(54,ne--,ne),t(53,Ke++,Ke))},kt=()=>ie?We():qe(),ls=()=>ot(je,H=!0,H),is=async m=>{m.key===" "&&!m.ctrlKey&&vt(m.currentTarget)?(de(m),await kt()):m.key==="r"&&!m.ctrlKey&&vt(m.currentTarget)?(de(m),We(),await gs(),await qe()):m.key==="F2"?(de(m),m.ctrlKey?(lt(),t(23,Ie=!1)):ie&&(me.pause(),g&&await wt(g))):m.key==="1"&&m.ctrlKey?(de(m),await Je($e("Spacey Intro"))):m.key==="2"&&m.ctrlKey?(de(m),await Je($e("Spacey Outro"))):m.key==="3"&&m.ctrlKey?(de(m),await Je($e("Futuristic 4"))):m.key==="4"&&m.ctrlKey&&(de(m),await Je($e("Futuristic 1")))},ns=async()=>{ie||await qe()},os=()=>void it();function fs(){Ce=this.clientHeight,t(14,Ce)}function as(m){De=m,t(8,De)}function cs(m){Pe=m,t(9,Pe)}function us(m){Te=m,t(10,Te)}function hs(m){rt=m,t(22,rt)}const _s=()=>We();return l.$$.update=()=>{if(l.$$.dirty[2]&2&&t(19,{width:s,height:r}=ye,s,(t(15,r),t(63,ye))),l.$$.dirty[0]&4096&&t(58,w=!!X&&Cs(X)),l.$$.dirty[1]&134217728&&t(16,C=w),l.$$.dirty[0]&622712)if(C){t(3,ee=s),t(4,le=r);const m=re.width,Z=re.height,ge=m/ee,nt=Z/le;nt>1&&nt>ge?(t(6,ke=Z),t(5,pe=ee*nt|0)):ge>1?(t(5,pe=m),t(6,ke=le*ge|0)):(t(5,pe=ee),t(6,ke=le))}else{t(5,pe=re.width),t(6,ke=re.height);const m=pe/ke,Z=s/r;t(3,ee=s*Math.min(1,m/Z)|0),t(4,le=r*Math.min(1,Z/m)|0)}l.$$.dirty[0]&40&&t(56,i=ee/pe),l.$$.dirty[0]&7&&t(21,gt=[[...b?[nr]:Qe,...Re?[Hs]:Qe,Ms,...Re?[Os]:Qe,...x?[cr]:Qe]]),l.$$.dirty[0]&4096|l.$$.dirty[1]&4194304&&t(24,n=X||Ke>1?jt:jt*1),l.$$.dirty[1]&8388608&&t(20,o=ne>0),l.$$.dirty[0]&1048704&&t(35,f=ie&&!o),l.$$.dirty[0]&128&&(ss(),ie&&ts()),l.$$.dirty[0]&2048&&K(t(34,a=Q==null?void 0:Q.camera)),l.$$.dirty[0]&2048&&t(57,c=Q==null?void 0:Q.player),l.$$.dirty[2]&1&&t(33,d=Ee.dev_mode),l.$$.dirty[0]&1024&&t(32,u=Te+Math.PI/2),l.$$.dirty[0]&2048&&se(t(31,v=Q==null?void 0:Q.scores)),l.$$.dirty[0]&4096&&t(60,y=!!X&&ht(X)),l.$$.dirty[0]&4096&&t(59,R=!!X&&Tt(X)),l.$$.dirty[0]&4096&&t(30,E=!!X&&Ds(X)),l.$$.dirty[1]&16777216&&he(at,!!Ae),l.$$.dirty[1]&536870912&&t(18,F=y),l.$$.dirty[0]&262144|l.$$.dirty[1]&16777216&&t(29,A=F&&Ae),l.$$.dirty[0]&8192&&he(ct,!!Se),l.$$.dirty[1]&268435456&&t(17,te=R),l.$$.dirty[0]&139264&&t(28,I=te&&Se),l.$$.dirty[0]&16384|l.$$.dirty[1]&100663296&&t(27,W=c?c.radius*2/Ce*i:1),l.$$.dirty[0]&256|l.$$.dirty[1]&1107296256&&t(26,Y=(j?(De-j.x)*j.scale:De)*i),l.$$.dirty[0]&49664|l.$$.dirty[1]&1107296256&&t(25,h=j?(Pe-j.y)*j.scale*i-(Ce-r)/2:Pe-(Ce-r)/2)},[Re,b,x,ee,le,pe,ke,ie,De,Pe,Te,Q,X,Se,Ce,r,C,te,F,s,o,gt,rt,Ie,n,h,Y,W,I,A,E,v,u,d,a,f,g,Ge,Ve,me,pt,es,dt,wt,lt,rs,bt,it,qe,We,kt,ls,is,Ke,ne,Ae,i,c,w,R,y,j,Ee,ye,ns,os,fs,as,cs,us,hs,_s]}class wl extends Ye{constructor(e){super(),Le(this,e,zr,Kr,Ne,{},null,[-1,-1,-1])}}export{wl as component};
