import{n as me,r as J,i as v,d as g,e as D,b as N,l as P,m as I,a as oe,s as Y,c as F,_ as ke,o as G,J as Ae,L as $e,x as ue,y as _e,p as j,g as Pe}from"../chunks/scheduler.B6ZHjePS.js";import{S as he,i as pe,t as b,g as ce,b as S,e as fe,c as T,a as A,m as M,d as x}from"../chunks/index.D8p8-7y1.js";import{r as we,a as ae}from"../chunks/random.BCioE_zI.js";import{s as Ue}from"../chunks/index.Bk6vPN_s.js";import{b as Ve}from"../chunks/paths.EQKQZW1e.js";import{g as Re}from"../chunks/clock.CjzioAVG.js";import{g as Xe}from"../chunks/dimensions.DSxfro0U.js";import{g as Ye,C as Fe,S as ze,a as qe}from"../chunks/pixi.CGO4fLu2.js";import{W as Be}from"../chunks/WaitingScreen.DhOBv2F3.js";import{A as Ge}from"../chunks/WaitingAnimation.zU7L1Y5H.js";import{e as be,u as He,d as Je}from"../chunks/each.DSKrv-cI.js";import{F as ve}from"../chunks/FloatingTextButton.DhlFThLJ.js";import{s as O}from"../chunks/images.BCEEXbqT.js";import{I as Ke}from"../chunks/ImageCreditsCaption.YFgVdFhB.js";import{S as We}from"../chunks/Surface2.xXv81Y_l.js";import{P as Me}from"../chunks/Panel.DGbDyyrq.js";import{P as je}from"../chunks/Preview.BoLhZVZB.js";import{P as Qe}from"../chunks/PortalPreview.DjcbpV0W.js";function Ie(i){let e,t;return e=new Be({props:{status:i[0]}}),{c(){T(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,s){M(e,r,s),t=!0},p(r,s){const a={};s&1&&(a.status=r[0]),e.$set(a)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){x(e,r)}}}function Ze(i){let e,t,r=i[0]!=="success"&&Ie(i);return{c(){r&&r.c(),e=J()},l(s){r&&r.l(s),e=J()},m(s,a){r&&r.m(s,a),v(s,e,a),t=!0},p(s,[a]){s[0]!=="success"?r?(r.p(s,a),a&1&&b(r,1)):(r=Ie(s),r.c(),b(r,1),r.m(e.parentNode,e)):r&&(ce(),S(r,1,1,()=>{r=null}),fe())},i(s){t||(b(r),t=!0)},o(s){S(r),t=!1},d(s){s&&g(e),r&&r.d(s)}}}function et(i,e,t){let{cameraX:r}=e,{cameraY:s}=e,{cameraScale:a}=e,{imageUrl:n}=e,l=null,c=!1;const{scene:m}=Ye({loaded:async()=>{c||await p(n)},destroy:()=>{k(),c=!0}}),f=new Fe;m.addChild(f);const p=async u=>{const y=await Ge.load(u);l&&l.texture===y||$(y)},$=u=>{l&&k(),u.baseTexture.setStyle(ze.LINEAR),t(5,l=new qe(u)),f.addChild(l)},k=()=>{l&&(f.removeChild(l),l.destroy(),t(5,l=null))},U=(u,y,w,C)=>{u.scale.set(C),u.position.set(y,w)};let z;return i.$$set=u=>{"cameraX"in u&&t(1,r=u.cameraX),"cameraY"in u&&t(2,s=u.cameraY),"cameraScale"in u&&t(3,a=u.cameraScale),"imageUrl"in u&&t(4,n=u.imageUrl)},i.$$.update=()=>{i.$$.dirty&16&&p(n),i.$$.dirty&14&&U(f,r,s,a),i.$$.dirty&32&&t(0,z=l?"success":"pending")},[z,r,s,a,n,l]}class tt extends he{constructor(e){super(),pe(this,e,et,Ze,me,{cameraX:1,cameraY:2,cameraScale:3,imageUrl:4})}}function Se(i,e,t){const r=i.slice();return r[3]=e[t],r}function ye(i,e){let t,r,s,a,n,l,c,m,f;function p(){return e[2](e[3])}return{key:i,first:null,c(){t=D("button"),r=D("img"),c=Y(),this.h()},l($){t=N($,"BUTTON",{class:!0});var k=P(t);r=N(k,"IMG",{src:!0,alt:!0,width:!0,height:!0}),c=F(k),k.forEach(g),this.h()},h(){ke(r.src,s=e[3].thumbnail.url)||I(r,"src",s),I(r,"alt",a=e[3].title),I(r,"width",n=e[3].thumbnail.width),I(r,"height",l=e[3].thumbnail.height),I(t,"class","svelte-9g8csx"),this.first=t},m($,k){v($,t,k),G(t,r),G(t,c),m||(f=Ae(t,"click",p),m=!0)},p($,k){e=$,k&1&&!ke(r.src,s=e[3].thumbnail.url)&&I(r,"src",s),k&1&&a!==(a=e[3].title)&&I(r,"alt",a),k&1&&n!==(n=e[3].thumbnail.width)&&I(r,"width",n),k&1&&l!==(l=e[3].thumbnail.height)&&I(r,"height",l)},d($){$&&g(t),m=!1,f()}}}function rt(i){let e,t=[],r=new Map,s=be(i[0]);const a=n=>n[3].info.url;for(let n=0;n<s.length;n+=1){let l=Se(i,s,n),c=a(l);r.set(c,t[n]=ye(c,l))}return{c(){e=D("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=N(n,"DIV",{class:!0});var l=P(e);for(let c=0;c<t.length;c+=1)t[c].l(l);l.forEach(g),this.h()},h(){I(e,"class","image-picker svelte-9g8csx")},m(n,l){v(n,e,l);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null)},p(n,[l]){l&3&&(s=be(n[0]),t=He(t,l,a,1,n,s,r,e,Je,ye,null,Se))},i:oe,o:oe,d(n){n&&g(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function st(i,e,t){let{images:r}=e,{pick_image:s}=e;const a=n=>s(n);return i.$$set=n=>{"images"in n&&t(0,r=n.images),"pick_image"in n&&t(1,s=n.pick_image)},[r,s,a]}class at extends he{constructor(e){super(),pe(this,e,st,rt,me,{images:0,pick_image:1})}}function Ee(i){let e;return{c(){e=D("div"),this.h()},l(t){e=N(t,"DIV",{class:!0}),P(e).forEach(g),this.h()},h(){I(e,"class","overlay-bg svelte-di1xx3")},m(t,r){v(t,e,r)},d(t){t&&g(e)}}}function nt(i){let e,t,r;return t=new We({props:{width:i[0],height:i[1],scale:i[4],zoom:i[12],pan:i[13]}}),{c(){e=D("div"),T(t.$$.fragment),this.h()},l(s){e=N(s,"DIV",{class:!0,style:!0});var a=P(e);A(t.$$.fragment,a),a.forEach(g),this.h()},h(){I(e,"class","interaction-surface-wrapper svelte-di1xx3"),j(e,"width",i[0]+"px"),j(e,"height",i[1]+"px")},m(s,a){v(s,e,a),M(t,e,null),r=!0},p(s,a){const n={};a[0]&1&&(n.width=s[0]),a[0]&2&&(n.height=s[1]),a[0]&16&&(n.scale=s[4]),t.$set(n),(!r||a[0]&1)&&j(e,"width",s[0]+"px"),(!r||a[0]&2)&&j(e,"height",s[1]+"px")},i(s){r||(b(t.$$.fragment,s),r=!0)},o(s){S(t.$$.fragment,s),r=!1},d(s){s&&g(e),x(t)}}}function it(i){let e,t,r,s,a,n,l,c;return t=new at({props:{images:O,pick_image:i[9]}}),a=new Me({props:{$$slots:{default:[lt]},$$scope:{ctx:i}}}),l=new Qe({props:{href:Ve+"/about",$$slots:{default:[ot]},$$scope:{ctx:i}}}),{c(){e=D("div"),T(t.$$.fragment),r=Y(),s=D("footer"),T(a.$$.fragment),n=Y(),T(l.$$.fragment),this.h()},l(m){e=N(m,"DIV",{class:!0});var f=P(e);A(t.$$.fragment,f),r=F(f),s=N(f,"FOOTER",{class:!0});var p=P(s);A(a.$$.fragment,p),n=F(p),A(l.$$.fragment,p),p.forEach(g),f.forEach(g),this.h()},h(){I(s,"class","svelte-di1xx3"),I(e,"class","overlay svelte-di1xx3")},m(m,f){v(m,e,f),M(t,e,null),G(e,r),G(e,s),M(a,s,null),G(s,n),M(l,s,null),c=!0},p(m,f){const p={};f[1]&4&&(p.$$scope={dirty:f,ctx:m}),a.$set(p);const $={};f[1]&4&&($.$$scope={dirty:f,ctx:m}),l.$set($)},i(m){c||(b(t.$$.fragment,m),b(a.$$.fragment,m),b(l.$$.fragment,m),c=!0)},o(m){S(t.$$.fragment,m),S(a.$$.fragment,m),S(l.$$.fragment,m),c=!1},d(m){m&&g(e),x(t),x(a),x(l)}}}function lt(i){let e,t='<a href="https://www.spacetelescope.org/copyright/">spacetelescope.org/copyright</a>';return{c(){e=D("div"),e.innerHTML=t,this.h()},l(r){e=N(r,"DIV",{"data-svelte-h":!0}),Pe(e)!=="svelte-e46x49"&&(e.innerHTML=t),this.h()},h(){j(e,"font-size","var(--size_lg)")},m(r,s){v(r,e,s)},p:oe,d(r){r&&g(e)}}}function ot(i){let e,t;return e=new je({}),{c(){T(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,s){M(e,r,s),t=!0},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){x(e,r)}}}function ct(i){let e;return{c(){e=ue("random image")},l(t){e=_e(t,"random image")},m(t,r){v(t,e,r)},d(t){t&&g(e)}}}function ft(i){let e;return{c(){e=ue("pick an image")},l(t){e=_e(t,"pick an image")},m(t,r){v(t,e,r)},d(t){t&&g(e)}}}function mt(i){let e;return{c(){e=ue("close image picker")},l(t){e=_e(t,"close image picker")},m(t,r){v(t,e,r)},d(t){t&&g(e)}}}function ut(i){let e;function t(a,n){return a[2]?mt:ft}let r=t(i),s=r(i);return{c(){s.c(),e=J()},l(a){s.l(a),e=J()},m(a,n){s.m(a,n),v(a,e,n)},p(a,n){r!==(r=t(a))&&(s.d(1),s=r(a),s&&(s.c(),s.m(e.parentNode,e)))},d(a){a&&g(e),s.d(a)}}}function Ce(i){let e,t,r,s;return r=new Me({props:{$$slots:{default:[_t]},$$scope:{ctx:i}}}),{c(){e=D("div"),t=D("div"),T(r.$$.fragment),this.h()},l(a){e=N(a,"DIV",{class:!0});var n=P(e);t=N(n,"DIV",{class:!0});var l=P(t);A(r.$$.fragment,l),l.forEach(g),n.forEach(g),this.h()},h(){I(t,"class","width_md"),I(e,"class","credits idle_fade prose svelte-di1xx3")},m(a,n){v(a,e,n),G(e,t),M(r,t,null),s=!0},p(a,n){const l={};n[0]&8|n[1]&4&&(l.$$scope={dirty:n,ctx:a}),r.$set(l)},i(a){s||(b(r.$$.fragment,a),s=!0)},o(a){S(r.$$.fragment,a),s=!1},d(a){a&&g(e),x(r)}}}function _t(i){let e,t;return e=new Ke({props:{image:i[3]}}),{c(){T(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,s){M(e,r,s),t=!0},p(r,s){const a={};s[0]&8&&(a.image=r[3]),e.$set(a)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){S(e.$$.fragment,r),t=!1},d(r){x(e,r)}}}function ht(i){let e,t,r,s,a,n,l,c,m,f,p,$,k,U,z,u=i[2]&&Ee();t=new tt({props:{cameraX:i[6],cameraY:i[5],cameraScale:i[4],imageUrl:i[3].info.url}});const y=[it,nt],w=[];function C(o,_){return o[2]?0:1}s=C(i),a=w[s]=y[s](i),c=new ve({props:{$$slots:{default:[ct]},$$scope:{ctx:i}}}),c.$on("click",i[10]),f=new ve({props:{$$slots:{default:[ut]},$$scope:{ctx:i}}}),f.$on("click",i[18]);let d=!i[2]&&Ce(i);return{c(){u&&u.c(),e=Y(),T(t.$$.fragment),r=Y(),a.c(),n=Y(),l=D("div"),T(c.$$.fragment),m=Y(),T(f.$$.fragment),p=Y(),d&&d.c(),$=J(),this.h()},l(o){u&&u.l(o),e=F(o),A(t.$$.fragment,o),r=F(o),a.l(o),n=F(o),l=N(o,"DIV",{class:!0});var _=P(l);A(c.$$.fragment,_),m=F(_),A(f.$$.fragment,_),_.forEach(g),p=F(o),d&&d.l(o),$=J(),this.h()},h(){I(l,"class","hud idle_fade svelte-di1xx3")},m(o,_){u&&u.m(o,_),v(o,e,_),M(t,o,_),v(o,r,_),w[s].m(o,_),v(o,n,_),v(o,l,_),M(c,l,null),G(l,m),M(f,l,null),v(o,p,_),d&&d.m(o,_),v(o,$,_),k=!0,U||(z=Ae(window,"keydown",i[11],!0),U=!0)},p(o,_){o[2]?u||(u=Ee(),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null);const L={};_[0]&64&&(L.cameraX=o[6]),_[0]&32&&(L.cameraY=o[5]),_[0]&16&&(L.cameraScale=o[4]),_[0]&8&&(L.imageUrl=o[3].info.url),t.$set(L);let V=s;s=C(o),s===V?w[s].p(o,_):(ce(),S(w[V],1,1,()=>{w[V]=null}),fe(),a=w[s],a?a.p(o,_):(a=w[s]=y[s](o),a.c()),b(a,1),a.m(n.parentNode,n));const q={};_[1]&4&&(q.$$scope={dirty:_,ctx:o}),c.$set(q);const R={};_[0]&4|_[1]&4&&(R.$$scope={dirty:_,ctx:o}),f.$set(R),o[2]?d&&(ce(),S(d,1,1,()=>{d=null}),fe()):d?(d.p(o,_),_[0]&4&&b(d,1)):(d=Ce(o),d.c(),b(d,1),d.m($.parentNode,$))},i(o){k||(b(t.$$.fragment,o),b(a),b(c.$$.fragment,o),b(f.$$.fragment,o),b(d),k=!0)},o(o){S(t.$$.fragment,o),S(a),S(c.$$.fragment,o),S(f.$$.fragment,o),S(d),k=!1},d(o){o&&(g(e),g(r),g(n),g(l),g(p),g($)),u&&u.d(o),x(t,o),w[s].d(o),x(c),x(f),d&&d.d(o),U=!1,z()}}}const ne=0,ie=2,pt=5,le=6e4,gt=1e3,Te=1.1;function dt(i,e,t){let r,s,a,n;const l=Xe();$e(i,l,h=>t(17,n=h));let c=n.width,m=n.height,f=!1,p=we(O);const $=Re();$e(i,$,h=>t(16,a=h));const k=h=>{t(3,p=h),t(2,f=!1)},U=()=>{if(O.length===1)return;let h;do h=we(O);while(h===p);k(h)},z=()=>{const h=O.indexOf(p),E=h===0?O.length-1:h-1;k(O[E])},u=()=>{const h=O.indexOf(p),E=h===O.length-1?0:h+1;k(O[E])};let y,w,C,d,o,_,L,V,q,R=0,Q=0;const xe=h=>{Q>0&&(Q-=h,Q>0)||(R+=h,R>=le&&(R=0,[d,o,_]=ee(c,m,p.info.width,p.info.height,ne,ie),L=y,V=w,q=C),De(R,le))},De=(h,E)=>{const X=Ue(h/E);t(14,y=L+X*(d-L)),t(15,w=V+X*(o-V)),t(4,C=q+X*(_-q))},ge=(h,E)=>{t(14,[y,w,C]=ee(c,m,h,E,ne,ie),y,t(15,w),t(4,C)),L=y,V=w,q=C,[d,o,_]=ee(c,m,h,E,ne,ie)},ee=(h,E,X,Z,K,H)=>{const W=Math.max(K,Math.max(h/X,E/Z)),te=Math.max(H,W*pt),B=ae(W,te),re=ae(h/2/B,X-h/2/B),se=ae(E/2/B,Z-E/2/B);return[re,se,B]},Ne=h=>{switch(h.key){case"1":t(2,f=!f);break;case"ArrowLeft":z();break;case"ArrowRight":u();break;case"ArrowUp":case"ArrowDown":U();break;case" ":ge(p.info.width,p.info.height);break}},Le=(h,E=c/2,X=m/2)=>{if(h===0)return;const Z=h>0?1/Te:Te,K=C,H=K*Z;t(4,C=H);const W=(H-K)/K,te=E-c/2,B=X-m/2,re=te*W/H,se=B*W/H;de(re,se)},de=(h,E)=>{t(14,y+=h),t(15,w+=E),Q=gt,R=le},Oe=()=>t(2,f=!f);return i.$$.update=()=>{i.$$.dirty[0]&131072&&t(0,c=n.width),i.$$.dirty[0]&131072&&t(1,m=n.height),i.$$.dirty[0]&8&&ge(p.info.width,p.info.height),i.$$.dirty[0]&65540&&!f&&xe(a.dt),i.$$.dirty[0]&16401&&t(6,r=-y*C+c/2),i.$$.dirty[0]&32786&&t(5,s=-w*C+m/2)},[c,m,f,p,C,s,r,l,$,k,U,Ne,Le,de,y,w,a,n,Oe]}class Pt extends he{constructor(e){super(),pe(this,e,dt,ht,me,{},null,[-1,-1])}}export{Pt as component};
