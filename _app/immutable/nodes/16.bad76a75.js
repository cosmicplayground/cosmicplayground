import{n as me,t as J,i as v,f as p,e as N,d as P,m as U,o as y,a as oe,s as z,b as F,V as ke,p as G,J as Ae,c as $e,y as ue,z as _e,q as j,g as Ue}from"../chunks/scheduler.24efe3e9.js";import{S as ge,i as he,t as b,g as ce,b as I,e as fe,c as T,a as A,m as M,d as D}from"../chunks/index.d51c8976.js";import{r as we,a as ae}from"../chunks/random.c2e51b4a.js";import{s as Le}from"../chunks/index.6cbf29f9.js";import{g as Re}from"../chunks/clock.06e05f62.js";import{g as Xe}from"../chunks/dimensions.c3d7a04e.js";import{g as Ye,C as ze,S as Fe,a as qe}from"../chunks/pixi.afbe3b2f.js";import{W as Be}from"../chunks/WaitingScreen.6e33b991.js";import{A as xe}from"../chunks/WaitingAnimation.e570d0f1.js";import{e as be,u as Ge,d as He}from"../chunks/each.9800de32.js";import{F as ve}from"../chunks/FloatingTextButton.c2fc9ba5.js";import{s as O}from"../chunks/images.6fb087a5.js";import{I as Je}from"../chunks/ImageCreditsCaption.a98938a5.js";import{S as Ke}from"../chunks/Surface.d2ce4482.js";import{P as Me}from"../chunks/Panel.057221e0.js";import{P as We}from"../chunks/Preview.3f0382fa.js";import{P as je}from"../chunks/PortalPreview.30601181.js";function ye(i){let e,t;return e=new Be({props:{status:i[0]}}),{c(){T(e.$$.fragment)},l(s){A(e.$$.fragment,s)},m(s,r){M(e,s,r),t=!0},p(s,r){const a={};r&1&&(a.status=s[0]),e.$set(a)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){I(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function Qe(i){let e,t,s=i[0]!=="success"&&ye(i);return{c(){s&&s.c(),e=J()},l(r){s&&s.l(r),e=J()},m(r,a){s&&s.m(r,a),v(r,e,a),t=!0},p(r,[a]){r[0]!=="success"?s?(s.p(r,a),a&1&&b(s,1)):(s=ye(r),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(ce(),I(s,1,1,()=>{s=null}),fe())},i(r){t||(b(s),t=!0)},o(r){I(s),t=!1},d(r){r&&p(e),s&&s.d(r)}}}function Ze(i,e,t){let{cameraX:s}=e,{cameraY:r}=e,{cameraScale:a}=e,{imageUrl:n}=e,l=null,c=!1;const{scene:m}=Ye({loaded:async()=>{c||await h(n)},destroy:()=>{k(),c=!0}}),f=new ze;m.addChild(f);const h=async u=>{const S=await xe.load(u);l&&l.texture===S||$(S)},$=u=>{l&&k(),u.baseTexture.setStyle(Fe.LINEAR),t(5,l=new qe(u)),f.addChild(l)},k=()=>{l&&(f.removeChild(l),l.destroy(),t(5,l=null))},L=(u,S,w,C)=>{u.scale.set(C),u.position.set(S,w)};let q;return i.$$set=u=>{"cameraX"in u&&t(1,s=u.cameraX),"cameraY"in u&&t(2,r=u.cameraY),"cameraScale"in u&&t(3,a=u.cameraScale),"imageUrl"in u&&t(4,n=u.imageUrl)},i.$$.update=()=>{i.$$.dirty&16&&h(n),i.$$.dirty&14&&L(f,s,r,a),i.$$.dirty&32&&t(0,q=l?"success":"pending")},[q,s,r,a,n,l]}class et extends ge{constructor(e){super(),he(this,e,Ze,Qe,me,{cameraX:1,cameraY:2,cameraScale:3,imageUrl:4})}}function Ie(i,e,t){const s=i.slice();return s[3]=e[t],s}function Se(i,e){let t,s,r,a,n,l,c,m,f;function h(){return e[2](e[3])}return{key:i,first:null,c(){t=N("button"),s=N("img"),c=z(),this.h()},l($){t=P($,"BUTTON",{class:!0});var k=U(t);s=P(k,"IMG",{src:!0,alt:!0,width:!0,height:!0}),c=F(k),k.forEach(p),this.h()},h(){ke(s.src,r=e[3].thumbnail.url)||y(s,"src",r),y(s,"alt",a=e[3].title),y(s,"width",n=e[3].thumbnail.width),y(s,"height",l=e[3].thumbnail.height),y(t,"class","svelte-1dt3wg7"),this.first=t},m($,k){v($,t,k),G(t,s),G(t,c),m||(f=Ae(t,"click",h),m=!0)},p($,k){e=$,k&1&&!ke(s.src,r=e[3].thumbnail.url)&&y(s,"src",r),k&1&&a!==(a=e[3].title)&&y(s,"alt",a),k&1&&n!==(n=e[3].thumbnail.width)&&y(s,"width",n),k&1&&l!==(l=e[3].thumbnail.height)&&y(s,"height",l)},d($){$&&p(t),m=!1,f()}}}function tt(i){let e,t=[],s=new Map,r=be(i[0]);const a=n=>n[3].info.url;for(let n=0;n<r.length;n+=1){let l=Ie(i,r,n),c=a(l);s.set(c,t[n]=Se(c,l))}return{c(){e=N("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=P(n,"DIV",{class:!0});var l=U(e);for(let c=0;c<t.length;c+=1)t[c].l(l);l.forEach(p),this.h()},h(){y(e,"class","image-picker svelte-1dt3wg7")},m(n,l){v(n,e,l);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null)},p(n,[l]){l&3&&(r=be(n[0]),t=Ge(t,l,a,1,n,r,s,e,He,Se,null,Ie))},i:oe,o:oe,d(n){n&&p(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function st(i,e,t){let{images:s}=e,{pick_image:r}=e;const a=n=>r(n);return i.$$set=n=>{"images"in n&&t(0,s=n.images),"pick_image"in n&&t(1,r=n.pick_image)},[s,r,a]}class rt extends ge{constructor(e){super(),he(this,e,st,tt,me,{images:0,pick_image:1})}}function Ee(i){let e;return{c(){e=N("div"),this.h()},l(t){e=P(t,"DIV",{class:!0}),U(e).forEach(p),this.h()},h(){y(e,"class","overlay-bg svelte-14sbxfu")},m(t,s){v(t,e,s)},d(t){t&&p(e)}}}function at(i){let e,t,s;return t=new Ke({props:{width:i[0],height:i[1],scale:i[4],zoom:i[12],pan:i[13]}}),{c(){e=N("div"),T(t.$$.fragment),this.h()},l(r){e=P(r,"DIV",{class:!0,style:!0});var a=U(e);A(t.$$.fragment,a),a.forEach(p),this.h()},h(){y(e,"class","interaction-surface-wrapper svelte-14sbxfu"),j(e,"width",i[0]+"px"),j(e,"height",i[1]+"px")},m(r,a){v(r,e,a),M(t,e,null),s=!0},p(r,a){const n={};a[0]&1&&(n.width=r[0]),a[0]&2&&(n.height=r[1]),a[0]&16&&(n.scale=r[4]),t.$set(n),(!s||a[0]&1)&&j(e,"width",r[0]+"px"),(!s||a[0]&2)&&j(e,"height",r[1]+"px")},i(r){s||(b(t.$$.fragment,r),s=!0)},o(r){I(t.$$.fragment,r),s=!1},d(r){r&&p(e),D(t)}}}function nt(i){let e,t,s,r,a,n,l,c;return t=new rt({props:{images:O,pick_image:i[9]}}),a=new Me({props:{$$slots:{default:[it]},$$scope:{ctx:i}}}),l=new je({props:{href:"/about",$$slots:{default:[lt]},$$scope:{ctx:i}}}),{c(){e=N("div"),T(t.$$.fragment),s=z(),r=N("footer"),T(a.$$.fragment),n=z(),T(l.$$.fragment),this.h()},l(m){e=P(m,"DIV",{class:!0});var f=U(e);A(t.$$.fragment,f),s=F(f),r=P(f,"FOOTER",{class:!0});var h=U(r);A(a.$$.fragment,h),n=F(h),A(l.$$.fragment,h),h.forEach(p),f.forEach(p),this.h()},h(){y(r,"class","svelte-14sbxfu"),y(e,"class","overlay svelte-14sbxfu")},m(m,f){v(m,e,f),M(t,e,null),G(e,s),G(e,r),M(a,r,null),G(r,n),M(l,r,null),c=!0},p(m,f){const h={};f[1]&4&&(h.$$scope={dirty:f,ctx:m}),a.$set(h);const $={};f[1]&4&&($.$$scope={dirty:f,ctx:m}),l.$set($)},i(m){c||(b(t.$$.fragment,m),b(a.$$.fragment,m),b(l.$$.fragment,m),c=!0)},o(m){I(t.$$.fragment,m),I(a.$$.fragment,m),I(l.$$.fragment,m),c=!1},d(m){m&&p(e),D(t),D(a),D(l)}}}function it(i){let e,t='<a href="https://www.spacetelescope.org/copyright/">spacetelescope.org/copyright</a>';return{c(){e=N("div"),e.innerHTML=t,this.h()},l(s){e=P(s,"DIV",{"data-svelte-h":!0}),Ue(e)!=="svelte-e46x49"&&(e.innerHTML=t),this.h()},h(){j(e,"font-size","var(--size_lg)")},m(s,r){v(s,e,r)},p:oe,d(s){s&&p(e)}}}function lt(i){let e,t;return e=new We({}),{c(){T(e.$$.fragment)},l(s){A(e.$$.fragment,s)},m(s,r){M(e,s,r),t=!0},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){I(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function ot(i){let e;return{c(){e=ue("random image")},l(t){e=_e(t,"random image")},m(t,s){v(t,e,s)},d(t){t&&p(e)}}}function ct(i){let e;return{c(){e=ue("pick an image")},l(t){e=_e(t,"pick an image")},m(t,s){v(t,e,s)},d(t){t&&p(e)}}}function ft(i){let e;return{c(){e=ue("close image picker")},l(t){e=_e(t,"close image picker")},m(t,s){v(t,e,s)},d(t){t&&p(e)}}}function mt(i){let e;function t(a,n){return a[2]?ft:ct}let s=t(i),r=s(i);return{c(){r.c(),e=J()},l(a){r.l(a),e=J()},m(a,n){r.m(a,n),v(a,e,n)},p(a,n){s!==(s=t(a))&&(r.d(1),r=s(a),r&&(r.c(),r.m(e.parentNode,e)))},d(a){a&&p(e),r.d(a)}}}function Ce(i){let e,t,s,r;return s=new Me({props:{$$slots:{default:[ut]},$$scope:{ctx:i}}}),{c(){e=N("div"),t=N("div"),T(s.$$.fragment),this.h()},l(a){e=P(a,"DIV",{class:!0});var n=U(e);t=P(n,"DIV",{class:!0});var l=U(t);A(s.$$.fragment,l),l.forEach(p),n.forEach(p),this.h()},h(){y(t,"class","width_md"),y(e,"class","credits idle_fade prose svelte-14sbxfu")},m(a,n){v(a,e,n),G(e,t),M(s,t,null),r=!0},p(a,n){const l={};n[0]&8|n[1]&4&&(l.$$scope={dirty:n,ctx:a}),s.$set(l)},i(a){r||(b(s.$$.fragment,a),r=!0)},o(a){I(s.$$.fragment,a),r=!1},d(a){a&&p(e),D(s)}}}function ut(i){let e,t;return e=new Je({props:{image:i[3]}}),{c(){T(e.$$.fragment)},l(s){A(e.$$.fragment,s)},m(s,r){M(e,s,r),t=!0},p(s,r){const a={};r[0]&8&&(a.image=s[3]),e.$set(a)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){I(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function _t(i){let e,t,s,r,a,n,l,c,m,f,h,$,k,L,q,u=i[2]&&Ee();t=new et({props:{cameraX:i[6],cameraY:i[5],cameraScale:i[4],imageUrl:i[3].info.url}});const S=[nt,at],w=[];function C(o,_){return o[2]?0:1}r=C(i),a=w[r]=S[r](i),c=new ve({props:{$$slots:{default:[ot]},$$scope:{ctx:i}}}),c.$on("click",i[10]),f=new ve({props:{$$slots:{default:[mt]},$$scope:{ctx:i}}}),f.$on("click",i[18]);let d=!i[2]&&Ce(i);return{c(){u&&u.c(),e=z(),T(t.$$.fragment),s=z(),a.c(),n=z(),l=N("div"),T(c.$$.fragment),m=z(),T(f.$$.fragment),h=z(),d&&d.c(),$=J(),this.h()},l(o){u&&u.l(o),e=F(o),A(t.$$.fragment,o),s=F(o),a.l(o),n=F(o),l=P(o,"DIV",{class:!0});var _=U(l);A(c.$$.fragment,_),m=F(_),A(f.$$.fragment,_),_.forEach(p),h=F(o),d&&d.l(o),$=J(),this.h()},h(){y(l,"class","hud idle_fade svelte-14sbxfu")},m(o,_){u&&u.m(o,_),v(o,e,_),M(t,o,_),v(o,s,_),w[r].m(o,_),v(o,n,_),v(o,l,_),M(c,l,null),G(l,m),M(f,l,null),v(o,h,_),d&&d.m(o,_),v(o,$,_),k=!0,L||(q=Ae(window,"keydown",i[11],!0),L=!0)},p(o,_){o[2]?u||(u=Ee(),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null);const V={};_[0]&64&&(V.cameraX=o[6]),_[0]&32&&(V.cameraY=o[5]),_[0]&16&&(V.cameraScale=o[4]),_[0]&8&&(V.imageUrl=o[3].info.url),t.$set(V);let R=r;r=C(o),r===R?w[r].p(o,_):(ce(),I(w[R],1,1,()=>{w[R]=null}),fe(),a=w[r],a?a.p(o,_):(a=w[r]=S[r](o),a.c()),b(a,1),a.m(n.parentNode,n));const B={};_[1]&4&&(B.$$scope={dirty:_,ctx:o}),c.$set(B);const X={};_[0]&4|_[1]&4&&(X.$$scope={dirty:_,ctx:o}),f.$set(X),o[2]?d&&(ce(),I(d,1,1,()=>{d=null}),fe()):d?(d.p(o,_),_[0]&4&&b(d,1)):(d=Ce(o),d.c(),b(d,1),d.m($.parentNode,$))},i(o){k||(b(t.$$.fragment,o),b(a),b(c.$$.fragment,o),b(f.$$.fragment,o),b(d),k=!0)},o(o){I(t.$$.fragment,o),I(a),I(c.$$.fragment,o),I(f.$$.fragment,o),I(d),k=!1},d(o){o&&(p(e),p(s),p(n),p(l),p(h),p($)),u&&u.d(o),D(t,o),w[r].d(o),D(c),D(f),d&&d.d(o),L=!1,q()}}}const ne=0,ie=2,gt=5,le=6e4,ht=1e3,Te=1.1;function pt(i,e,t){let s,r,a,n;const l=Xe();$e(i,l,g=>t(17,n=g));let c=n.width,m=n.height,f=!1,h=we(O);const $=Re();$e(i,$,g=>t(16,a=g));const k=g=>{t(3,h=g),t(2,f=!1)},L=()=>{if(O.length===1)return;let g;do g=we(O);while(g===h);k(g)},q=()=>{const g=O.indexOf(h),E=g===0?O.length-1:g-1;k(O[E])},u=()=>{const g=O.indexOf(h),E=g===O.length-1?0:g+1;k(O[E])};let S,w,C,d,o,_,V,R,B,X=0,Q=0;const De=g=>{Q>0&&(Q-=g,Q>0)||(X+=g,X>=le&&(X=0,[d,o,_]=ee(c,m,h.info.width,h.info.height,ne,ie),V=S,R=w,B=C),Ne(X,le))},Ne=(g,E)=>{const Y=Le(g/E);t(14,S=V+Y*(d-V)),t(15,w=R+Y*(o-R)),t(4,C=B+Y*(_-B))},pe=(g,E)=>{t(14,[S,w,C]=ee(c,m,g,E,ne,ie),S,t(15,w),t(4,C)),V=S,R=w,B=C,[d,o,_]=ee(c,m,g,E,ne,ie)},ee=(g,E,Y,Z,K,H)=>{const W=Math.max(K,Math.max(g/Y,E/Z)),te=Math.max(H,W*gt),x=ae(W,te),se=ae(g/2/x,Y-g/2/x),re=ae(E/2/x,Z-E/2/x);return[se,re,x]},Pe=g=>{switch(g.key){case"1":t(2,f=!f);break;case"ArrowLeft":q();break;case"ArrowRight":u();break;case"ArrowUp":case"ArrowDown":L();break;case" ":pe(h.info.width,h.info.height);break}},Ve=(g,E=c/2,Y=m/2)=>{if(g===0)return;const Z=g>0?1/Te:Te,K=C,H=K*Z;t(4,C=H);const W=(H-K)/K,te=E-c/2,x=Y-m/2,se=te*W/H,re=x*W/H;de(se,re)},de=(g,E)=>{t(14,S+=g),t(15,w+=E),Q=ht,X=le},Oe=()=>t(2,f=!f);return i.$$.update=()=>{i.$$.dirty[0]&131072&&t(0,c=n.width),i.$$.dirty[0]&131072&&t(1,m=n.height),i.$$.dirty[0]&8&&pe(h.info.width,h.info.height),i.$$.dirty[0]&65540&&!f&&De(a.dt),i.$$.dirty[0]&16401&&t(6,s=-S*C+c/2),i.$$.dirty[0]&32786&&t(5,r=-w*C+m/2)},[c,m,f,h,C,r,s,l,$,k,L,Pe,Ve,de,S,w,a,n,Oe]}class Vt extends ge{constructor(e){super(),he(this,e,pt,_t,me,{},null,[-1,-1])}}export{Vt as component};
