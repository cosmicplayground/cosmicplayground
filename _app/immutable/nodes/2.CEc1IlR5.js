var ys=Object.defineProperty;var Ms=(r,e,t)=>e in r?ys(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var re=(r,e,t)=>(Ms(r,typeof e!="symbol"?e+"":e,t),t);import{n as Fe,L as De,v as Os,e as B,s as K,b as I,l as q,d,c as z,m as P,p as me,i as v,J as lt,a as _e,D as gt,o as U,a0 as ns,g as fe,F as os,x as ue,y as he,A as Cs,I as ke,al as As,q as bt,a5 as Be,r as j,G as $e,K as Je,B as Hs,_ as kt}from"../chunks/scheduler.B6ZHjePS.js";import{S as Ge,i as Ke,c as N,a as X,m as L,t as w,b as R,d as W,g as Q,e as Z,h as Ot,f as Qe}from"../chunks/index.D8p8-7y1.js";import{e as Se,u as Ds,o as Bs}from"../chunks/each.DSKrv-cI.js";import{P as Is}from"../chunks/Pending_Animation.xjTnRI1Z.js";import{c as Ys,d as is,E as Te,u as Ps,e as Ns,f as _t,D as ls,W as Ls,S as Ws,b as Xs}from"../chunks/stage.DbOEQ0e6.js";import{s as be}from"../chunks/dom.COxKB0-J.js";import{g as at}from"../chunks/clock.CjzioAVG.js";import{s as Fs,e as Ct}from"../chunks/dom.CLnrzRWB.js";import{g as Gs}from"../chunks/dimensions.DSxfro0U.js";import{P as Ie}from"../chunks/PortalPreview.DjcbpV0W.js";import{P as as,S as At,b as Ht,a as Dt}from"../chunks/data.CirqLHKk.js";import{S as cs,d as nt,a as Ks,b as zs,c as Vs,P as Us,e as js,f as qs,g as $s,h as Js,i as Qs,j as Zs,k as xs}from"../chunks/data.BFQ82Dzi.js";import{F as er}from"../chunks/FreqSpeeds.Dtr5Pin8.js";import{F as tr}from"../chunks/FreqSpectacle.Dl9BPrcT.js";import{g as sr}from"../chunks/settings.CoKeUyIj.js";import{a as ee}from"../chunks/random.BCioE_zI.js";import{w as rr}from"../chunks/index.B134a2AU.js";import{c as Xe}from"../chunks/crew.BaBakeQM.js";import{b as nr}from"../chunks/pixi.CGO4fLu2.js";import{F as or}from"../chunks/FloatingIconButton.CJXmzrl4.js";import{s as Bt}from"../chunks/index.CCrH9t8L.js";import{P as fs}from"../chunks/Panel.DGbDyyrq.js";import{A as ir}from"../chunks/AppControlsTable.BDsaJ9vb.js";import{A as lr,g as ar}from"../chunks/AppDialog.CAnn4I7d.js";import{l as Ze}from"../chunks/songs.BcB-hfLc.js";import{a as xe}from"../chunks/play_song.CG_ofAeT.js";import{l as He,s as de}from"../chunks/storage.BRfawDas.js";const ot=(r=0)=>new Promise(e=>setTimeout(e,r)),et=Object.freeze([]);function cr(r){let e,t;return e=new er({props:{elapsedTime:r[0].time/4,width:100,height:30,hzItems:[3],lowestHzItemCount:1}}),{c(){N(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,n){L(e,s,n),t=!0},p(s,[n]){const i={};n&1&&(i.elapsedTime=s[0].time/4),e.$set(i)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function fr(r,e,t){let s;const n=at();return De(r,n,i=>t(0,s=i)),[s,n]}let ur=class extends Ge{constructor(e){super(),Ke(this,e,fr,cr,Fe,{})}};const hr={name:"secret2",slug:"secret2",showHomeButton:!0,Preview:ur};function _r(r){let e,t;return e=new tr({props:{elapsedTime:r[0].time/4,width:100,height:10,hzItems:[5],lowestHzItemCount:1}}),{c(){N(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,n){L(e,s,n),t=!0},p(s,[n]){const i={};n&1&&(i.elapsedTime=s[0].time/4),e.$set(i)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function dr(r,e,t){let s;const n=at();return De(r,n,i=>t(0,s=i)),[s,n]}class mr extends Ge{constructor(e){super(),Ke(this,e,dr,_r,Fe,{})}}const pr={name:"secret3",slug:"secret3",showHomeButton:!0,Preview:mr},gr=[.833,.76,.72],wr=[.611,1,.7],tt=[.389,.8,.6],br=[.12,.16,.5],It=[0,1,.5],St=.6,kr=St*1.618,Sr=ls*.97,Er=1.09,vr=.01,Rr=.01,Tr=.01,yr=100,st=.03,Mr=.21,Or=ls*1.03,Cr=0,Ar=-1400,Hr=-3e3,Dr=2800,Br=1800,Ir=15e3,Yr=100,rt=r=>r*1.4,Pr=r=>{try{const e=JSON.parse(r);if(!e||typeof e!="object")return;if(Array.isArray(e.crew)&&e.crew.every(t=>typeof t=="boolean")&&typeof e.crew_rescued_at_once_count=="number")return e}catch{}},wt=r=>r.crew.some(Boolean),Yt=r=>r.crew.every(Boolean),Nr=r=>r.crew.slice(1).every(Boolean),Lr=r=>r.crew.length===r.crew_rescued_at_once_count,Wr=(r,e)=>{const t=structuredClone(r);if(!e)return t;for(let s=0;s<e.crew.length;s++)e.crew[s]&&(t.crew[s]=!0);return t.crew_rescued_at_once_count=Math.max(us(e.crew),t.crew_rescued_at_once_count),t},Pt=r=>{const e=[!r.planet.dead,...r.moonsArray.map(t=>!t.dead)];return{crew:e,crew_rescued_at_once_count:us(e)}},Xr=r=>({crew:[!1,...r.moonsArray.map(()=>!1)],crew_rescued_at_once_count:0}),us=r=>r.filter(Boolean).length;class Fr extends Ys{constructor(t){super(t);re(this,"finished",!1);re(this,"player");re(this,"planet");re(this,"rock");re(this,"moons",new Set);re(this,"moonsArray",[]);re(this,"moonFragments",new Set);re(this,"planetFragments",new Set);re(this,"rockFragments",new Set);re(this,"scores");re(this,"rockTimer",null);const s=850,n=502;this.freezeCamera||this.camera.setPosition(s,n);const{sim:i,collisions:o,controller:l,moons:a}=this;console.log("setup stage, sim, controller",i,l);const c=this.player=new Te(o.create_circle(s,n,yr));c.speed=St,c.color=gr,this.addEntity(c);const f=1618,m=this.planet=new Te(o.create_circle(-1450+f/2,-1750+f/2,f));m.text=Xe[0].icon,m.textOffsetX=850,m.textOffsetY=1150,m.fontSize=200,m.color=wr,this.addEntity(m);const u=262,g=this.rock=new Te(o.create_circle(2275+u/2,1200+u/2,u));g.speed=Mr,g.strength=Or,g.directionX=-1,g.directionY=-.7,g.color=br,this.addEntity(g);let h=new Te(o.create_circle(1660,1012,43));h.text=Xe[1].icon,h.fontSize=rt(h.radius),h.speed=st,h.color=tt,this.addEntity(h),a.add(h),h=new Te(o.create_circle(1420,1174,72)),h.text=Xe[2].icon,h.fontSize=rt(h.radius),h.speed=st,h.color=tt,this.addEntity(h),a.add(h),h=new Te(o.create_circle(2010,872,19)),h.text=Xe[3].icon,h.fontSize=rt(h.radius),h.speed=st,h.color=tt,this.addEntity(h),a.add(h),h=new Te(o.create_circle(1870,776,27)),h.text=Xe[4].icon,h.fontSize=rt(h.radius),h.speed=st,h.color=tt,this.addEntity(h),a.add(h),this.moonsArray.push(...a),this.scores=rr(Pt(this))}updateScores(){const t=Pt(this);is(t,Os(this.scores))||this.scores.set(t)}update(t){const s=this.timeDilation*Math.min(Math.max(t,0),Yr);super.update(s);const{collisions:n,controller:i,player:o,planet:l,rock:a,moons:c,planetFragments:f,moonFragments:m,rockFragments:u,$camera:g}=this;Ps(i,o,g);let h=null,k=null,C=null,T=!1;if(this.sim.update(s,(O,y,G)=>{Ns(O,y,G);const S=a===O?O:a===y?y:null,A=l===O?O:l===y?y:null,D=c.has(O)?O:c.has(y)?y:null,Y=u.has(O)?O:u.has(y)?y:null,_=f.has(O)?O:f.has(y)?y:null,p=m.has(O)?O:m.has(y)?y:null,M=S||Y||_||p;if(D&&M){const $=M===S,H=M===p,V=_t(D,n,12);T=!0,(C||(C=[])).push(...V),this.removeEntity(D);for(const se of V)se.speed=$?ee(M.speed*1.2,M.speed*2.44):H?ee(M.speed/2,M.speed*2):ee(M.speed/8,M.speed),se.directionX=$?ee(M.directionX/2,M.directionX*2):H?ee(M.directionX/2,M.directionX*2):ee(-M.directionX/2,M.directionX),se.directionY=$?ee(M.directionY/2,M.directionY*2):H?ee(M.directionY/2,M.directionY*2):ee(-M.directionY/2,M.directionY),se.color=It}else if(S&&A){this.removeEntity(S),this.removeEntity(A);const $=_t(A,n,42);T=!0,(k||(k=[])).push(...$);for(const V of $)V.speed=S.speed*.2*ee(.5,1),V.directionX=ee(-S.directionX/2,S.directionX/2),V.directionY=ee(-S.directionY/2,S.directionY/2),V.color=It;const H=_t(S,n,210);(h||(h=[])).push(...H);for(const V of H)V.speed=ee(S.speed/2,S.speed*2),V.directionX=ee(-S.directionX*2,S.directionX*.25),V.directionY=ee(-S.directionY*2,S.directionY*.25)}else p&&(A||_||Y)&&this.removeEntity(p)},(O,y)=>{const G=O.entity,S=y.entity;if(G.dead||S.dead||G.disableSimulation||S.disableSimulation)return!1;const A=o===G?G:o===S?S:null,D=l===G?G:l===S?S:null,Y=c.has(G)?G:c.has(S)?S:null;return!(A&&(D||Y))}),this.freezeCamera){const O=o.radius+1,y=g.left+O,G=g.right-O;o.x<y?o.x=y:o.x>G&&(o.x=G);const S=g.top+O,A=g.bottom-O;o.y<S?o.y=S:o.y>A&&(o.y=A)}if(h)for(const O of h)u.add(O),this.addEntity(O);if(k)for(const O of k)f.add(O),this.addEntity(O);if(C)for(const O of C)m.add(O),this.addEntity(O);T&&this.updateScores(),this.finished||(this.rockTimer===null?a.dead?this.rockTimer=Ir:(a.x<Ar||a.y<Hr||a.x>Dr||a.y>Br)&&(this.rockTimer=Cr):(this.rockTimer-=s,this.rockTimer<=0&&(this.finished=!0)))}}function Gr(r){let e,t,s,n,i,o,l;return t=new Ls({props:{worldWidth:r[5],worldHeight:r[6],viewWidth:r[3],viewHeight:r[4],viewportWidth:r[1],viewportHeight:r[2],stage:r[0],pixi:r[12],domCanvasRenderer:r[10]}}),n=new Ws({props:{controller:r[7]}}),{c(){e=B("div"),N(t.$$.fragment),s=K(),N(n.$$.fragment),this.h()},l(a){e=I(a,"DIV",{class:!0});var c=q(e);X(t.$$.fragment,c),c.forEach(d),s=z(a),X(n.$$.fragment,a),this.h()},h(){P(e,"class","view svelte-1fxwwt5"),me(e,"transform",r[9])},m(a,c){v(a,e,c),L(t,e,null),v(a,s,c),L(n,a,c),i=!0,o||(l=lt(window,"keydown",r[13]),o=!0)},p(a,c){const f={};c[0]&32&&(f.worldWidth=a[5]),c[0]&64&&(f.worldHeight=a[6]),c[0]&8&&(f.viewWidth=a[3]),c[0]&16&&(f.viewHeight=a[4]),c[0]&2&&(f.viewportWidth=a[1]),c[0]&4&&(f.viewportHeight=a[2]),c[0]&1&&(f.stage=a[0]),c[0]&1024&&(f.domCanvasRenderer=a[10]),t.$set(f),c[0]&512&&me(e,"transform",a[9]);const m={};c[0]&128&&(m.controller=a[7]),n.$set(m)},i(a){i||(w(t.$$.fragment,a),w(n.$$.fragment,a),i=!0)},o(a){R(t.$$.fragment,a),R(n.$$.fragment,a),i=!1},d(a){a&&(d(e),d(s)),W(t),W(n,a),o=!1,l()}}}function Kr(r,e,t){let s,n,i,o=_e,l=()=>(o(),o=gt(se,E=>t(29,i=E)),se),a;r.$$.on_destroy.push(()=>o());let{viewportWidth:c}=e,{viewportHeight:f}=e,{viewWidth:m}=e,{viewHeight:u}=e,{worldWidth:g}=e,{worldHeight:h}=e,{cameraUnlocked:k=!1}=e,{speed_booster_enabled:C=!1}=e,{strengthBoosterEnabled:T=!1}=e,{strengthBooster1Enabled:O=!1}=e,{strengthBooster2Enabled:y=!1}=e,{strengthBooster3Enabled:G=!1}=e,{starshipX:S=0}=e,{starshipY:A=0}=e,{starshipAngle:D=0}=e,{starshipShieldRadius:Y=0}=e,{finish:_}=e,{stage:p}=e,{enableDomCanvasRenderer:M=!1}=e;const $=at();De(r,$,E=>t(27,a=E));const H=nr();let V,se,F,Ee=!1;const ze=()=>{!Ee&&p.finished&&(Ee=!0,_(i)),t(14,S=p.player.x),t(15,A=p.player.y),t(16,D=Ye(D,p.player.directionX,p.player.directionY)),t(17,Y=p.player.radius)},Ye=(E,ne,ie)=>!ne&&!ie?E:Ve(ne,ie),Ve=(E,ne)=>Math.atan2(ne,E),pe=(E,ne,ie,oe)=>{if(E===ie&&ne===oe)return"";const le=Math.min(E/ie,ne/oe);return`scale3d(${le}, ${le}, 1)`},ye=E=>{E.key==="q"&&!E.ctrlKey&&(be(E),_(null))};return r.$$set=E=>{"viewportWidth"in E&&t(1,c=E.viewportWidth),"viewportHeight"in E&&t(2,f=E.viewportHeight),"viewWidth"in E&&t(3,m=E.viewWidth),"viewHeight"in E&&t(4,u=E.viewHeight),"worldWidth"in E&&t(5,g=E.worldWidth),"worldHeight"in E&&t(6,h=E.worldHeight),"cameraUnlocked"in E&&t(18,k=E.cameraUnlocked),"speed_booster_enabled"in E&&t(19,C=E.speed_booster_enabled),"strengthBoosterEnabled"in E&&t(20,T=E.strengthBoosterEnabled),"strengthBooster1Enabled"in E&&t(21,O=E.strengthBooster1Enabled),"strengthBooster2Enabled"in E&&t(22,y=E.strengthBooster2Enabled),"strengthBooster3Enabled"in E&&t(23,G=E.strengthBooster3Enabled),"starshipX"in E&&t(14,S=E.starshipX),"starshipY"in E&&t(15,A=E.starshipY),"starshipAngle"in E&&t(16,D=E.starshipAngle),"starshipShieldRadius"in E&&t(17,Y=E.starshipShieldRadius),"finish"in E&&t(24,_=E.finish),"stage"in E&&t(0,p=E.stage),"enableDomCanvasRenderer"in E&&t(25,M=E.enableDomCanvasRenderer)},r.$$.update=()=>{r.$$.dirty[0]&33554432&&t(10,s=M?new Xs:null),r.$$.dirty[0]&524288&&t(0,p.player.speed=C?kr:St,p),r.$$.dirty[0]&15728640&&t(0,p.player.strength=(T?Er:Sr)+(O?vr:0)+(y?Rr:0)+(G?Tr:0),p),r.$$.dirty[0]&262144&&t(0,p.freezeCamera=!k,p),r.$$.dirty[0]&1&&t(26,{camera:V,scores:se,controller:F}=p,V,l(t(8,se)),(t(7,F),t(0,p),t(1,c),t(2,f),t(3,m),t(4,u),t(5,g),t(6,h),t(19,C),t(20,T),t(21,O),t(22,y),t(23,G),t(18,k))),r.$$.dirty[0]&134217728&&ze(),r.$$.dirty[0]&67420160&&k&&V.setPosition(S,A),r.$$.dirty[0]&130&&F&&t(7,F.viewportWidth=c,F),r.$$.dirty[0]&132&&F&&t(7,F.viewportHeight=f,F),r.$$.dirty[0]&136&&F&&t(7,F.viewWidth=m,F),r.$$.dirty[0]&144&&F&&t(7,F.viewHeight=u,F),r.$$.dirty[0]&160&&F&&t(7,F.worldWidth=g,F),r.$$.dirty[0]&192&&F&&t(7,F.worldHeight=h,F),r.$$.dirty[0]&120&&t(9,n=pe(m,u,g,h))},[p,c,f,m,u,g,h,F,se,n,s,$,H,ye,S,A,D,Y,k,C,T,O,y,G,_,M,V,a]}class zr extends Ge{constructor(e){super(),Ke(this,e,Kr,Gr,Fe,{viewportWidth:1,viewportHeight:2,viewWidth:3,viewHeight:4,worldWidth:5,worldHeight:6,cameraUnlocked:18,speed_booster_enabled:19,strengthBoosterEnabled:20,strengthBooster1Enabled:21,strengthBooster2Enabled:22,strengthBooster3Enabled:23,starshipX:14,starshipY:15,starshipAngle:16,starshipShieldRadius:17,finish:24,stage:0,enableDomCanvasRenderer:25},null,[-1,-1])}}function Vr(r){let e;return{c(){e=ue("play")},l(t){e=he(t,"play")},m(t,s){v(t,e,s)},d(t){t&&d(e)}}}function Ur(r){let e;return{c(){e=ue("exit")},l(t){e=he(t,"exit")},m(t,s){v(t,e,s)},d(t){t&&d(e)}}}function jr(r){let e,t,s,n="<code>[Space]</code>";function i(a,c){return a[2]?Ur:Vr}let o=i(r),l=o(r);return{c(){e=B("div"),l.c(),t=K(),s=B("small"),s.innerHTML=n,this.h()},l(a){e=I(a,"DIV",{class:!0});var c=q(e);l.l(c),c.forEach(d),t=z(a),s=I(a,"SMALL",{class:!0,"data-svelte-h":!0}),fe(s)!=="svelte-125shhp"&&(s.innerHTML=n),this.h()},h(){P(e,"class","button-text svelte-1uhbdjt"),P(s,"class","svelte-1uhbdjt")},m(a,c){v(a,e,c),l.m(e,null),v(a,t,c),v(a,s,c)},p(a,c){o!==(o=i(a))&&(l.d(1),l=o(a),l&&(l.c(),l.m(e,null)))},d(a){a&&(d(e),d(t),d(s)),l.d()}}}function Nt(r){let e,t;return e=new Ie({props:{on_click:r[8],$$slots:{default:[qr]},$$scope:{ctx:r}}}),{c(){N(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n&10&&(i.on_click=s[8]),n&512&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function qr(r){let e,t="↻",s,n,i="restart",o,l,a="<code>[r]</code>";return{c(){e=B("div"),e.textContent=t,s=K(),n=B("div"),n.textContent=i,o=K(),l=B("small"),l.innerHTML=a,this.h()},l(c){e=I(c,"DIV",{style:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1h8n14r"&&(e.textContent=t),s=z(c),n=I(c,"DIV",{class:!0,"data-svelte-h":!0}),fe(n)!=="svelte-27v868"&&(n.textContent=i),o=z(c),l=I(c,"SMALL",{class:!0,"data-svelte-h":!0}),fe(l)!=="svelte-12c5dmt"&&(l.innerHTML=a),this.h()},h(){me(e,"font-size","84px"),P(n,"class","button-text svelte-1uhbdjt"),P(l,"class","svelte-1uhbdjt")},m(c,f){v(c,e,f),v(c,s,f),v(c,n,f),v(c,o,f),v(c,l,f)},p:_e,d(c){c&&(d(e),d(s),d(n),d(o),d(l))}}}function $r(r){let e,t,s,n;t=new as({props:{on_click:r[7],starshipMode:r[2],$$slots:{default:[jr]},$$scope:{ctx:r}}});let i=r[2]&&Nt(r);return{c(){e=B("div"),N(t.$$.fragment),s=K(),i&&i.c(),this.h()},l(o){e=I(o,"DIV",{class:!0});var l=q(e);X(t.$$.fragment,l),s=z(l),i&&i.l(l),l.forEach(d),this.h()},h(){P(e,"class","starship_preview svelte-1uhbdjt")},m(o,l){v(o,e,l),L(t,e,null),U(e,s),i&&i.m(e,null),n=!0},p(o,l){const a={};l&10&&(a.on_click=o[7]),l&4&&(a.starshipMode=o[2]),l&516&&(a.$$scope={dirty:l,ctx:o}),t.$set(a),o[2]?i?(i.p(o,l),l&4&&w(i,1)):(i=Nt(o),i.c(),w(i,1),i.m(e,null)):i&&(Q(),R(i,1,1,()=>{i=null}),Z())},i(o){n||(w(t.$$.fragment,o),w(i),n=!0)},o(o){R(t.$$.fragment,o),R(i),n=!1},d(o){o&&d(e),W(t),i&&i.d()}}}function Lt(r){let e,t,s,n;return t=new fs({props:{$$slots:{default:[xr]},$$scope:{ctx:r}}}),{c(){e=B("div"),N(t.$$.fragment)},l(i){e=I(i,"DIV",{});var o=q(e);X(t.$$.fragment,o),o.forEach(d)},m(i,o){v(i,e,o),L(t,e,null),n=!0},p(i,o){const l={};o&624&&(l.$$scope={dirty:o,ctx:i}),t.$set(l)},i(i){n||(w(t.$$.fragment,i),i&&ns(()=>{n&&(s||(s=Ot(e,Bt,{},!0)),s.run(1))}),n=!0)},o(i){R(t.$$.fragment,i),i&&(s||(s=Ot(e,Bt,{},!1)),s.run(0)),n=!1},d(i){i&&d(e),W(t),i&&s&&s.end()}}}function Wt(r){let e,t,s,n,i,o,l,a;s=new cs({props:{scores:r[6],defaultIcon:"❔"}});function c(u,g){return u[6].crew_rescued_at_once_count>=5?Zr:u[6].crew_rescued_at_once_count?Qr:Jr}let f=c(r),m=f(r);return{c(){e=B("br"),t=K(),N(s.$$.fragment),n=K(),i=B("br"),o=K(),l=B("p"),m.c(),this.h()},l(u){e=I(u,"BR",{}),t=z(u),X(s.$$.fragment,u),n=z(u),i=I(u,"BR",{}),o=z(u),l=I(u,"P",{class:!0});var g=q(l);m.l(g),g.forEach(d),this.h()},h(){P(l,"class","box mb_lg")},m(u,g){v(u,e,g),v(u,t,g),L(s,u,g),v(u,n,g),v(u,i,g),v(u,o,g),v(u,l,g),m.m(l,null),a=!0},p(u,g){const h={};g&64&&(h.scores=u[6]),s.$set(h),f===(f=c(u))&&m?m.p(u,g):(m.d(1),m=f(u),m&&(m.c(),m.m(l,null)))},i(u){a||(w(s.$$.fragment,u),a=!0)},o(u){R(s.$$.fragment,u),a=!1},d(u){u&&(d(e),d(t),d(n),d(i),d(o),d(l)),W(s,u),m.d()}}}function Jr(r){let e;return{c(){e=ue("no crewmembers have been rescued")},l(t){e=he(t,"no crewmembers have been rescued")},m(t,s){v(t,e,s)},p:_e,d(t){t&&d(e)}}}function Qr(r){let e=r[6].crew_rescued_at_once_count+"",t,s,n,i=r[6].crew_rescued_at_once_count!==1&&Xt();return{c(){t=ue(e),s=ue(" crewmember"),i&&i.c(),n=ue(`
								rescued in your best run`)},l(o){t=he(o,e),s=he(o," crewmember"),i&&i.l(o),n=he(o,`
								rescued in your best run`)},m(o,l){v(o,t,l),v(o,s,l),i&&i.m(o,l),v(o,n,l)},p(o,l){l&64&&e!==(e=o[6].crew_rescued_at_once_count+"")&&Cs(t,e),o[6].crew_rescued_at_once_count!==1?i||(i=Xt(),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(o){o&&(d(t),d(s),d(n)),i&&i.d(o)}}}function Zr(r){let e,t="full crew ready";return{c(){e=B("a"),e.textContent=t,this.h()},l(s){e=I(s,"A",{href:!0,"data-svelte-h":!0}),fe(e)!=="svelte-u8hoje"&&(e.textContent=t),this.h()},h(){P(e,"href","/unlock")},m(s,n){v(s,e,n)},p:_e,d(s){s&&d(e)}}}function Xt(r){let e;return{c(){e=ue("s")},l(t){e=he(t,"s")},m(t,s){v(t,e,s)},d(t){t&&d(e)}}}function Ft(r){let e,t="reset scores",s,n;return{c(){e=B("button"),e.textContent=t},l(i){e=I(i,"BUTTON",{"data-svelte-h":!0}),fe(e)!=="svelte-6507cw"&&(e.textContent=t)},m(i,o){v(i,e,o),s||(n=lt(e,"click",function(){os(r[4])&&r[4].apply(this,arguments)}),s=!0)},p(i,o){r=i},d(i){i&&d(e),s=!1,n()}}}function Gt(r){let e,t="import scores",s,n;return{c(){e=B("button"),e.textContent=t},l(i){e=I(i,"BUTTON",{"data-svelte-h":!0}),fe(e)!=="svelte-cxeod6"&&(e.textContent=t)},m(i,o){v(i,e,o),s||(n=lt(e,"click",function(){os(r[5])&&r[5].apply(this,arguments)}),s=!0)},p(i,o){r=i},d(i){i&&d(e),s=!1,n()}}}function xr(r){let e,t,s="scores",n,i,o,l,a,c=r[6]&&Wt(r),f=r[4]&&Ft(r),m=r[5]&&Gt(r);return{c(){e=B("div"),t=B("h2"),t.textContent=s,n=K(),c&&c.c(),i=K(),o=B("div"),f&&f.c(),l=K(),m&&m.c(),this.h()},l(u){e=I(u,"DIV",{});var g=q(e);t=I(g,"H2",{class:!0,"data-svelte-h":!0}),fe(t)!=="svelte-1itypu1"&&(t.textContent=s),n=z(g),c&&c.l(g),i=z(g),o=I(g,"DIV",{class:!0});var h=q(o);f&&f.l(h),l=z(h),m&&m.l(h),h.forEach(d),g.forEach(d),this.h()},h(){P(t,"class","svelte-1uhbdjt"),P(o,"class","box row")},m(u,g){v(u,e,g),U(e,t),U(e,n),c&&c.m(e,null),U(e,i),U(e,o),f&&f.m(o,null),U(o,l),m&&m.m(o,null),a=!0},p(u,g){u[6]?c?(c.p(u,g),g&64&&w(c,1)):(c=Wt(u),c.c(),w(c,1),c.m(e,i)):c&&(Q(),R(c,1,1,()=>{c=null}),Z()),u[4]?f?f.p(u,g):(f=Ft(u),f.c(),f.m(o,l)):f&&(f.d(1),f=null),u[5]?m?m.p(u,g):(m=Gt(u),m.c(),m.m(o,null)):m&&(m.d(1),m=null)},i(u){a||(w(c),a=!0)},o(u){R(c),a=!1},d(u){u&&d(e),c&&c.d(),f&&f.d(),m&&m.d()}}}function en(r){let e,t="<td><code>[Space]</code></td><td>toggle starship game</td>",s,n,i="<td><code>[r]</code></td><td>restart starship game</td>";return{c(){e=B("tr"),e.innerHTML=t,s=K(),n=B("tr"),n.innerHTML=i},l(o){e=I(o,"TR",{"data-svelte-h":!0}),fe(e)!=="svelte-xj8t5n"&&(e.innerHTML=t),s=z(o),n=I(o,"TR",{"data-svelte-h":!0}),fe(n)!=="svelte-1ed4puq"&&(n.innerHTML=i)},m(o,l){v(o,e,l),v(o,s,l),v(o,n,l)},p:_e,d(o){o&&(d(e),d(s),d(n))}}}function tn(r){let e,t,s,n,i,o,l;s=new fs({props:{$$slots:{default:[$r]},$$scope:{ctx:r}}});let a=(r[4]||r[5])&&Lt(r);return o=new ir({props:{clock:r[0],$$slots:{default:[en]},$$scope:{ctx:r}}}),{c(){e=B("div"),t=B("div"),N(s.$$.fragment),n=K(),a&&a.c(),i=K(),N(o.$$.fragment),this.h()},l(c){e=I(c,"DIV",{class:!0});var f=q(e);t=I(f,"DIV",{class:!0});var m=q(t);X(s.$$.fragment,m),m.forEach(d),n=z(f),a&&a.l(f),i=z(f),X(o.$$.fragment,f),f.forEach(d),this.h()},h(){P(t,"class","box starship_preview_wrapper svelte-1uhbdjt"),P(e,"class","wrapper svelte-1uhbdjt")},m(c,f){v(c,e,f),U(e,t),L(s,t,null),U(e,n),a&&a.m(e,null),U(e,i),L(o,e,null),l=!0},p(c,[f]){const m={};f&526&&(m.$$scope={dirty:f,ctx:c}),s.$set(m),c[4]||c[5]?a?(a.p(c,f),f&48&&w(a,1)):(a=Lt(c),a.c(),w(a,1),a.m(e,i)):a&&(Q(),R(a,1,1,()=>{a=null}),Z());const u={};f&1&&(u.clock=c[0]),f&512&&(u.$$scope={dirty:f,ctx:c}),o.$set(u)},i(c){l||(w(s.$$.fragment,c),w(a),w(o.$$.fragment,c),l=!0)},o(c){R(s.$$.fragment,c),R(a),R(o.$$.fragment,c),l=!1},d(c){c&&d(e),W(s),a&&a.d(),W(o)}}}function sn(r,e,t){let{clock:s}=e,{exit:n}=e,{starshipMode:i}=e,{toggleStarshipMode:o}=e,{resetScores:l}=e,{importScores:a}=e,{scores:c}=e;const f=async()=>{n(),await o()},m=async()=>{n(),o(),await ot(),await ot(),o()};return r.$$set=u=>{"clock"in u&&t(0,s=u.clock),"exit"in u&&t(1,n=u.exit),"starshipMode"in u&&t(2,i=u.starshipMode),"toggleStarshipMode"in u&&t(3,o=u.toggleStarshipMode),"resetScores"in u&&t(4,l=u.resetScores),"importScores"in u&&t(5,a=u.importScores),"scores"in u&&t(6,c=u.scores)},[s,n,i,o,l,a,c,f,m]}class rn extends Ge{constructor(e){super(),Ke(this,e,sn,tn,Fe,{clock:0,exit:1,starshipMode:2,toggleStarshipMode:3,resetScores:4,importScores:5,scores:6})}}function Kt(r,e,t){const s=r.slice();return s[80]=e[t],s}function zt(r,e,t){const s=r.slice();return s[83]=e[t],s}function Vt(r,e,t){const s=r.slice();return s[80]=e[t],s}function Ut(r,e,t){const s=r.slice();return s[83]=e[t],s}function nn(r){let e,t,s;var n=nt.Preview;function i(o,l){return{}}return n&&(e=Be(n,i())),{c(){e&&N(e.$$.fragment),t=j()},l(o){e&&X(e.$$.fragment,o),t=j()},m(o,l){e&&L(e,o,l),v(o,t,l),s=!0},p(o,l){if(n!==(n=nt.Preview)){if(e){Q();const a=e;R(a.$$.fragment,1,0,()=>{W(a,1)}),Z()}n?(e=Be(n,i()),N(e.$$.fragment),w(e.$$.fragment,1),L(e,t.parentNode,t)):e=null}},i(o){s||(e&&w(e.$$.fragment,o),s=!0)},o(o){e&&R(e.$$.fragment,o),s=!1},d(o){o&&d(t),e&&W(e,o)}}}function jt(r){let e,t;return e=new Us({props:{unlocked:r[30],scores:r[12],on_click:r[30]?void 0:r[64]}}),{c(){N(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n[0]&1073741824&&(i.unlocked=s[30]),n[0]&4096&&(i.scores=s[12]),n[0]&1073741952&&(i.on_click=s[30]?void 0:s[64]),e.$set(i)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function on(r){let e,t;return e=new Ie({props:{href:r[83].slug,classes:"portal_preview--"+r[83].slug,$$slots:{default:[an]},$$scope:{ctx:r}}}),{c(){N(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n[2]&536870912&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function ln(r){let e,t;return e=new as({props:{on_click:r[51],classes:"portal_preview--starship"}}),{c(){N(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,n){L(e,s,n),t=!0},p:_e,i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function an(r){let e,t,s;var n=r[83].Preview;function i(o,l){return{}}return n&&(e=Be(n,i())),{c(){e&&N(e.$$.fragment),t=j()},l(o){e&&X(e.$$.fragment,o),t=j()},m(o,l){e&&L(e,o,l),v(o,t,l),s=!0},p(o,l){if(n!==(n=o[83].Preview)){if(e){Q();const a=e;R(a.$$.fragment,1,0,()=>{W(a,1)}),Z()}n?(e=Be(n,i()),N(e.$$.fragment),w(e.$$.fragment,1),L(e,t.parentNode,t)):e=null}},i(o){s||(e&&w(e.$$.fragment,o),s=!0)},o(o){e&&R(e.$$.fragment,o),s=!1},d(o){o&&d(t),e&&W(e,o)}}}function qt(r,e){let t,s,n,i,o;const l=[ln,on],a=[];function c(f,m){return f[83]===f[40]?0:1}return s=c(e),n=a[s]=l[s](e),{key:r,first:null,c(){t=j(),n.c(),i=j(),this.h()},l(f){t=j(),n.l(f),i=j(),this.h()},h(){this.first=t},m(f,m){v(f,t,m),a[s].m(f,m),v(f,i,m),o=!0},p(f,m){e=f,n.p(e,m)},i(f){o||(w(n),o=!0)},o(f){R(n),o=!1},d(f){f&&(d(t),d(i)),a[s].d(f)}}}function $t(r){let e,t=[],s=new Map,n,i=Se(r[80]);const o=l=>l[83];for(let l=0;l<i.length;l+=1){let a=Ut(r,i,l),c=o(a);s.set(c,t[l]=qt(c,a))}return{c(){e=B("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=I(l,"DIV",{class:!0});var a=q(e);for(let c=0;c<t.length;c+=1)t[c].l(a);a.forEach(d),this.h()},h(){P(e,"class","portals svelte-18cl4p")},m(l,a){v(l,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);n=!0},p(l,a){a[1]&1050112&&(i=Se(l[80]),Q(),t=Ds(t,a,o,1,l,i,s,e,Bs,qt,null,Ut),Z())},i(l){if(!n){for(let a=0;a<i.length;a+=1)w(t[a]);n=!0}},o(l){for(let a=0;a<t.length;a+=1)R(t[a]);n=!1},d(l){l&&d(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Jt(r){let e,t;return e=new Ie({props:{classes:"show-more-button",on_click:r[65],$$slots:{default:[_n]},$$scope:{ctx:r}}}),{c(){N(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n[0]&8192|n[1]&64|n[2]&536870912&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function cn(r){let e,t;return{c(){e=B("img"),this.h()},l(s){e=I(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){kt(e.src,t="/assets/earth/night_lights_3.png")||P(e,"src",t),P(e,"alt","night lights of Asia and Australia"),P(e,"class","night-light svelte-18cl4p")},m(s,n){v(s,e,n)},d(s){s&&d(e)}}}function fn(r){let e,t;return{c(){e=B("img"),this.h()},l(s){e=I(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){kt(e.src,t="/assets/earth/night_lights_2.png")||P(e,"src",t),P(e,"alt","night lights of the Americas"),P(e,"class","night-light svelte-18cl4p")},m(s,n){v(s,e,n)},d(s){s&&d(e)}}}function un(r){let e,t;return{c(){e=B("img"),this.h()},l(s){e=I(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){kt(e.src,t="/assets/earth/night_lights_1.png")||P(e,"src",t),P(e,"alt","night lights of Africa, Europe, and the Middle East"),P(e,"class","night-light svelte-18cl4p")},m(s,n){v(s,e,n)},d(s){s&&d(e)}}}function hn(r){let e;function t(i,o){return i[86]===0?un:i[86]===1?fn:cn}let s=t(r),n=s(r);return{c(){n.c(),e=j()},l(i){n.l(i),e=j()},m(i,o){n.m(i,o),v(i,e,o)},p(i,o){s!==(s=t(i))&&(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&d(e),n.d(i)}}}function _n(r){let e,t,s;return e=new Is({props:{running:r[13]&&r[37].running,$$slots:{default:[hn,({index:n})=>({86:n}),({index:n})=>[0,0,n?16777216:0]]},$$scope:{ctx:r}}}),{c(){t=B("div"),N(e.$$.fragment),this.h()},l(n){t=I(n,"DIV",{style:!0});var i=q(t);X(e.$$.fragment,i),this.h()},h(){me(t,"display","contents"),me(t,"--animation_duration","var(--duration_6)")},m(n,i){v(n,t,i),L(e,t,null),s=!0},p(n,i){const o={};i[0]&8192|i[1]&64&&(o.running=n[13]&&n[37].running),i[2]&553648128&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){s||(w(e.$$.fragment,n),s=!0)},o(n){R(e.$$.fragment,n),s=!1},d(n){n&&e&&d(t),W(e,n)}}}function Qt(r){let e,t,s=Se(r[21]),n=[];for(let o=0;o<s.length;o+=1)n[o]=xt(Kt(r,s,o));const i=o=>R(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=j()},l(o){for(let l=0;l<n.length;l+=1)n[l].l(o);e=j()},m(o,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,l);v(o,e,l),t=!0},p(o,l){if(l[0]&2097152){s=Se(o[21]);let a;for(a=0;a<s.length;a+=1){const c=Kt(o,s,a);n[a]?(n[a].p(c,l),w(n[a],1)):(n[a]=xt(c),n[a].c(),w(n[a],1),n[a].m(e.parentNode,e))}for(Q(),a=s.length;a<n.length;a+=1)i(a);Z()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)w(n[l]);t=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)R(n[l]);t=!1},d(o){o&&d(e),bt(n,o)}}}function dn(r){let e,t,s;var n=r[83].Preview;function i(o,l){return{}}return n&&(e=Be(n,i())),{c(){e&&N(e.$$.fragment),t=j()},l(o){e&&X(e.$$.fragment,o),t=j()},m(o,l){e&&L(e,o,l),v(o,t,l),s=!0},p(o,l){if(l[0]&2097152&&n!==(n=o[83].Preview)){if(e){Q();const a=e;R(a.$$.fragment,1,0,()=>{W(a,1)}),Z()}n?(e=Be(n,i()),N(e.$$.fragment),w(e.$$.fragment,1),L(e,t.parentNode,t)):e=null}},i(o){s||(e&&w(e.$$.fragment,o),s=!0)},o(o){e&&R(e.$$.fragment,o),s=!1},d(o){o&&d(t),e&&W(e,o)}}}function Zt(r){let e,t;return e=new Ie({props:{href:r[83].slug,classes:"portal_preview--"+r[83].slug,$$slots:{default:[dn]},$$scope:{ctx:r}}}),{c(){N(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n[0]&2097152&&(i.href=s[83].slug),n[0]&2097152&&(i.classes="portal_preview--"+s[83].slug),n[0]&2097152|n[2]&536870912&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function xt(r){let e,t,s,n=Se(r[80]),i=[];for(let l=0;l<n.length;l+=1)i[l]=Zt(zt(r,n,l));const o=l=>R(i[l],1,1,()=>{i[l]=null});return{c(){e=B("div");for(let l=0;l<i.length;l+=1)i[l].c();t=K(),this.h()},l(l){e=I(l,"DIV",{class:!0});var a=q(e);for(let c=0;c<i.length;c+=1)i[c].l(a);t=z(a),a.forEach(d),this.h()},h(){P(e,"class","portals strength-portals svelte-18cl4p")},m(l,a){v(l,e,a);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null);U(e,t),s=!0},p(l,a){if(a[0]&2097152){n=Se(l[80]);let c;for(c=0;c<n.length;c+=1){const f=zt(l,n,c);i[c]?(i[c].p(f,a),w(i[c],1)):(i[c]=Zt(f),i[c].c(),w(i[c],1),i[c].m(e,t))}for(Q(),c=n.length;c<i.length;c+=1)o(c);Z()}},i(l){if(!s){for(let a=0;a<n.length;a+=1)w(i[a]);s=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)R(i[a]);s=!1},d(l){l&&d(e),bt(i,l)}}}function es(r){let e,t,s;return t=new Ie({props:{on_click:r[46],role:"checkbox","aria-label":"speed booster","aria-checked":r[29],$$slots:{default:[mn]},$$scope:{ctx:r}}}),{c(){e=B("div"),N(t.$$.fragment),this.h()},l(n){e=I(n,"DIV",{class:!0});var i=q(e);X(t.$$.fragment,i),i.forEach(d),this.h()},h(){P(e,"class","portals svelte-18cl4p")},m(n,i){v(n,e,i),L(t,e,null),s=!0},p(n,i){const o={};i[0]&536870912&&(o["aria-checked"]=n[29]),i[0]&536870912|i[2]&536870912&&(o.$$scope={dirty:i,ctx:n}),t.$set(o)},i(n){s||(w(t.$$.fragment,n),s=!0)},o(n){R(t.$$.fragment,n),s=!1},d(n){n&&d(e),W(t)}}}function mn(r){let e,t;return{c(){e=B("div"),t=ue(it),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=q(e);t=he(n,it),n.forEach(d),this.h()},h(){P(e,"class","booster svelte-18cl4p"),ke(e,"disabled",!r[29])},m(s,n){v(s,e,n),U(e,t)},p(s,n){n[0]&536870912&&ke(e,"disabled",!s[29])},d(s){s&&d(e)}}}function ts(r){let e,t,s,n,i,o,l,a;function c(k){r[67](k)}function f(k){r[68](k)}function m(k){r[69](k)}function u(k){r[70](k)}let g={viewportWidth:r[19],viewportHeight:r[15],viewWidth:r[3],viewHeight:r[4],worldWidth:r[5],worldHeight:r[6],speed_booster_enabled:r[29],strengthBoosterEnabled:r[28],strengthBooster1Enabled:r[0],strengthBooster2Enabled:r[1],strengthBooster3Enabled:r[2],cameraUnlocked:r[16],stage:r[11],finish:r[43],enableDomCanvasRenderer:r[33]};r[8]!==void 0&&(g.starshipX=r[8]),r[9]!==void 0&&(g.starshipY=r[9]),r[10]!==void 0&&(g.starshipAngle=r[10]),r[22]!==void 0&&(g.starshipShieldRadius=r[22]),e=new zr({props:g}),$e.push(()=>Qe(e,"starshipX",c)),$e.push(()=>Qe(e,"starshipY",f)),$e.push(()=>Qe(e,"starshipAngle",m)),$e.push(()=>Qe(e,"starshipShieldRadius",u));let h=r[23]&&ss(r);return{c(){N(e.$$.fragment),o=K(),h&&h.c(),l=j()},l(k){X(e.$$.fragment,k),o=z(k),h&&h.l(k),l=j()},m(k,C){L(e,k,C),v(k,o,C),h&&h.m(k,C),v(k,l,C),a=!0},p(k,C){const T={};C[0]&524288&&(T.viewportWidth=k[19]),C[0]&32768&&(T.viewportHeight=k[15]),C[0]&8&&(T.viewWidth=k[3]),C[0]&16&&(T.viewHeight=k[4]),C[0]&32&&(T.worldWidth=k[5]),C[0]&64&&(T.worldHeight=k[6]),C[0]&536870912&&(T.speed_booster_enabled=k[29]),C[0]&268435456&&(T.strengthBoosterEnabled=k[28]),C[0]&1&&(T.strengthBooster1Enabled=k[0]),C[0]&2&&(T.strengthBooster2Enabled=k[1]),C[0]&4&&(T.strengthBooster3Enabled=k[2]),C[0]&65536&&(T.cameraUnlocked=k[16]),C[0]&2048&&(T.stage=k[11]),C[1]&4&&(T.enableDomCanvasRenderer=k[33]),!t&&C[0]&256&&(t=!0,T.starshipX=k[8],Je(()=>t=!1)),!s&&C[0]&512&&(s=!0,T.starshipY=k[9],Je(()=>s=!1)),!n&&C[0]&1024&&(n=!0,T.starshipAngle=k[10],Je(()=>n=!1)),!i&&C[0]&4194304&&(i=!0,T.starshipShieldRadius=k[22],Je(()=>i=!1)),e.$set(T),k[23]?h?(h.p(k,C),C[0]&8388608&&w(h,1)):(h=ss(k),h.c(),w(h,1),h.m(l.parentNode,l)):h&&(Q(),R(h,1,1,()=>{h=null}),Z())},i(k){a||(w(e.$$.fragment,k),w(h),a=!0)},o(k){R(e.$$.fragment,k),R(h),a=!1},d(k){k&&(d(o),d(l)),W(e,k),h&&h.d(k)}}}function ss(r){let e,t,s,n,i;return t=new or({props:{label:"return home",style:"font-size: var(--size_xl9)",$$slots:{default:[wn]},$$scope:{ctx:r}}}),t.$on("click",r[71]),n=new cs({props:{scores:r[31]&&r[36]}}),{c(){e=B("div"),N(t.$$.fragment),s=K(),N(n.$$.fragment),this.h()},l(o){e=I(o,"DIV",{class:!0});var l=q(e);X(t.$$.fragment,l),s=z(l),X(n.$$.fragment,l),l.forEach(d),this.h()},h(){P(e,"class","exit svelte-18cl4p")},m(o,l){v(o,e,l),L(t,e,null),U(e,s),L(n,e,null),i=!0},p(o,l){const a={};l[1]&32|l[2]&536870912&&(a.$$scope={dirty:l,ctx:o}),t.$set(a);const c={};l[1]&33&&(c.scores=o[31]&&o[36]),n.$set(c)},i(o){i||(w(t.$$.fragment,o),w(n.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),R(n.$$.fragment,o),i=!1},d(o){o&&d(e),W(t),W(n)}}}function pn(r){let e;return{c(){e=ue("↩")},l(t){e=he(t,"↩")},m(t,s){v(t,e,s)},p:_e,d(t){t&&d(e)}}}function gn(r){let e;return{c(){e=ue(it)},l(t){e=he(t,it)},m(t,s){v(t,e,s)},p:_e,d(t){t&&d(e)}}}function wn(r){let e,t;function s(o,l){return l[1]&32&&(e=null),e==null&&(e=!!(o[36]&&wt(o[36]))),e?gn:pn}let n=s(r,[-1,-1,-1]),i=n(r);return{c(){i.c(),t=j()},l(o){i.l(o),t=j()},m(o,l){i.m(o,l),v(o,t,l)},p(o,l){n===(n=s(o,l))&&i?i.p(o,l):(i.d(1),i=n(o),i&&(i.c(),i.m(t.parentNode,t)))},d(o){o&&d(t),i.d(o)}}}function bn(r){let e,t;return e=new rn({props:{clock:r[39],exit:r[79],starshipMode:r[7],toggleStarshipMode:r[50],scores:r[12],resetScores:r[12]?r[44]:void 0,importScores:r[45]}}),{c(){N(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,n){L(e,s,n),t=!0},p(s,n){const i={};n[2]&131072&&(i.exit=s[79]),n[0]&128&&(i.starshipMode=s[7]),n[0]&4096&&(i.scores=s[12]),n[0]&4096&&(i.resetScores=s[12]?s[44]:void 0),e.$set(i)},i(s){t||(w(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function kn(r){let e,t,s,n,i,o,l,a,c,f,m,u,g,h,k,C;n=new Ie({props:{href:nt.slug,classes:"portal_preview--"+nt.slug,$$slots:{default:[nn]},$$scope:{ctx:r}}});let T=r[12]&&jt(r),O=Se(r[41]),y=[];for(let _=0;_<O.length;_+=1)y[_]=$t(Vt(r,O,_));const G=_=>R(y[_],1,1,()=>{y[_]=null});let S=r[17]&&Jt(r),A=r[13]&&Qt(r),D=r[18]&&es(r),Y=r[11]&&ts(r);return g=new lr({props:{$$slots:{default:[bn,({exit:_})=>({79:_}),({exit:_})=>[0,0,_?131072:0]]},$$scope:{ctx:r}}}),{c(){e=B("div"),t=B("nav"),s=B("header"),N(n.$$.fragment),i=K(),T&&T.c(),o=K();for(let _=0;_<y.length;_+=1)y[_].c();l=K(),S&&S.c(),a=K(),A&&A.c(),c=K(),D&&D.c(),m=K(),Y&&Y.c(),u=K(),N(g.$$.fragment),this.h()},l(_){e=I(_,"DIV",{class:!0});var p=q(e);t=I(p,"NAV",{class:!0});var M=q(t);s=I(M,"HEADER",{class:!0});var $=q(s);X(n.$$.fragment,$),$.forEach(d),i=z(M),T&&T.l(M),o=z(M);for(let H=0;H<y.length;H+=1)y[H].l(M);l=z(M),S&&S.l(M),a=z(M),A&&A.l(M),c=z(M),D&&D.l(M),M.forEach(d),m=z(p),Y&&Y.l(p),p.forEach(d),u=z(_),X(g.$$.fragment,_),this.h()},h(){P(s,"class","portals svelte-18cl4p"),P(t,"class","svelte-18cl4p"),ns(()=>r[66].call(t)),me(t,"transform",r[7]?`translate3d(${r[26]}px, ${r[25]}px,	0) scale3d(${r[27]}, ${r[27]}, ${r[27]})	rotate(${r[32]}rad)`:"none"),me(t,"transition",r[35]?"none":`transform ${r[24]}ms ease-in-out`),P(e,"class","home svelte-18cl4p"),ke(e,"starship-mode",r[7]),ke(e,"starship-ready",r[35]),ke(e,"starship-transitioning",r[20])},m(_,p){v(_,e,p),U(e,t),U(t,s),L(n,s,null),U(t,i),T&&T.m(t,null),U(t,o);for(let M=0;M<y.length;M+=1)y[M]&&y[M].m(t,null);U(t,l),S&&S.m(t,null),U(t,a),A&&A.m(t,null),U(t,c),D&&D.m(t,null),f=As(t,r[66].bind(t)),U(e,m),Y&&Y.m(e,null),v(_,u,p),L(g,_,p),h=!0,k||(C=lt(window,"keydown",r[52]),k=!0)},p(_,p){const M={};if(p[2]&536870912&&(M.$$scope={dirty:p,ctx:_}),n.$set(M),_[12]?T?(T.p(_,p),p[0]&4096&&w(T,1)):(T=jt(_),T.c(),w(T,1),T.m(t,o)):T&&(Q(),R(T,1,1,()=>{T=null}),Z()),p[1]&1050112){O=Se(_[41]);let H;for(H=0;H<O.length;H+=1){const V=Vt(_,O,H);y[H]?(y[H].p(V,p),w(y[H],1)):(y[H]=$t(V),y[H].c(),w(y[H],1),y[H].m(t,l))}for(Q(),H=O.length;H<y.length;H+=1)G(H);Z()}_[17]?S?(S.p(_,p),p[0]&131072&&w(S,1)):(S=Jt(_),S.c(),w(S,1),S.m(t,a)):S&&(Q(),R(S,1,1,()=>{S=null}),Z()),_[13]?A?(A.p(_,p),p[0]&8192&&w(A,1)):(A=Qt(_),A.c(),w(A,1),A.m(t,c)):A&&(Q(),R(A,1,1,()=>{A=null}),Z()),_[18]?D?(D.p(_,p),p[0]&262144&&w(D,1)):(D=es(_),D.c(),w(D,1),D.m(t,null)):D&&(Q(),R(D,1,1,()=>{D=null}),Z()),p[0]&234881152|p[1]&2&&me(t,"transform",_[7]?`translate3d(${_[26]}px, ${_[25]}px,	0) scale3d(${_[27]}, ${_[27]}, ${_[27]})	rotate(${_[32]}rad)`:"none"),p[0]&16777216|p[1]&16&&me(t,"transition",_[35]?"none":`transform ${_[24]}ms ease-in-out`),_[11]?Y?(Y.p(_,p),p[0]&2048&&w(Y,1)):(Y=ts(_),Y.c(),w(Y,1),Y.m(e,null)):Y&&(Q(),R(Y,1,1,()=>{Y=null}),Z()),(!h||p[0]&128)&&ke(e,"starship-mode",_[7]),(!h||p[1]&16)&&ke(e,"starship-ready",_[35]),(!h||p[0]&1048576)&&ke(e,"starship-transitioning",_[20]);const $={};p[0]&4224|p[2]&537001984&&($.$$scope={dirty:p,ctx:_}),g.$set($)},i(_){if(!h){w(n.$$.fragment,_),w(T);for(let p=0;p<O.length;p+=1)w(y[p]);w(S),w(A),w(D),w(Y),w(g.$$.fragment,_),h=!0}},o(_){R(n.$$.fragment,_),R(T),y=y.filter(Boolean);for(let p=0;p<y.length;p+=1)R(y[p]);R(S),R(A),R(D),R(Y),R(g.$$.fragment,_),h=!1},d(_){_&&(d(e),d(u)),W(n),T&&T.d(),bt(y,_),S&&S.d(),A&&A.d(),D&&D.d(),f(),Y&&Y.d(),W(g,_),k=!1,C()}}}const rs=500,dt="cpg_home_scores",mt="cpg_speed_booster_toggled",it="🙌",pt="cpg_strength_booster_toggled";function Sn(r,e,t){let s,n,i,o,l,a,c,f,m,u,g,h,k,C,T,O,y,G,S,A,D,Y,_,p,M=_e,$=()=>(M(),M=gt(g,b=>t(36,p=b)),g),H,V=_e,se=()=>(V(),V=gt(c,b=>t(61,H=b)),c),F,Ee,ze;r.$$.on_destroy.push(()=>M()),r.$$.on_destroy.push(()=>V());const Ye=ar(),Ve=Gs();De(r,Ve,b=>t(63,Ee=b));const pe=at();De(r,pe,b=>t(37,ze=b));let ye=He(At,!1),E=He(Ht,!1),ne=He(Dt,!1);const ie={width:2560,height:1440};let oe,le,ge,ve;const Et=Symbol(),hs=[[js],[qs],[$s,Js,Qs],[Et,Zs,xs]];let vt;const Rt=sr();De(r,Rt,b=>t(62,F=b));let Ue=0,ae=!1,ce=0,Pe=0,Ne=0,Me=0,ct=0,x=null;const _s=()=>{t(11,x=new Fr({exit:b=>console.log("exited stage",b),worldWidth:ge,worldHeight:ve,viewWidth:oe,viewHeight:le,viewportWidth:s,viewportHeight:n,data:{freezeCamera:!A}})),J||(Oe=Xr(x),je(Oe))},ds=()=>{x&&(x.destroy(),t(11,x=null))};let J=He(dt,void 0,b=>{if(!b||typeof b.crew_rescued_at_once_count!="number"||isNaN(b.crew_rescued_at_once_count)||!Array.isArray(b.crew)||!b.crew.every(te=>typeof te=="boolean"))throw Error()}),Oe;const je=b=>is(b,J)?!1:(de(dt,b),t(12,J=b),!0);let Le=!1;const Tt=async b=>{if(Le)return;if(!b)return We();t(23,Le=!0);const te=Wr(b,J);je(te)&&(!h&&wt(te)&&yt(),!C&&Yt(te)&&await ut())},ft=()=>{confirm("delete all scores?")&&(de(dt,void 0),t(12,J=void 0),de(mt,!1),t(55,Ce=!1),de(pt,!1),t(13,Re=!1),de(At,!1),t(0,ye=!1),de(Ht,!1),t(1,E=!1),de(Dt,!1),t(2,ne=!1))},ms=()=>{var te;const b=(te=prompt("import scores",J?JSON.stringify(J):Oe?JSON.stringify(Oe):void 0))==null?void 0:te.trim();if(b==="")Oe?je(Oe):ft();else try{const we=b===void 0?void 0:Pr(b);we&&je(we)}catch(we){alert("failed to parse scores: "+we)}};let Ce=He(mt,!1);const yt=()=>{t(55,Ce=!Ce)};let Re=He(pt,!1);const ut=async()=>{t(13,Re=!Re),Re&&await Fs()};let Ae;const qe=async()=>{ae||(console.log("enterStarshipMode"),t(23,Le=!1),t(10,Me=0),t(7,ae=!0),pe.pause(),pe.reset(),Ye.close(),t(54,ce++,ce),await ot(o+50),t(54,ce--,ce))},We=async()=>{ae&&(console.log("exitStarshipMode"),t(10,Me=0),t(7,ae=!1),pe.resume(),Ye.close(),t(54,ce++,ce),await ot(o+50),t(54,ce--,ce),t(53,Ue++,Ue))},Mt=()=>ae?We():qe(),ps=()=>Ye.open(),gs=async b=>{b.key===" "&&!b.ctrlKey&&Ct(b.currentTarget)?(be(b),await Mt()):b.key==="r"&&!b.ctrlKey&&Ct(b.currentTarget)?(be(b),We(),await Hs(),await qe()):b.key==="F2"?(be(b),b.ctrlKey?(ft(),t(23,Le=!1)):ae&&(pe.pause(),p&&await Tt(p))):b.key==="1"&&b.ctrlKey?(be(b),await xe(Ze("Spacey Intro"))):b.key==="2"&&b.ctrlKey?(be(b),await xe(Ze("Spacey Outro"))):b.key==="3"&&b.ctrlKey?(be(b),await xe(Ze("Futuristic 4"))):b.key==="4"&&b.ctrlKey&&(be(b),await xe(Ze("Futuristic 1")))},ws=async()=>{ae||await qe()},bs=()=>void ut();function ks(){Ae=this.clientHeight,t(14,Ae)}function Ss(b){Pe=b,t(8,Pe)}function Es(b){Ne=b,t(9,Ne)}function vs(b){Me=b,t(10,Me)}function Rs(b){ct=b,t(22,ct)}const Ts=()=>We();return r.$$.update=()=>{if(r.$$.dirty[2]&2&&t(19,{width:s,height:n}=Ee,s,(t(15,n),t(63,Ee))),r.$$.dirty[0]&4096&&t(58,k=!!J&&Nr(J)),r.$$.dirty[1]&134217728&&t(16,A=k),r.$$.dirty[0]&622712)if(A){t(3,oe=s),t(4,le=n);const b=ie.width,te=ie.height,we=b/oe,ht=te/le;ht>1&&ht>we?(t(6,ve=te),t(5,ge=oe*ht|0)):we>1?(t(5,ge=b),t(6,ve=le*we|0)):(t(5,ge=oe),t(6,ve=le))}else{t(5,ge=ie.width),t(6,ve=ie.height);const b=ge/ve,te=s/n;t(3,oe=s*Math.min(1,b/te)|0),t(4,le=n*Math.min(1,te/b)|0)}r.$$.dirty[0]&40&&t(56,i=oe/ge),r.$$.dirty[0]&7&&t(21,vt=[[...E?[hr]:et,...ye?[Ks]:et,zs,...ye?[Vs]:et,...ne?[pr]:et]]),r.$$.dirty[0]&4096|r.$$.dirty[1]&4194304&&t(24,o=J||Ue>1?rs:rs*1),r.$$.dirty[1]&8388608&&t(20,l=ce>0),r.$$.dirty[0]&1048704&&t(35,a=ae&&!l),r.$$.dirty[0]&128&&(ds(),ae&&_s()),r.$$.dirty[0]&2048&&se(t(34,c=x==null?void 0:x.camera)),r.$$.dirty[0]&2048&&t(57,f=x==null?void 0:x.player),r.$$.dirty[2]&1&&t(33,m=F.dev_mode),r.$$.dirty[0]&1024&&t(32,u=Me+Math.PI/2),r.$$.dirty[0]&2048&&$(t(31,g=x==null?void 0:x.scores)),r.$$.dirty[0]&4096&&t(60,h=!!J&&wt(J)),r.$$.dirty[0]&4096&&t(59,C=!!J&&Yt(J)),r.$$.dirty[0]&4096&&t(30,T=!!J&&Lr(J)),r.$$.dirty[1]&16777216&&de(mt,!!Ce),r.$$.dirty[1]&536870912&&t(18,O=h),r.$$.dirty[0]&262144|r.$$.dirty[1]&16777216&&t(29,y=O&&Ce),r.$$.dirty[0]&8192&&de(pt,!!Re),r.$$.dirty[1]&268435456&&t(17,G=C),r.$$.dirty[0]&139264&&t(28,S=G&&Re),r.$$.dirty[0]&16384|r.$$.dirty[1]&100663296&&t(27,D=f?f.radius*2/Ae*i:1),r.$$.dirty[0]&256|r.$$.dirty[1]&1107296256&&t(26,Y=(H?(Pe-H.x)*H.scale:Pe)*i),r.$$.dirty[0]&49664|r.$$.dirty[1]&1107296256&&t(25,_=H?(Ne-H.y)*H.scale*i-(Ae-n)/2:Ne-(Ae-n)/2)},[ye,E,ne,oe,le,ge,ve,ae,Pe,Ne,Me,x,J,Re,Ae,n,A,G,O,s,l,vt,ct,Le,o,_,Y,D,S,y,T,g,u,m,c,a,p,ze,Ve,pe,Et,hs,Rt,Tt,ft,ms,yt,ut,qe,We,Mt,ps,gs,Ue,ce,Ce,i,f,k,C,h,H,F,Ee,ws,bs,ks,Ss,Es,vs,Rs,Ts]}class Zn extends Ge{constructor(e){super(),Ke(this,e,Sn,kn,Fe,{},null,[-1,-1,-1])}}export{Zn as component};
