import{n as me,e as E,s as B,b as k,l as I,c as L,d,m as $,_ as Oe,p as Me,i as P,o as b,T as Je,r as pe,U as Ge,V as We,W as Xe,x as Ze,y as je,I as x,J as Ne,A as Ye,a as ue,g as xe,F as ea}from"../chunks/scheduler.CGmLp2a4.js";import{S as ge,i as _e,g as Ee,e as ke,t as v,b as w,c as N,a as S,m as q,d as O}from"../chunks/index.0VfkS216.js";import{r as m}from"../chunks/random.BCioE_zI.js";import{t as aa}from"../chunks/images.BCEEXbqT.js";import{l as sa}from"../chunks/songs.BcB-hfLc.js";import{e as ee,u as Se,o as ze,d as ta}from"../chunks/each.af2GrV1H.js";import{p as Ae,a as na}from"../chunks/play_song.-YVw_H94.js";const la=s=>{const a=Te.get(s);if(!a)throw Error("Unknown stage: "+s);return a},y=s=>{const a=ia.get(s);if(!a)throw Error("Unknown stage: "+s);return a},Ke=s=>y(s.slice(0,-1)),ia=new Map([{name:"0",image:"heic0506a"},{name:"1",image:"opo0501a"},{name:"2",image:"opo0415a"},{name:"3",image:"heic1913c"},{name:"4",image:"heic0910i"},{name:"5",image:"heic2002a"},{name:"6",image:"heic1712a"},{name:"7",image:"heic1712a"},{name:"8",image:"heic0817a"},{name:"9",image:"heic1302a"},{name:"10",image:"heic1107a"}].map(s=>(s.image_meta=aa(s.image),[s.name,s]))),Qe=new Map([{name:"0a",phase:0,title:"Adventure",song:"Adventure",image:"heic0506a"},{name:"0b",phase:0,title:"Adventure (Metal Version)",song:"Adventure (Metal Version)",image:"heic0506a"},{name:"0c",phase:1,title:"Traveler",song:"Traveler",image:"heic0506a"},{name:"0d",phase:1,title:"Adventures of Flying Jack",song:"Adventures of Flying Jack",image:"heic0506a"},{name:"1a",phase:0,title:"Piña Colada",song:"Piña Colada",image:"opo0501a"},{name:"1b",phase:0,title:"Chronos",song:"Chronos",image:"opo0501a"},{name:"1c",phase:1,title:"Mint Condition",song:"Mint Condition",image:"opo0501a"},{name:"1d",phase:1,title:"Hit n Smash",song:"Hit n Smash",image:"opo0501a"},{name:"2a",phase:0,title:"Flutter",song:"Flutter",image:"opo0415a"},{name:"2b",phase:0,title:"Chemical X",song:"Chemical X",image:"opo0415a"},{name:"2c",phase:1,title:"Frost",song:"Frost",image:"opo0415a"},{name:"2d",phase:1,title:"Dominant",song:"Dominant",image:"opo0415a"},{name:"3a",phase:0,title:"Blacksmith",song:"Blacksmith",image:"heic1913c"},{name:"3b",phase:0,title:"The Crown",song:"The Crown",image:"heic1913c"},{name:"3c",phase:1,title:"Bhangra Bass",song:"Bhangra Bass",image:"heic1913c"},{name:"3d",phase:1,title:"Spacebuckler",song:"Spacebuckler",image:"heic1913c"},{name:"4a",phase:0,title:"Brewing Potions",song:"Brewing Potions",image:"heic0910i"},{name:"4b",phase:0,title:"He's a Parrot",song:"He's a Parrot",image:"heic0910i"},{name:"4c",phase:1,title:"Celebration",song:"Celebration",image:"heic0910i"},{name:"4d",phase:1,title:"Forest Night",song:"Forest Night",image:"heic0910i"},{name:"4e",phase:1,title:"Land Ho",song:"Land Ho",image:"heic0910i"},{name:"5a",phase:0,title:"Be Chillin",song:"Be Chillin",image:"heic2002a"},{name:"5b",phase:0,title:"Painting Room",song:"Painting Room",image:"heic2002a"},{name:"5c",phase:1,title:"VHS Heroes",song:"VHS Heroes",image:"heic2002a"},{name:"5d",phase:1,title:"Journey of Hope",song:"Journey of Hope",image:"heic2002a"},{name:"6a",phase:0,title:"Grid",song:"Grid",image:"heic1712a"},{name:"6b",phase:0,title:"La Citadelle",song:"La Citadelle",image:"heic1712a"},{name:"6c",phase:1,title:"Rush",song:"Rush",image:"heic1712a"},{name:"6d",phase:1,title:"Inteficial Artelligence",song:"Inteficial Artelligence",image:"heic1712a"},{name:"7a",phase:0,title:"Jotunheim",song:"Jotunheim",image:"heic1712a"},{name:"7b",phase:0,title:"Bleu",song:"Bleu",image:"heic1712a"},{name:"7d",phase:1,title:"Flynyrd Mynyrd",song:"Flynyrd Mynyrd",image:"heic1712a"},{name:"7c",phase:1,title:"Desert Fox",song:"Desert Fox",image:"heic1712a"},{name:"8a",phase:0,title:"The Expanse",song:"The Expanse",image:"heic0817a"},{name:"8b",phase:0,title:"Facing Storm",song:"Facing Storm",image:"heic0817a"},{name:"8d",phase:1,title:"Catharsis",song:"Catharsis",image:"heic0817a"},{name:"8c",phase:1,title:"Lonely Mountain",song:"Lonely Mountain",image:"heic0817a"},{name:"9a",phase:0,title:"Fireworks",song:"Fireworks",image:"heic1302a"},{name:"9b",phase:0,title:"The Desert",song:"The Desert",image:"heic1302a"},{name:"9d",phase:1,title:"Alive",song:"Alive (Instrumental)",image:"heic1302a"},{name:"9c",phase:1,title:"Assassin",song:"Assassin",image:"heic1302a"},{name:"10a",phase:0,title:"Shining Stars",song:"Shining Stars",image:"heic1107a"},{name:"10c",phase:0,title:"Life",song:"Life",image:"heic1107a"},{name:"10b",phase:0,title:"Nomadic Sunset",song:"Nomadic Sunset",image:"heic1107a"},{name:"10d",phase:1,title:"Chemical Z",song:"Chemical Z",image:"heic1107a"},{name:"10e",phase:1,title:"Dream",song:"Dream",image:"heic1107a"},{name:"10f",phase:1,title:"Terra Mystica",song:"Terra Mystica",image:"heic1107a"}].map(s=>(s.song=sa(s.song),s.stage=Ke(s.name),[s.name,s]))),Te=new Map;for(const s of Qe.values()){const a=Ke(s.name);let t=Te.get(a.name);t||Te.set(a.name,t=[]),t.push(s)}const oa=s=>typeof s.data=="function"?{...s,data:s.data()}:s,Ie=[{name:"sugar_pure",data:{sequence:["0a","1a","2a","3a","4a","4c","5a","6a","7a","8a","9a","9c","10a","10d"]}},{name:"sugar_balanced",data:{sequence:["0a","0c","1a","1c","2a","2c","3a","3c","4a","4d","5a","5c","6a","6c","7a","7d","8a","8d","9a","9d","10c","10e"]}},{name:"salt_pure",data:{sequence:["0b","1b","2b","3b","4b","4e","5b","6b","7b","8b","9b","9c","10b","10f"]}},{name:"salt_balanced",data:{sequence:["0b","0d","1b","1d","2b","2d","3b","3d","4b",m(["4d","4e"]),"5b","5d","6b","6d","7b","7c","8b","8c","9b","9c","10b",m(["10e","10f"])]}},{name:"random_pure",data:()=>({sequence:[m(["0a","0b"]),m(["1a","1b"]),m(["2a","2b"]),m(["3a","3b"]),m([["4a","4d"],["4b","4e"]]),m(["5a","5b"]),m(["6a","6b"]),m(["7a","7b"]),m(["8a","8b"]),m([["9a","9c","10a","10d"],["9b","9c","10b","10f"]])].flat()})},{name:"random_balanced",data:()=>({sequence:[m(["0a","0b"]),m(["0c","0d"]),m(["1a","1b"]),m(["1c","1d"]),m(["2a","2b"]),m(["2c","2d"]),m(["3a","3b"]),m(["3c","3d"]),m([["4a","4d"],["4b","4c","4e"]]),m(["5a","5b"]),m(["5c","5d"]),m(["6a","6b"]),m(["6c","6d"]),m(["7a","7b"]),m(["7c","7d"]),m([["8a","8d"],["8b","8c"]]),m([["9a","9c","10a","10d"],["9a","9d","10c","10e"],["9b","9c","10b","10f"]])].flat()})},{name:"random_random",data:()=>{const s=[];let a=0,t=0;const e=l=>{l&&(l.endsWith("b")?a++:l.endsWith("c")&&t++,s.push(l))},n=l=>{Array.isArray(l)?l.forEach(e):e(l)};return n(m(["0a","0b"])),n(m(["0c","0d"])),n(m(["1a","1b"])),n(m(["1c","1d"])),n(m(["2a","2b"])),n(m(["2c","2d"])),n(m(["3a","3b"])),n(m([t>ra?m(["3c","3d"]):null,null])),n(m([["4a","4d"],["4b",t>ca?m(["4c",null]):null,"4e"]])),n(m(["5a","5b"])),n(m(["5c","5d"])),n(m(["6a","6b"])),n(m(["6c","6d"])),n(m(["7a","7b"])),n(m(["7c","7d",null])),n(m(["8a","8b"])),n(m(["8c","8d",null])),n(m([["9a","9c","10a","10d"],t>=fa&&a<=ha?["9a","9d","10c","10e"]:null,["9b","9c","10b","10f"]].filter(Boolean))),{sequence:s}}}];new Map(Ie.map(s=>[s.name,s]));const M=(s,a)=>s.data.sequence.includes(a.name),ra=1,ca=1,fa=4,ha=7;function De(s,a,t){const e=s.slice();return e[6]=a[t],e}const ua=s=>({phase:s&2,phases:s&8}),Fe=s=>({phase:s[6],phases:s[3]});function Be(s,a,t){const e=s.slice();return e[6]=a[t],e}const ma=s=>({phase:s&4,phases:s&8}),Le=s=>({phase:s[6],phases:s[3]});function Pe(s,a){let t,e;const n=a[5].default,l=Je(n,a,a[4],Le);return{key:s,first:null,c(){t=pe(),l&&l.c(),this.h()},l(c){t=pe(),l&&l.l(c),this.h()},h(){this.first=t},m(c,r){P(c,t,r),l&&l.m(c,r),e=!0},p(c,r){a=c,l&&l.p&&(!e||r&28)&&Ge(l,n,a,a[4],e?Xe(n,a[4],r,ma):We(a[4]),Le)},i(c){e||(v(l,c),e=!0)},o(c){w(l,c),e=!1},d(c){c&&d(t),l&&l.d(c)}}}function Ve(s){let a,t=[],e=new Map,n,l=ee(s[1]);const c=r=>r[6];for(let r=0;r<l.length;r+=1){let o=De(s,l,r),f=c(o);e.set(f,t[r]=ye(f,o))}return{c(){a=E("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){a=k(r,"DIV",{class:!0});var o=I(a);for(let f=0;f<t.length;f+=1)t[f].l(o);o.forEach(d),this.h()},h(){$(a,"class","secondary-phases svelte-1lvtadu")},m(r,o){P(r,a,o);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(a,null);n=!0},p(r,o){o&26&&(l=ee(r[1]),Ee(),t=Se(t,o,c,1,r,l,e,a,ze,ye,null,De),ke())},i(r){if(!n){for(let o=0;o<l.length;o+=1)v(t[o]);n=!0}},o(r){for(let o=0;o<t.length;o+=1)w(t[o]);n=!1},d(r){r&&d(a);for(let o=0;o<t.length;o+=1)t[o].d()}}}function ye(s,a){let t,e;const n=a[5].default,l=Je(n,a,a[4],Fe);return{key:s,first:null,c(){t=pe(),l&&l.c(),this.h()},l(c){t=pe(),l&&l.l(c),this.h()},h(){this.first=t},m(c,r){P(c,t,r),l&&l.m(c,r),e=!0},p(c,r){a=c,l&&l.p&&(!e||r&26)&&Ge(l,n,a,a[4],e?Xe(n,a[4],r,ua):We(a[4]),Fe)},i(c){e||(v(l,c),e=!0)},o(c){w(l,c),e=!1},d(c){c&&d(t),l&&l.d(c)}}}function ga(s){let a,t,e,n,l,c,r,o=[],f=new Map,h,g=`${s[0].image_meta.thumbnail.height*2}px`,T,F=ee(s[2]);const A=p=>p[6];for(let p=0;p<F.length;p+=1){let _=Be(s,F,p),D=A(_);f.set(D,o[p]=Pe(D,_))}let C=s[1].length&&Ve(s);return{c(){a=E("div"),t=E("img"),l=B(),c=E("div"),r=E("div");for(let p=0;p<o.length;p+=1)o[p].c();h=B(),C&&C.c(),this.h()},l(p){a=k(p,"DIV",{class:!0});var _=I(a);t=k(_,"IMG",{class:!0,src:!0,alt:!0}),l=L(_),c=k(_,"DIV",{class:!0});var D=I(c);r=k(D,"DIV",{class:!0});var R=I(r);for(let V=0;V<o.length;V+=1)o[V].l(R);R.forEach(d),h=L(D),C&&C.l(D),D.forEach(d),_.forEach(d),this.h()},h(){$(t,"class","pixelated svelte-1lvtadu"),Oe(t.src,e=s[0].image_meta.thumbnail.url)||$(t,"src",e),$(t,"alt",n=s[0].image_meta.title),$(r,"class","main-phases svelte-1lvtadu"),$(c,"class","phases svelte-1lvtadu"),$(a,"class","level svelte-1lvtadu"),Me(a,"height",g)},m(p,_){P(p,a,_),b(a,t),b(a,l),b(a,c),b(c,r);for(let D=0;D<o.length;D+=1)o[D]&&o[D].m(r,null);b(c,h),C&&C.m(c,null),T=!0},p(p,[_]){(!T||_&1&&!Oe(t.src,e=p[0].image_meta.thumbnail.url))&&$(t,"src",e),(!T||_&1&&n!==(n=p[0].image_meta.title))&&$(t,"alt",n),_&28&&(F=ee(p[2]),Ee(),o=Se(o,_,A,1,p,F,f,r,ze,Pe,null,Be),ke()),p[1].length?C?(C.p(p,_),_&2&&v(C,1)):(C=Ve(p),C.c(),v(C,1),C.m(c,null)):C&&(Ee(),w(C,1,1,()=>{C=null}),ke()),_&1&&g!==(g=`${p[0].image_meta.thumbnail.height*2}px`)&&Me(a,"height",g)},i(p){if(!T){for(let _=0;_<F.length;_+=1)v(o[_]);v(C),T=!0}},o(p){for(let _=0;_<o.length;_+=1)w(o[_]);w(C),T=!1},d(p){p&&d(a);for(let _=0;_<o.length;_+=1)o[_].d();C&&C.d()}}}function _a(s,a,t){let e,n,l,{$$slots:c={},$$scope:r}=a,{level:o}=a;return s.$$set=f=>{"level"in f&&t(0,o=f.level),"$$scope"in f&&t(4,r=f.$$scope)},s.$$.update=()=>{if(s.$$.dirty&1&&t(3,e=la(o.name)),s.$$.dirty&8&&t(2,n=e.filter(f=>f.phase===0)),s.$$.dirty&8&&t(1,l=e.filter(f=>f.phase===1)),s.$$.dirty&14&&e.length!==n.length+l.length)throw Error("There are some unused phases in Level.svelte")},[o,l,n,e,r,c]}class H extends ge{constructor(a){super(),_e(this,a,_a,ga,me,{level:0})}}function da(s){let a,t,e,n=s[0].title+"",l,c,r,o;return{c(){a=E("div"),t=E("button"),e=E("div"),l=Ze(n),this.h()},l(f){a=k(f,"DIV",{class:!0,title:!0});var h=I(a);t=k(h,"BUTTON",{class:!0});var g=I(t);e=k(g,"DIV",{class:!0});var T=I(e);l=je(T,n),T.forEach(d),g.forEach(d),h.forEach(d),this.h()},h(){$(e,"class","title svelte-uobndo"),t.disabled=s[2],$(t,"class","svelte-uobndo"),x(t,"selected",s[1]),x(t,"buttonish",!s[2]),$(a,"class","phase svelte-uobndo"),$(a,"title",c="phase "+s[0].name)},m(f,h){P(f,a,h),b(a,t),b(t,e),b(e,l),r||(o=Ne(t,"click",s[4]),r=!0)},p(f,[h]){h&1&&n!==(n=f[0].title+"")&&Ye(l,n),h&4&&(t.disabled=f[2]),h&2&&x(t,"selected",f[1]),h&4&&x(t,"buttonish",!f[2]),h&1&&c!==(c="phase "+f[0].name)&&$(a,"title",c)},i:ue,o:ue,d(f){f&&d(a),r=!1,o()}}}function pa(s,a,t){let{phase:e}=a,{selected:n}=a,{disabled:l}=a,{select_phase:c}=a;const r=()=>{c(e)};return s.$$set=o=>{"phase"in o&&t(0,e=o.phase),"selected"in o&&t(1,n=o.selected),"disabled"in o&&t(2,l=o.disabled),"select_phase"in o&&t(3,c=o.select_phase)},[e,n,l,c,r]}class U extends ge{constructor(a){super(),_e(this,a,pa,da,me,{phase:0,selected:1,disabled:2,select_phase:3})}}function He(s,a,t){const e=s.slice();return e[4]=a[t],e}function Ue(s,a){let t,e,n=a[4].name+"",l,c,r,o;function f(){return a[3](a[4])}return{key:s,first:null,c(){t=E("li"),e=E("button"),l=Ze(n),c=B(),this.h()},l(h){t=k(h,"LI",{role:!0});var g=I(t);e=k(g,"BUTTON",{type:!0,class:!0});var T=I(e);l=je(T,n),T.forEach(d),c=L(g),g.forEach(d),this.h()},h(){$(e,"type","button"),$(e,"class","svelte-fer4jh"),x(e,"selected",a[4]===a[0]),$(t,"role","none"),this.first=t},m(h,g){P(h,t,g),b(t,e),b(e,l),b(t,c),r||(o=Ne(e,"click",f),r=!0)},p(h,g){a=h,g&1&&x(e,"selected",a[4]===a[0])},d(h){h&&d(t),r=!1,o()}}}function Re(s){let a,t="cancel",e,n;return{c(){a=E("button"),a.textContent=t,this.h()},l(l){a=k(l,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),xe(a)!=="svelte-1iqgf8t"&&(a.textContent=t),this.h()},h(){$(a,"type","button"),$(a,"class","svelte-fer4jh")},m(l,c){P(l,a,c),e||(n=Ne(a,"click",function(){ea(s[2])&&s[2].apply(this,arguments)}),e=!0)},p(l,c){s=l},d(l){l&&d(a),e=!1,n()}}}function $a(s){let a,t=[],e=new Map,n,l,c=ee(Ie);const r=f=>f[4];for(let f=0;f<c.length;f+=1){let h=He(s,c,f),g=r(h);e.set(g,t[f]=Ue(g,h))}let o=s[0]&&Re(s);return{c(){a=E("ul");for(let f=0;f<t.length;f+=1)t[f].c();n=B(),l=E("div"),o&&o.c(),this.h()},l(f){a=k(f,"UL",{class:!0});var h=I(a);for(let T=0;T<t.length;T+=1)t[T].l(h);h.forEach(d),n=L(f),l=k(f,"DIV",{});var g=I(l);o&&o.l(g),g.forEach(d),this.h()},h(){$(a,"class","svelte-fer4jh")},m(f,h){P(f,a,h);for(let g=0;g<t.length;g+=1)t[g]&&t[g].m(a,null);P(f,n,h),P(f,l,h),o&&o.m(l,null)},p(f,[h]){h&3&&(c=ee(Ie),t=Se(t,h,r,1,f,c,e,a,ta,Ue,null,He)),f[0]?o?o.p(f,h):(o=Re(f),o.c(),o.m(l,null)):o&&(o.d(1),o=null)},i:ue,o:ue,d(f){f&&(d(a),d(n),d(l));for(let h=0;h<t.length;h+=1)t[h].d();o&&o.d()}}}function ba(s,a,t){let{selected_phase_sequence_or_creator:e=null}=a,{play_phase_sequence:n}=a,{cancel:l}=a;const c=r=>n(r);return s.$$set=r=>{"selected_phase_sequence_or_creator"in r&&t(0,e=r.selected_phase_sequence_or_creator),"play_phase_sequence"in r&&t(1,n=r.play_phase_sequence),"cancel"in r&&t(2,l=r.cancel)},[e,n,l,c]}class va extends ge{constructor(a){super(),_e(this,a,ba,$a,me,{selected_phase_sequence_or_creator:0,play_phase_sequence:1,cancel:2})}}function wa(s){let a,t;return a=new U({props:{phase:s[7],select_phase:s[5],selected:s[7]===s[0],disabled:!!s[2]&&!M(s[2],s[7])}}),{c(){N(a.$$.fragment)},l(e){S(a.$$.fragment,e)},m(e,n){q(a,e,n),t=!0},p(e,n){const l={};n&128&&(l.phase=e[7]),n&129&&(l.selected=e[7]===e[0]),n&132&&(l.disabled=!!e[2]&&!M(e[2],e[7])),a.$set(l)},i(e){t||(v(a.$$.fragment,e),t=!0)},o(e){w(a.$$.fragment,e),t=!1},d(e){O(a,e)}}}function Ca(s){let a,t;return a=new U({props:{phase:s[7],select_phase:s[5],selected:s[7]===s[0],disabled:!!s[2]&&!M(s[2],s[7])}}),{c(){N(a.$$.fragment)},l(e){S(a.$$.fragment,e)},m(e,n){q(a,e,n),t=!0},p(e,n){const l={};n&128&&(l.phase=e[7]),n&129&&(l.selected=e[7]===e[0]),n&132&&(l.disabled=!!e[2]&&!M(e[2],e[7])),a.$set(l)},i(e){t||(v(a.$$.fragment,e),t=!0)},o(e){w(a.$$.fragment,e),t=!1},d(e){O(a,e)}}}function Ea(s){let a,t;return a=new U({props:{phase:s[7],select_phase:s[5],selected:s[7]===s[0],disabled:!!s[2]&&!M(s[2],s[7])}}),{c(){N(a.$$.fragment)},l(e){S(a.$$.fragment,e)},m(e,n){q(a,e,n),t=!0},p(e,n){const l={};n&128&&(l.phase=e[7]),n&129&&(l.selected=e[7]===e[0]),n&132&&(l.disabled=!!e[2]&&!M(e[2],e[7])),a.$set(l)},i(e){t||(v(a.$$.fragment,e),t=!0)},o(e){w(a.$$.fragment,e),t=!1},d(e){O(a,e)}}}function ka(s){let a,t;return a=new U({props:{phase:s[7],select_phase:s[5],selected:s[7]===s[0],disabled:!!s[2]&&!M(s[2],s[7])}}),{c(){N(a.$$.fragment)},l(e){S(a.$$.fragment,e)},m(e,n){q(a,e,n),t=!0},p(e,n){const l={};n&128&&(l.phase=e[7]),n&129&&(l.selected=e[7]===e[0]),n&132&&(l.disabled=!!e[2]&&!M(e[2],e[7])),a.$set(l)},i(e){t||(v(a.$$.fragment,e),t=!0)},o(e){w(a.$$.fragment,e),t=!1},d(e){O(a,e)}}}function Ta(s){let a,t;return a=new U({props:{phase:s[7],select_phase:s[5],selected:s[7]===s[0],disabled:!!s[2]&&!M(s[2],s[7])}}),{c(){N(a.$$.fragment)},l(e){S(a.$$.fragment,e)},m(e,n){q(a,e,n),t=!0},p(e,n){const l={};n&128&&(l.phase=e[7]),n&129&&(l.selected=e[7]===e[0]),n&132&&(l.disabled=!!e[2]&&!M(e[2],e[7])),a.$set(l)},i(e){t||(v(a.$$.fragment,e),t=!0)},o(e){w(a.$$.fragment,e),t=!1},d(e){O(a,e)}}}function Ia(s){let a,t;return a=new U({props:{phase:s[7],select_phase:s[5],selected:s[7]===s[0],disabled:!!s[2]&&!M(s[2],s[7])}}),{c(){N(a.$$.fragment)},l(e){S(a.$$.fragment,e)},m(e,n){q(a,e,n),t=!0},p(e,n){const l={};n&128&&(l.phase=e[7]),n&129&&(l.selected=e[7]===e[0]),n&132&&(l.disabled=!!e[2]&&!M(e[2],e[7])),a.$set(l)},i(e){t||(v(a.$$.fragment,e),t=!0)},o(e){w(a.$$.fragment,e),t=!1},d(e){O(a,e)}}}function Na(s){let a,t;return a=new U({props:{phase:s[7],select_phase:s[5],selected:s[7]===s[0],disabled:!!s[2]&&!M(s[2],s[7])}}),{c(){N(a.$$.fragment)},l(e){S(a.$$.fragment,e)},m(e,n){q(a,e,n),t=!0},p(e,n){const l={};n&128&&(l.phase=e[7]),n&129&&(l.selected=e[7]===e[0]),n&132&&(l.disabled=!!e[2]&&!M(e[2],e[7])),a.$set(l)},i(e){t||(v(a.$$.fragment,e),t=!0)},o(e){w(a.$$.fragment,e),t=!1},d(e){O(a,e)}}}function Sa(s){let a,t;return a=new U({props:{phase:s[7],select_phase:s[5],selected:s[7]===s[0],disabled:!!s[2]&&!M(s[2],s[7])}}),{c(){N(a.$$.fragment)},l(e){S(a.$$.fragment,e)},m(e,n){q(a,e,n),t=!0},p(e,n){const l={};n&128&&(l.phase=e[7]),n&129&&(l.selected=e[7]===e[0]),n&132&&(l.disabled=!!e[2]&&!M(e[2],e[7])),a.$set(l)},i(e){t||(v(a.$$.fragment,e),t=!0)},o(e){w(a.$$.fragment,e),t=!1},d(e){O(a,e)}}}function qa(s){let a,t;return a=new U({props:{phase:s[7],select_phase:s[5],selected:s[7]===s[0],disabled:!!s[2]&&!M(s[2],s[7])}}),{c(){N(a.$$.fragment)},l(e){S(a.$$.fragment,e)},m(e,n){q(a,e,n),t=!0},p(e,n){const l={};n&128&&(l.phase=e[7]),n&129&&(l.selected=e[7]===e[0]),n&132&&(l.disabled=!!e[2]&&!M(e[2],e[7])),a.$set(l)},i(e){t||(v(a.$$.fragment,e),t=!0)},o(e){w(a.$$.fragment,e),t=!1},d(e){O(a,e)}}}function Oa(s){let a,t;return a=new U({props:{phase:s[7],select_phase:s[5],selected:s[7]===s[0],disabled:!!s[2]&&!M(s[2],s[7])}}),{c(){N(a.$$.fragment)},l(e){S(a.$$.fragment,e)},m(e,n){q(a,e,n),t=!0},p(e,n){const l={};n&128&&(l.phase=e[7]),n&129&&(l.selected=e[7]===e[0]),n&132&&(l.disabled=!!e[2]&&!M(e[2],e[7])),a.$set(l)},i(e){t||(v(a.$$.fragment,e),t=!0)},o(e){w(a.$$.fragment,e),t=!1},d(e){O(a,e)}}}function Ma(s){let a,t;return a=new U({props:{phase:s[7],select_phase:s[5],selected:s[7]===s[0],disabled:!!s[2]&&!M(s[2],s[7])}}),{c(){N(a.$$.fragment)},l(e){S(a.$$.fragment,e)},m(e,n){q(a,e,n),t=!0},p(e,n){const l={};n&128&&(l.phase=e[7]),n&129&&(l.selected=e[7]===e[0]),n&132&&(l.disabled=!!e[2]&&!M(e[2],e[7])),a.$set(l)},i(e){t||(v(a.$$.fragment,e),t=!0)},o(e){w(a.$$.fragment,e),t=!1},d(e){O(a,e)}}}function Aa(s){let a,t,e,n,l,c,r,o,f,h,g,T,F,A,C,p,_,D,R,V,$e,j,J,be,z,G,ve,K,W,we,Q,X,Ce,Y,Z,de;return a=new va({props:{selected_phase_sequence_or_creator:s[1],play_phase_sequence:s[3],cancel:s[4]}}),l=new H({props:{level:y("0"),$$slots:{default:[wa,({phase:i})=>({7:i}),({phase:i})=>i?128:0]},$$scope:{ctx:s}}}),o=new H({props:{level:y("1"),$$slots:{default:[Ca,({phase:i})=>({7:i}),({phase:i})=>i?128:0]},$$scope:{ctx:s}}}),g=new H({props:{level:y("2"),$$slots:{default:[Ea,({phase:i})=>({7:i}),({phase:i})=>i?128:0]},$$scope:{ctx:s}}}),A=new H({props:{level:y("3"),$$slots:{default:[ka,({phase:i})=>({7:i}),({phase:i})=>i?128:0]},$$scope:{ctx:s}}}),_=new H({props:{level:y("4"),$$slots:{default:[Ta,({phase:i})=>({7:i}),({phase:i})=>i?128:0]},$$scope:{ctx:s}}}),V=new H({props:{level:y("5"),$$slots:{default:[Ia,({phase:i})=>({7:i}),({phase:i})=>i?128:0]},$$scope:{ctx:s}}}),J=new H({props:{level:y("6"),$$slots:{default:[Na,({phase:i})=>({7:i}),({phase:i})=>i?128:0]},$$scope:{ctx:s}}}),G=new H({props:{level:y("7"),$$slots:{default:[Sa,({phase:i})=>({7:i}),({phase:i})=>i?128:0]},$$scope:{ctx:s}}}),W=new H({props:{level:y("8"),$$slots:{default:[qa,({phase:i})=>({7:i}),({phase:i})=>i?128:0]},$$scope:{ctx:s}}}),X=new H({props:{level:y("9"),$$slots:{default:[Oa,({phase:i})=>({7:i}),({phase:i})=>i?128:0]},$$scope:{ctx:s}}}),Z=new H({props:{level:y("10"),$$slots:{default:[Ma,({phase:i})=>({7:i}),({phase:i})=>i?128:0]},$$scope:{ctx:s}}}),{c(){N(a.$$.fragment),t=B(),e=E("div"),n=E("section"),N(l.$$.fragment),c=B(),r=E("section"),N(o.$$.fragment),f=B(),h=E("section"),N(g.$$.fragment),T=B(),F=E("section"),N(A.$$.fragment),C=B(),p=E("section"),N(_.$$.fragment),D=B(),R=E("section"),N(V.$$.fragment),$e=B(),j=E("section"),N(J.$$.fragment),be=B(),z=E("section"),N(G.$$.fragment),ve=B(),K=E("section"),N(W.$$.fragment),we=B(),Q=E("section"),N(X.$$.fragment),Ce=B(),Y=E("section"),N(Z.$$.fragment),this.h()},l(i){S(a.$$.fragment,i),t=L(i),e=k(i,"DIV",{class:!0});var u=I(e);n=k(u,"SECTION",{class:!0});var ae=I(n);S(l.$$.fragment,ae),ae.forEach(d),c=L(u),r=k(u,"SECTION",{class:!0});var se=I(r);S(o.$$.fragment,se),se.forEach(d),f=L(u),h=k(u,"SECTION",{class:!0});var te=I(h);S(g.$$.fragment,te),te.forEach(d),T=L(u),F=k(u,"SECTION",{class:!0});var ne=I(F);S(A.$$.fragment,ne),ne.forEach(d),C=L(u),p=k(u,"SECTION",{class:!0});var le=I(p);S(_.$$.fragment,le),le.forEach(d),D=L(u),R=k(u,"SECTION",{class:!0});var ie=I(R);S(V.$$.fragment,ie),ie.forEach(d),$e=L(u),j=k(u,"SECTION",{class:!0});var oe=I(j);S(J.$$.fragment,oe),oe.forEach(d),be=L(u),z=k(u,"SECTION",{class:!0});var re=I(z);S(G.$$.fragment,re),re.forEach(d),ve=L(u),K=k(u,"SECTION",{class:!0});var ce=I(K);S(W.$$.fragment,ce),ce.forEach(d),we=L(u),Q=k(u,"SECTION",{class:!0});var fe=I(Q);S(X.$$.fragment,fe),fe.forEach(d),Ce=L(u),Y=k(u,"SECTION",{class:!0});var he=I(Y);S(Z.$$.fragment,he),he.forEach(d),u.forEach(d),this.h()},h(){$(n,"class","svelte-dwxxx"),$(r,"class","svelte-dwxxx"),$(h,"class","svelte-dwxxx"),$(F,"class","svelte-dwxxx"),$(p,"class","svelte-dwxxx"),$(R,"class","svelte-dwxxx"),$(j,"class","svelte-dwxxx"),$(z,"class","svelte-dwxxx"),$(K,"class","svelte-dwxxx"),$(Q,"class","svelte-dwxxx"),$(Y,"class","svelte-dwxxx"),$(e,"class","atlas svelte-dwxxx")},m(i,u){q(a,i,u),P(i,t,u),P(i,e,u),b(e,n),q(l,n,null),b(e,c),b(e,r),q(o,r,null),b(e,f),b(e,h),q(g,h,null),b(e,T),b(e,F),q(A,F,null),b(e,C),b(e,p),q(_,p,null),b(e,D),b(e,R),q(V,R,null),b(e,$e),b(e,j),q(J,j,null),b(e,be),b(e,z),q(G,z,null),b(e,ve),b(e,K),q(W,K,null),b(e,we),b(e,Q),q(X,Q,null),b(e,Ce),b(e,Y),q(Z,Y,null),de=!0},p(i,[u]){const ae={};u&2&&(ae.selected_phase_sequence_or_creator=i[1]),a.$set(ae);const se={};u&389&&(se.$$scope={dirty:u,ctx:i}),l.$set(se);const te={};u&389&&(te.$$scope={dirty:u,ctx:i}),o.$set(te);const ne={};u&389&&(ne.$$scope={dirty:u,ctx:i}),g.$set(ne);const le={};u&389&&(le.$$scope={dirty:u,ctx:i}),A.$set(le);const ie={};u&389&&(ie.$$scope={dirty:u,ctx:i}),_.$set(ie);const oe={};u&389&&(oe.$$scope={dirty:u,ctx:i}),V.$set(oe);const re={};u&389&&(re.$$scope={dirty:u,ctx:i}),J.$set(re);const ce={};u&389&&(ce.$$scope={dirty:u,ctx:i}),G.$set(ce);const fe={};u&389&&(fe.$$scope={dirty:u,ctx:i}),W.$set(fe);const he={};u&389&&(he.$$scope={dirty:u,ctx:i}),X.$set(he);const qe={};u&389&&(qe.$$scope={dirty:u,ctx:i}),Z.$set(qe)},i(i){de||(v(a.$$.fragment,i),v(l.$$.fragment,i),v(o.$$.fragment,i),v(g.$$.fragment,i),v(A.$$.fragment,i),v(_.$$.fragment,i),v(V.$$.fragment,i),v(J.$$.fragment,i),v(G.$$.fragment,i),v(W.$$.fragment,i),v(X.$$.fragment,i),v(Z.$$.fragment,i),de=!0)},o(i){w(a.$$.fragment,i),w(l.$$.fragment,i),w(o.$$.fragment,i),w(g.$$.fragment,i),w(A.$$.fragment,i),w(_.$$.fragment,i),w(V.$$.fragment,i),w(J.$$.fragment,i),w(G.$$.fragment,i),w(W.$$.fragment,i),w(X.$$.fragment,i),w(Z.$$.fragment,i),de=!1},d(i){i&&(d(t),d(e)),O(a,i),O(l),O(o),O(g),O(A),O(_),O(V),O(J),O(G),O(W),O(X),O(Z)}}}function Da(s,a,t){let e=null,n=null,l=null;const c=async h=>{console.log("playPhaseSong",h);const g=await na(h.song);g&&(await g.play,console.log("playing",h.name,h.song.name),await g.ended,console.log("finished playing",h.name,h.song.name))},r=async(h,g=null)=>{g&&h===n?Ae():(o(),t(1,n=h),t(2,l=oa(h)),console.log("playing phase_sequence",h,l));const{sequence:T}=l.data;let F=T;if(g){const A=T.indexOf(g.name);if(A===-1)return o(),c(g);F=T.slice(A)}for(const A of F){const C=Qe.get(A);if(t(0,e=C),await c(C),n!==h||e!==C)return}t(0,e=null),t(1,n=null)},o=()=>{Ae(),t(1,n=null),t(2,l=null),t(0,e=null)};return[e,n,l,r,o,h=>(console.log("select_phase",h),n?r(n,h):c(h))]}class Fa extends ge{constructor(a){super(),_e(this,a,Da,Aa,me,{})}}function Ba(s){let a,t,e;return t=new Fa({}),{c(){a=E("div"),N(t.$$.fragment),this.h()},l(n){a=k(n,"DIV",{class:!0});var l=I(a);S(t.$$.fragment,l),l.forEach(d),this.h()},h(){$(a,"class","unlock-atlas svelte-1q8l5nv")},m(n,l){P(n,a,l),q(t,a,null),e=!0},p:ue,i(n){e||(v(t.$$.fragment,n),e=!0)},o(n){w(t.$$.fragment,n),e=!1},d(n){n&&d(a),O(t)}}}class Ja extends ge{constructor(a){super(),_e(this,a,null,Ba,me,{})}}export{Ja as component};
