import{n as me,r as K,i as v,d as h,e as N,b as P,l as U,m as y,a as oe,s as F,c as z,_ as ke,o as H,J as Ae,L as we,x as ue,y as _e,p as Q,g as Ue}from"../chunks/scheduler.317e39f5.js";import{S as ge,i as pe,t as b,g as ce,b as I,e as fe,c as T,a as A,m as M,d as D}from"../chunks/index.3972ef43.js";import{r as $e,a as ae}from"../chunks/random.c2e51b4a.js";import{s as Ve}from"../chunks/index.276c4212.js";import{b as Re}from"../chunks/paths.b01af2ea.js";import{g as Xe}from"../chunks/clock.fa46b71f.js";import{g as Ye}from"../chunks/dimensions.37c4a151.js";import{g as Fe,C as ze,S as qe,a as Be}from"../chunks/pixi.d26d8403.js";import{W as Ge}from"../chunks/WaitingScreen.579824bf.js";import{A as He}from"../chunks/WaitingAnimation.eb1703b0.js";import{e as be,u as Je,d as Ke}from"../chunks/each.5e813342.js";import{F as ve}from"../chunks/FloatingTextButton.5a8683b2.js";import{s as O}from"../chunks/images.6fb087a5.js";import{I as We}from"../chunks/ImageCreditsCaption.c65cd8d6.js";import{S as je}from"../chunks/Surface.89c2050a.js";import{P as Me}from"../chunks/Panel.6b267d3d.js";import{P as Qe}from"../chunks/Preview.8906cda7.js";import{P as Ze}from"../chunks/PortalPreview.9dd003be.js";function ye(i){let e,t;return e=new Ge({props:{status:i[0]}}),{c(){T(e.$$.fragment)},l(s){A(e.$$.fragment,s)},m(s,r){M(e,s,r),t=!0},p(s,r){const a={};r&1&&(a.status=s[0]),e.$set(a)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){I(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function xe(i){let e,t,s=i[0]!=="success"&&ye(i);return{c(){s&&s.c(),e=K()},l(r){s&&s.l(r),e=K()},m(r,a){s&&s.m(r,a),v(r,e,a),t=!0},p(r,[a]){r[0]!=="success"?s?(s.p(r,a),a&1&&b(s,1)):(s=ye(r),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(ce(),I(s,1,1,()=>{s=null}),fe())},i(r){t||(b(s),t=!0)},o(r){I(s),t=!1},d(r){r&&h(e),s&&s.d(r)}}}function et(i,e,t){let{cameraX:s}=e,{cameraY:r}=e,{cameraScale:a}=e,{imageUrl:n}=e,l=null,c=!1;const{scene:m}=Fe({loaded:async()=>{c||await p(n)},destroy:()=>{k(),c=!0}}),f=new ze;m.addChild(f);const p=async u=>{const S=await He.load(u);l&&l.texture===S||w(S)},w=u=>{l&&k(),u.baseTexture.setStyle(qe.LINEAR),t(5,l=new Be(u)),f.addChild(l)},k=()=>{l&&(f.removeChild(l),l.destroy(),t(5,l=null))},V=(u,S,$,C)=>{u.scale.set(C),u.position.set(S,$)};let q;return i.$$set=u=>{"cameraX"in u&&t(1,s=u.cameraX),"cameraY"in u&&t(2,r=u.cameraY),"cameraScale"in u&&t(3,a=u.cameraScale),"imageUrl"in u&&t(4,n=u.imageUrl)},i.$$.update=()=>{i.$$.dirty&16&&p(n),i.$$.dirty&14&&V(f,s,r,a),i.$$.dirty&32&&t(0,q=l?"success":"pending")},[q,s,r,a,n,l]}class tt extends ge{constructor(e){super(),pe(this,e,et,xe,me,{cameraX:1,cameraY:2,cameraScale:3,imageUrl:4})}}function Ie(i,e,t){const s=i.slice();return s[3]=e[t],s}function Se(i,e){let t,s,r,a,n,l,c,m,f;function p(){return e[2](e[3])}return{key:i,first:null,c(){t=N("button"),s=N("img"),c=F(),this.h()},l(w){t=P(w,"BUTTON",{class:!0});var k=U(t);s=P(k,"IMG",{src:!0,alt:!0,width:!0,height:!0}),c=z(k),k.forEach(h),this.h()},h(){ke(s.src,r=e[3].thumbnail.url)||y(s,"src",r),y(s,"alt",a=e[3].title),y(s,"width",n=e[3].thumbnail.width),y(s,"height",l=e[3].thumbnail.height),y(t,"class","svelte-1dt3wg7"),this.first=t},m(w,k){v(w,t,k),H(t,s),H(t,c),m||(f=Ae(t,"click",p),m=!0)},p(w,k){e=w,k&1&&!ke(s.src,r=e[3].thumbnail.url)&&y(s,"src",r),k&1&&a!==(a=e[3].title)&&y(s,"alt",a),k&1&&n!==(n=e[3].thumbnail.width)&&y(s,"width",n),k&1&&l!==(l=e[3].thumbnail.height)&&y(s,"height",l)},d(w){w&&h(t),m=!1,f()}}}function st(i){let e,t=[],s=new Map,r=be(i[0]);const a=n=>n[3].info.url;for(let n=0;n<r.length;n+=1){let l=Ie(i,r,n),c=a(l);s.set(c,t[n]=Se(c,l))}return{c(){e=N("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=P(n,"DIV",{class:!0});var l=U(e);for(let c=0;c<t.length;c+=1)t[c].l(l);l.forEach(h),this.h()},h(){y(e,"class","image-picker svelte-1dt3wg7")},m(n,l){v(n,e,l);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null)},p(n,[l]){l&3&&(r=be(n[0]),t=Je(t,l,a,1,n,r,s,e,Ke,Se,null,Ie))},i:oe,o:oe,d(n){n&&h(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function rt(i,e,t){let{images:s}=e,{pick_image:r}=e;const a=n=>r(n);return i.$$set=n=>{"images"in n&&t(0,s=n.images),"pick_image"in n&&t(1,r=n.pick_image)},[s,r,a]}class at extends ge{constructor(e){super(),pe(this,e,rt,st,me,{images:0,pick_image:1})}}function Ee(i){let e;return{c(){e=N("div"),this.h()},l(t){e=P(t,"DIV",{class:!0}),U(e).forEach(h),this.h()},h(){y(e,"class","overlay-bg svelte-y3wocm")},m(t,s){v(t,e,s)},d(t){t&&h(e)}}}function nt(i){let e,t,s;return t=new je({props:{width:i[0],height:i[1],scale:i[4],zoom:i[12],pan:i[13]}}),{c(){e=N("div"),T(t.$$.fragment),this.h()},l(r){e=P(r,"DIV",{class:!0,style:!0});var a=U(e);A(t.$$.fragment,a),a.forEach(h),this.h()},h(){y(e,"class","interaction-surface-wrapper svelte-y3wocm"),Q(e,"width",i[0]+"px"),Q(e,"height",i[1]+"px")},m(r,a){v(r,e,a),M(t,e,null),s=!0},p(r,a){const n={};a[0]&1&&(n.width=r[0]),a[0]&2&&(n.height=r[1]),a[0]&16&&(n.scale=r[4]),t.$set(n),(!s||a[0]&1)&&Q(e,"width",r[0]+"px"),(!s||a[0]&2)&&Q(e,"height",r[1]+"px")},i(r){s||(b(t.$$.fragment,r),s=!0)},o(r){I(t.$$.fragment,r),s=!1},d(r){r&&h(e),D(t)}}}function it(i){let e,t,s,r,a,n,l,c;return t=new at({props:{images:O,pick_image:i[9]}}),a=new Me({props:{$$slots:{default:[lt]},$$scope:{ctx:i}}}),l=new Ze({props:{href:Re+"/about",$$slots:{default:[ot]},$$scope:{ctx:i}}}),{c(){e=N("div"),T(t.$$.fragment),s=F(),r=N("footer"),T(a.$$.fragment),n=F(),T(l.$$.fragment),this.h()},l(m){e=P(m,"DIV",{class:!0});var f=U(e);A(t.$$.fragment,f),s=z(f),r=P(f,"FOOTER",{class:!0});var p=U(r);A(a.$$.fragment,p),n=z(p),A(l.$$.fragment,p),p.forEach(h),f.forEach(h),this.h()},h(){y(r,"class","svelte-y3wocm"),y(e,"class","overlay svelte-y3wocm")},m(m,f){v(m,e,f),M(t,e,null),H(e,s),H(e,r),M(a,r,null),H(r,n),M(l,r,null),c=!0},p(m,f){const p={};f[1]&4&&(p.$$scope={dirty:f,ctx:m}),a.$set(p);const w={};f[1]&4&&(w.$$scope={dirty:f,ctx:m}),l.$set(w)},i(m){c||(b(t.$$.fragment,m),b(a.$$.fragment,m),b(l.$$.fragment,m),c=!0)},o(m){I(t.$$.fragment,m),I(a.$$.fragment,m),I(l.$$.fragment,m),c=!1},d(m){m&&h(e),D(t),D(a),D(l)}}}function lt(i){let e,t='<a href="https://www.spacetelescope.org/copyright/">spacetelescope.org/copyright</a>';return{c(){e=N("div"),e.innerHTML=t,this.h()},l(s){e=P(s,"DIV",{"data-svelte-h":!0}),Ue(e)!=="svelte-e46x49"&&(e.innerHTML=t),this.h()},h(){Q(e,"font-size","var(--size_lg)")},m(s,r){v(s,e,r)},p:oe,d(s){s&&h(e)}}}function ot(i){let e,t;return e=new Qe({}),{c(){T(e.$$.fragment)},l(s){A(e.$$.fragment,s)},m(s,r){M(e,s,r),t=!0},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){I(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function ct(i){let e;return{c(){e=ue("random image")},l(t){e=_e(t,"random image")},m(t,s){v(t,e,s)},d(t){t&&h(e)}}}function ft(i){let e;return{c(){e=ue("pick an image")},l(t){e=_e(t,"pick an image")},m(t,s){v(t,e,s)},d(t){t&&h(e)}}}function mt(i){let e;return{c(){e=ue("close image picker")},l(t){e=_e(t,"close image picker")},m(t,s){v(t,e,s)},d(t){t&&h(e)}}}function ut(i){let e;function t(a,n){return a[2]?mt:ft}let s=t(i),r=s(i);return{c(){r.c(),e=K()},l(a){r.l(a),e=K()},m(a,n){r.m(a,n),v(a,e,n)},p(a,n){s!==(s=t(a))&&(r.d(1),r=s(a),r&&(r.c(),r.m(e.parentNode,e)))},d(a){a&&h(e),r.d(a)}}}function Ce(i){let e,t,s,r;return s=new Me({props:{$$slots:{default:[_t]},$$scope:{ctx:i}}}),{c(){e=N("div"),t=N("div"),T(s.$$.fragment),this.h()},l(a){e=P(a,"DIV",{class:!0});var n=U(e);t=P(n,"DIV",{class:!0});var l=U(t);A(s.$$.fragment,l),l.forEach(h),n.forEach(h),this.h()},h(){y(t,"class","width_md"),y(e,"class","credits idle_fade prose svelte-y3wocm")},m(a,n){v(a,e,n),H(e,t),M(s,t,null),r=!0},p(a,n){const l={};n[0]&8|n[1]&4&&(l.$$scope={dirty:n,ctx:a}),s.$set(l)},i(a){r||(b(s.$$.fragment,a),r=!0)},o(a){I(s.$$.fragment,a),r=!1},d(a){a&&h(e),D(s)}}}function _t(i){let e,t;return e=new We({props:{image:i[3]}}),{c(){T(e.$$.fragment)},l(s){A(e.$$.fragment,s)},m(s,r){M(e,s,r),t=!0},p(s,r){const a={};r[0]&8&&(a.image=s[3]),e.$set(a)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){I(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function gt(i){let e,t,s,r,a,n,l,c,m,f,p,w,k,V,q,u=i[2]&&Ee();t=new tt({props:{cameraX:i[6],cameraY:i[5],cameraScale:i[4],imageUrl:i[3].info.url}});const S=[it,nt],$=[];function C(o,_){return o[2]?0:1}r=C(i),a=$[r]=S[r](i),c=new ve({props:{$$slots:{default:[ct]},$$scope:{ctx:i}}}),c.$on("click",i[10]),f=new ve({props:{$$slots:{default:[ut]},$$scope:{ctx:i}}}),f.$on("click",i[18]);let d=!i[2]&&Ce(i);return{c(){u&&u.c(),e=F(),T(t.$$.fragment),s=F(),a.c(),n=F(),l=N("div"),T(c.$$.fragment),m=F(),T(f.$$.fragment),p=F(),d&&d.c(),w=K(),this.h()},l(o){u&&u.l(o),e=z(o),A(t.$$.fragment,o),s=z(o),a.l(o),n=z(o),l=P(o,"DIV",{class:!0});var _=U(l);A(c.$$.fragment,_),m=z(_),A(f.$$.fragment,_),_.forEach(h),p=z(o),d&&d.l(o),w=K(),this.h()},h(){y(l,"class","hud idle_fade svelte-y3wocm")},m(o,_){u&&u.m(o,_),v(o,e,_),M(t,o,_),v(o,s,_),$[r].m(o,_),v(o,n,_),v(o,l,_),M(c,l,null),H(l,m),M(f,l,null),v(o,p,_),d&&d.m(o,_),v(o,w,_),k=!0,V||(q=Ae(window,"keydown",i[11],!0),V=!0)},p(o,_){o[2]?u||(u=Ee(),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null);const L={};_[0]&64&&(L.cameraX=o[6]),_[0]&32&&(L.cameraY=o[5]),_[0]&16&&(L.cameraScale=o[4]),_[0]&8&&(L.imageUrl=o[3].info.url),t.$set(L);let R=r;r=C(o),r===R?$[r].p(o,_):(ce(),I($[R],1,1,()=>{$[R]=null}),fe(),a=$[r],a?a.p(o,_):(a=$[r]=S[r](o),a.c()),b(a,1),a.m(n.parentNode,n));const B={};_[1]&4&&(B.$$scope={dirty:_,ctx:o}),c.$set(B);const X={};_[0]&4|_[1]&4&&(X.$$scope={dirty:_,ctx:o}),f.$set(X),o[2]?d&&(ce(),I(d,1,1,()=>{d=null}),fe()):d?(d.p(o,_),_[0]&4&&b(d,1)):(d=Ce(o),d.c(),b(d,1),d.m(w.parentNode,w))},i(o){k||(b(t.$$.fragment,o),b(a),b(c.$$.fragment,o),b(f.$$.fragment,o),b(d),k=!0)},o(o){I(t.$$.fragment,o),I(a),I(c.$$.fragment,o),I(f.$$.fragment,o),I(d),k=!1},d(o){o&&(h(e),h(s),h(n),h(l),h(p),h(w)),u&&u.d(o),D(t,o),$[r].d(o),D(c),D(f),d&&d.d(o),V=!1,q()}}}const ne=0,ie=2,pt=5,le=6e4,ht=1e3,Te=1.1;function dt(i,e,t){let s,r,a,n;const l=Ye();we(i,l,g=>t(17,n=g));let c=n.width,m=n.height,f=!1,p=$e(O);const w=Xe();we(i,w,g=>t(16,a=g));const k=g=>{t(3,p=g),t(2,f=!1)},V=()=>{if(O.length===1)return;let g;do g=$e(O);while(g===p);k(g)},q=()=>{const g=O.indexOf(p),E=g===0?O.length-1:g-1;k(O[E])},u=()=>{const g=O.indexOf(p),E=g===O.length-1?0:g+1;k(O[E])};let S,$,C,d,o,_,L,R,B,X=0,Z=0;const De=g=>{Z>0&&(Z-=g,Z>0)||(X+=g,X>=le&&(X=0,[d,o,_]=ee(c,m,p.info.width,p.info.height,ne,ie),L=S,R=$,B=C),Ne(X,le))},Ne=(g,E)=>{const Y=Ve(g/E);t(14,S=L+Y*(d-L)),t(15,$=R+Y*(o-R)),t(4,C=B+Y*(_-B))},he=(g,E)=>{t(14,[S,$,C]=ee(c,m,g,E,ne,ie),S,t(15,$),t(4,C)),L=S,R=$,B=C,[d,o,_]=ee(c,m,g,E,ne,ie)},ee=(g,E,Y,x,W,J)=>{const j=Math.max(W,Math.max(g/Y,E/x)),te=Math.max(J,j*pt),G=ae(j,te),se=ae(g/2/G,Y-g/2/G),re=ae(E/2/G,x-E/2/G);return[se,re,G]},Pe=g=>{switch(g.key){case"1":t(2,f=!f);break;case"ArrowLeft":q();break;case"ArrowRight":u();break;case"ArrowUp":case"ArrowDown":V();break;case" ":he(p.info.width,p.info.height);break}},Le=(g,E=c/2,Y=m/2)=>{if(g===0)return;const x=g>0?1/Te:Te,W=C,J=W*x;t(4,C=J);const j=(J-W)/W,te=E-c/2,G=Y-m/2,se=te*j/J,re=G*j/J;de(se,re)},de=(g,E)=>{t(14,S+=g),t(15,$+=E),Z=ht,X=le},Oe=()=>t(2,f=!f);return i.$$.update=()=>{i.$$.dirty[0]&131072&&t(0,c=n.width),i.$$.dirty[0]&131072&&t(1,m=n.height),i.$$.dirty[0]&8&&he(p.info.width,p.info.height),i.$$.dirty[0]&65540&&!f&&De(a.dt),i.$$.dirty[0]&16401&&t(6,s=-S*C+c/2),i.$$.dirty[0]&32786&&t(5,r=-$*C+m/2)},[c,m,f,p,C,r,s,l,w,k,V,Pe,Le,de,S,$,a,n,Oe]}class Ut extends ge{constructor(e){super(),pe(this,e,dt,gt,me,{},null,[-1,-1])}}export{Ut as component};
