import{n as Z,e as b,s as q,b as E,l as g,c as A,d as v,m as f,p as z,i as D,o as _,J as w,a as O,E as $,L as x,M as ee,j as k,k as T,x as Y,y as F,g as H,A as J}from"../chunks/scheduler.B6ZHjePS.js";import{S as te,i as se}from"../chunks/index.D8p8-7y1.js";import{s as ie}from"../chunks/spring.DliCiKnh.js";import{l as N}from"../chunks/maths.CghzhYsK.js";import{s as C}from"../chunks/dom.COxKB0-J.js";import{g as re}from"../chunks/dimensions.DSxfro0U.js";import{g as oe}from"../chunks/audio_ctx.COpG46A1.js";import{v as ne,S as I}from"../chunks/audio_helpers.Dr-wYR0e.js";function j(s){let e,t,u,o,l,d,n,a,m;return{c(){e=k("svg"),t=k("filter"),u=k("feGaussianBlur"),o=k("circle"),n=k("circle"),this.h()},l(i){e=T(i,"svg",{class:!0});var r=g(e);t=T(r,"filter",{id:!0,height:!0,width:!0,y:!0,x:!0});var h=g(t);u=T(h,"feGaussianBlur",{in:!0,stdDeviation:!0}),g(u).forEach(v),h.forEach(v),o=T(r,"circle",{class:!0,cx:!0,cy:!0,r:!0,filter:!0}),g(o).forEach(v),n=T(r,"circle",{class:!0,cx:!0,cy:!0,r:!0}),g(n).forEach(v),r.forEach(v),this.h()},h(){f(u,"in","SourceGraphic"),f(u,"stdDeviation","10"),f(t,"id","blurOuter"),f(t,"height","200%"),f(t,"width","200%"),f(t,"y","-50%"),f(t,"x","-50%"),f(o,"class","outer svelte-1af6dkz"),f(o,"cx",l=s[5].x),f(o,"cy",d=s[5].y),f(o,"r",20),f(o,"filter","url(#blurOuter)"),f(n,"class","inner svelte-1af6dkz"),f(n,"cx",a=s[5].x),f(n,"cy",m=s[5].y),f(n,"r",2),f(e,"class","absolute0 w-100 h-100 z-2")},m(i,r){D(i,e,r),_(e,t),_(t,u),_(e,o),_(e,n)},p(i,r){r&32&&l!==(l=i[5].x)&&f(o,"cx",l),r&32&&d!==(d=i[5].y)&&f(o,"cy",d),r&32&&a!==(a=i[5].x)&&f(n,"cx",a),r&32&&m!==(m=i[5].y)&&f(n,"cy",m)},d(i){i&&v(e)}}}function B(s){let e,t,u,o,l="%";return{c(){e=b("div"),t=b("div"),u=Y(s[3]),o=b("span"),o.textContent=l,this.h()},l(d){e=E(d,"DIV",{class:!0});var n=g(e);t=E(n,"DIV",{});var a=g(t);u=F(a,s[3]),o=E(a,"SPAN",{class:!0,"data-svelte-h":!0}),H(o)!=="svelte-1s6wbiw"&&(o.textContent=l),a.forEach(v),n.forEach(v),this.h()},h(){f(o,"class","unit svelte-1af6dkz"),f(e,"class","volume h-100 absolute z-1 t-0 flex items-center justify-start svelte-1af6dkz")},m(d,n){D(d,e,n),_(e,t),_(t,u),_(t,o)},p(d,n){n&8&&J(u,d[3])},d(d){d&&v(e)}}}function X(s){let e,t,u,o,l="hz";return{c(){e=b("div"),t=b("div"),u=Y(s[4]),o=b("span"),o.textContent=l,this.h()},l(d){e=E(d,"DIV",{class:!0});var n=g(e);t=E(n,"DIV",{});var a=g(t);u=F(a,s[4]),o=E(a,"SPAN",{class:!0,"data-svelte-h":!0}),H(o)!=="svelte-1ewdw3h"&&(o.textContent=l),a.forEach(v),n.forEach(v),this.h()},h(){f(o,"class","unit svelte-1af6dkz"),f(e,"class","freq absolute z-1 w-100 l-0 flex items-start justify-center svelte-1af6dkz")},m(d,n){D(d,e,n),_(e,t),_(t,u),_(t,o)},p(d,n){n&16&&J(u,d[4])},d(d){d&&v(e)}}}function le(s){let e,t,u,o,l,d,n,a=s[5]&&j(s),m=s[0]!==void 0&&B(s),i=s[1]!==void 0&&X(s);return{c(){e=b("div"),a&&a.c(),t=q(),m&&m.c(),u=q(),i&&i.c(),o=q(),l=b("div"),this.h()},l(r){e=E(r,"DIV",{class:!0,style:!0});var h=g(e);a&&a.l(h),t=A(h),m&&m.l(h),u=A(h),i&&i.l(h),o=A(h),l=E(h,"DIV",{role:!0,class:!0}),g(l).forEach(v),h.forEach(v),this.h()},h(){f(l,"role","none"),f(l,"class","absolute z-3 w-100 h-100"),f(e,"class","hearing-test svelte-1af6dkz"),z(e,"width",s[2].width+"px"),z(e,"height",s[2].height+"px")},m(r,h){D(r,e,h),a&&a.m(e,null),_(e,t),m&&m.m(e,null),_(e,u),i&&i.m(e,null),_(e,o),_(e,l),d||(n=[w(l,"mousedown",s[8]),w(l,"mouseup",s[9]),w(l,"mouseleave",s[9]),w(l,"mousemove",s[10]),w(l,"touchstart",s[8]),w(l,"touchend",s[9]),w(l,"touchcancel",s[9]),w(l,"touchmove",s[10])],d=!0)},p(r,[h]){r[5]?a?a.p(r,h):(a=j(r),a.c(),a.m(e,t)):a&&(a.d(1),a=null),r[0]!==void 0?m?m.p(r,h):(m=B(r),m.c(),m.m(e,u)):m&&(m.d(1),m=null),r[1]!==void 0?i?i.p(r,h):(i=X(r),i.c(),i.m(e,o)):i&&(i.d(1),i=null),h&4&&z(e,"width",r[2].width+"px"),h&4&&z(e,"height",r[2].height+"px")},i:O,o:O,d(r){r&&v(e),a&&a.d(),m&&m.d(),i&&i.d(),d=!1,$(n)}}}const ae=0,ce=25e3,ue=0,fe=1;function de(s,e,t){let u,o,l,d,n,a;const m=re();x(s,m,c=>t(2,n=c));const i=oe();let r=-300,h=-300;const M=ie({x:r,y:h},{stiffness:.08,damping:.32});x(s,M,c=>t(5,a=c));let p,y;const L=(c,V)=>N(ae,ce,c/V),U=(c,V)=>N(ue,fe,1-c/V),K=()=>{p||(t(14,y=i.createGain()),t(14,y.gain.value=0,y),y.connect(i.destination),t(13,p=i.createOscillator()),t(13,p.type="sine",p),p.start(),p.connect(y))},P=()=>{p&&(y.gain.setTargetAtTime(0,i.currentTime,I),p.stop(i.currentTime+I*2),t(13,p=void 0),t(14,y=void 0))};ee(P);const S=c=>"touches"in c&&c.touches.length?c.touches[0].clientX:c.clientX,G=c=>"touches"in c&&c.touches.length?c.touches[0].clientY:c.clientY,Q=c=>{!("touches"in c)&&c.button!==0||(C(c),K(),t(11,r=S(c)),t(12,h=G(c)))},R=c=>{!i||!p||!("touches"in c)&&c.button!==0||(C(c),P())},W=c=>{!i||!p||(C(c),t(11,r=S(c)),t(12,h=G(c)))};return s.$$.update=()=>{s.$$.dirty&6144&&M.set({x:r,y:h}),s.$$.dirty&2052&&t(1,u=r>=0&&n.width?L(r,n.width):void 0),s.$$.dirty&2&&t(4,o=u===void 0?"":Math.round(u)),s.$$.dirty&8194&&p&&u!==void 0&&p.frequency.setValueAtTime(u,i.currentTime),s.$$.dirty&4100&&t(0,l=h>=0&&n.height?U(h,n.height):void 0),s.$$.dirty&1&&t(3,d=l===void 0?"":Math.round(l*100)),s.$$.dirty&16385&&y&&l!==void 0&&y.gain.setTargetAtTime(ne(l),i.currentTime,I)},[l,u,n,d,o,a,m,M,Q,R,W,r,h,p,y]}class be extends te{constructor(e){super(),se(this,e,de,le,Z,{})}}export{be as component};
