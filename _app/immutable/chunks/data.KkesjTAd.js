import{P as Te}from"./Preview.rU_lPq_E.js";import{v as ke,n as b,r as fe,i as N,a as y,d as v,e as x,b as T,l as R,m as S,q as Se,x as ye,y as Pe,A as Ie,L as se,s as A,g as te,c as X,p as g,o as w,G as Re,_ as Oe,$ as Ce,F as ze}from"./scheduler.EKw-xcnK.js";import{S as Y,i as q,c as G,a as j,m as U,t as W,b as J,d as Q}from"./index.nrQb7by4.js";import{P as De}from"./PortalPreview.aJsSzUYI.js";import{e as he}from"./each.JsaE_8Dp.js";import{a as P}from"./random.oPe0JuqT.js";import{w as He}from"./index.mvauKzP3.js";import{S as Me,d as be,E as Z,u as Ye,c as qe,f as le,D as we}from"./stage.Aml8gS6Q.js";import{g as ne}from"./clock.njU5BnUT.js";import{E as Le}from"./EarthThumbnail.F5wdF3r0.js";import{P as Fe}from"./Preview.Dq-dfL94.js";import{l as Ae}from"./maths.K6m04wT8.js";import{f as Xe}from"./freezeframe.q05PGbXS.js";import{F as de}from"./FreqSpeeds.4ig2APU2.js";import{F as $e}from"./FreqSpectacle.5GeWLHG7.js";const jt={name:"about",slug:"about",showHomeButton:!0,Preview:Te},Ne=[.833,.76,.72],Ve=[.611,1,.7],oe=[.389,.8,.6],Be=[.12,.16,.5],me=[0,1,.5],ee=["🐹","🐰","🐸","🐼","🐭"],Ee=.6,Ut=Ee*1.618,Wt=we*.97,Jt=1.09,Qt=.01,Zt=.01,es=.01,Ke=100,ie=.03,Ge=.21,je=we*1.03,Ue=0,We=-1400,Je=-3e3,Qe=2800,Ze=1800,et=15e3,tt=100,ae=o=>o*1.4,ts=o=>{try{const e=JSON.parse(o);if(!e||typeof e!="object")return;if(Array.isArray(e.crew)&&e.crew.every(s=>typeof s=="boolean")&&typeof e.crew_rescued_at_once_count=="number")return e}catch{}},ss=o=>o.crew.some(Boolean),ns=o=>o.crew.every(Boolean),rs=o=>o.crew.slice(1).every(Boolean),os=o=>o.crew.length===o.crew_rescued_at_once_count,is=(o,e)=>{const s=structuredClone(o);if(!e)return s;for(let t=0;t<e.crew.length;t++)e.crew[t]&&(s.crew[t]=!0);return s.crew_rescued_at_once_count=Math.max(xe(e.crew),s.crew_rescued_at_once_count),s},pe=o=>{const e=[!o.planet.dead,...o.moonsArray.map(s=>!s.dead)];return{crew:e,crew_rescued_at_once_count:xe(e)}},as=o=>({crew:[!1,...o.moonsArray.map(()=>!1)],crew_rescued_at_once_count:0}),xe=o=>o.filter(Boolean).length;class cs extends Me{finished=!1;player;planet;rock;moons=new Set;moonsArray=[];moonFragments=new Set;planetFragments=new Set;rockFragments=new Set;scores;updateScores(){const e=pe(this);be(e,ke(this.scores))||this.scores.set(e)}constructor(e){super(e);const s=850,t=502;this.freezeCamera||this.camera.setPosition(s,t);const{sim:r,collisions:n,controller:i,moons:a}=this;console.log("setup stage, sim, controller",r,i);const l=this.player=new Z(n.create_circle(s,t,Ke));l.speed=Ee,l.color=Ne,this.addEntity(l);const m=1618,$=this.planet=new Z(n.create_circle(-1450+m/2,-1750+m/2,m));$.text=ee[0],$.textOffsetX=850,$.textOffsetY=1150,$.fontSize=200,$.color=Ve,this.addEntity($);const _=262,p=this.rock=new Z(n.create_circle(2275+_/2,1200+_/2,_));p.speed=Ge,p.strength=je,p.directionX=-1,p.directionY=-.7,p.color=Be,this.addEntity(p);let c=new Z(n.create_circle(1660,1012,43));c.text=ee[1],c.fontSize=ae(c.radius),c.speed=ie,c.color=oe,this.addEntity(c),a.add(c),c=new Z(n.create_circle(1420,1174,72)),c.text=ee[2],c.fontSize=ae(c.radius),c.speed=ie,c.color=oe,this.addEntity(c),a.add(c),c=new Z(n.create_circle(2010,872,19)),c.text=ee[3],c.fontSize=ae(c.radius),c.speed=ie,c.color=oe,this.addEntity(c),a.add(c),c=new Z(n.create_circle(1870,776,27)),c.text=ee[4],c.fontSize=ae(c.radius),c.speed=ie,c.color=oe,this.addEntity(c),a.add(c),this.moonsArray.push(...a),this.scores=He(pe(this))}rockTimer=null;update(e){const s=this.timeDilation*Math.min(Math.max(e,0),tt);super.update(s);const{collisions:t,controller:r,player:n,planet:i,rock:a,moons:l,planetFragments:m,moonFragments:$,rockFragments:_,$camera:p}=this;Ye(r,n,p);let c=null,I=null,B=null,H=!1;if(this.sim.update(s,(d,u,E)=>{qe(d,u,E);const f=a===d?d:a===u?u:null,k=i===d?d:i===u?u:null,V=l.has(d)?d:l.has(u)?u:null,D=_.has(d)?d:_.has(u)?u:null,K=m.has(d)?d:m.has(u)?u:null,O=$.has(d)?d:$.has(u)?u:null,h=f||D||K||O;if(V&&h){const C=h===f,z=h===O,M=le(V,t,12);H=!0,(B||(B=[])).push(...M),this.removeEntity(V);for(const re of M)re.speed=C?P(h.speed*1.2,h.speed*2.44):z?P(h.speed/2,h.speed*2):P(h.speed/8,h.speed),re.directionX=C?P(h.directionX/2,h.directionX*2):z?P(h.directionX/2,h.directionX*2):P(-h.directionX/2,h.directionX),re.directionY=C?P(h.directionY/2,h.directionY*2):z?P(h.directionY/2,h.directionY*2):P(-h.directionY/2,h.directionY),re.color=me}else if(f&&k){this.removeEntity(f),this.removeEntity(k);const C=le(k,t,42);H=!0,(I||(I=[])).push(...C);for(const M of C)M.speed=f.speed*.2*P(.5,1),M.directionX=P(-f.directionX/2,f.directionX/2),M.directionY=P(-f.directionY/2,f.directionY/2),M.color=me;const z=le(f,t,210);(c||(c=[])).push(...z);for(const M of z)M.speed=P(f.speed/2,f.speed*2),M.directionX=P(-f.directionX*2,f.directionX*.25),M.directionY=P(-f.directionY*2,f.directionY*.25)}else O&&(k||K||D)&&this.removeEntity(O)},(d,u)=>{const E=d.entity,f=u.entity;if(E.dead||f.dead||E.disableSimulation||f.disableSimulation)return!1;const k=n===E?E:n===f?f:null,V=i===E?E:i===f?f:null,D=l.has(E)?E:l.has(f)?f:null;return!(k&&(V||D))}),this.freezeCamera){const d=n.radius+1,u=p.left+d,E=p.right-d;n.x<u?n.x=u:n.x>E&&(n.x=E);const f=p.top+d,k=p.bottom-d;n.y<f?n.y=f:n.y>k&&(n.y=k)}if(c)for(const d of c)_.add(d),this.addEntity(d);if(I)for(const d of I)m.add(d),this.addEntity(d);if(B)for(const d of B)$.add(d),this.addEntity(d);H&&this.updateScores(),this.finished||(this.rockTimer===null?a.dead?this.rockTimer=et:(a.x<We||a.y<Je||a.x>Qe||a.y>Ze)&&(this.rockTimer=Ue):(this.rockTimer-=s,this.rockTimer<=0&&(this.finished=!0)))}}function _e(o,e,s){const t=o.slice();return t[3]=e[s],t}function ge(o){let e,s=he(o[0]),t=[];for(let r=0;r<s.length;r+=1)t[r]=ve(_e(o,s,r));return{c(){e=x("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=T(r,"DIV",{class:!0});var n=R(e);for(let i=0;i<t.length;i+=1)t[i].l(n);n.forEach(v),this.h()},h(){S(e,"class","text svelte-177bct3")},m(r,n){N(r,e,n);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(r,n){if(n&1){s=he(r[0]);let i;for(i=0;i<s.length;i+=1){const a=_e(r,s,i);t[i]?t[i].p(a,n):(t[i]=ve(a),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},d(r){r&&v(e),Se(t,r)}}}function ve(o){let e=o[3]+"",s;return{c(){s=ye(e)},l(t){s=Pe(t,e)},m(t,r){N(t,s,r)},p(t,r){r&1&&e!==(e=t[3]+"")&&Ie(s,e)},d(t){t&&v(s)}}}function st(o){let e,s=o[0]&&ge(o);return{c(){s&&s.c(),e=fe()},l(t){s&&s.l(t),e=fe()},m(t,r){s&&s.m(t,r),N(t,e,r)},p(t,[r]){t[0]?s?s.p(t,r):(s=ge(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:y,o:y,d(t){t&&v(e),s&&s.d(t)}}}function nt(o,e,s){let t,{scores:r}=e,{defaultIcon:n=null}=e;return o.$$set=i=>{"scores"in i&&s(1,r=i.scores),"defaultIcon"in i&&s(2,n=i.defaultIcon)},o.$$.update=()=>{o.$$.dirty&6&&s(0,t=r?r.crew.map((i,a)=>i?ee[a]:n).filter(Boolean):void 0)},[t,r,n]}class rt extends Y{constructor(e){super(),q(this,e,nt,st,b,{scores:1,defaultIcon:2})}}function ot(o){let e,s;return e=new rt({props:{scores:o[1],defaultIcon:"❔"}}),{c(){G(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){U(e,t,r),s=!0},p(t,r){const n={};r&2&&(n.scores=t[1]),e.$set(n)},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){Q(e,t)}}}function it(o){let e,s;return e=new De({props:{on_click:o[0]?void 0:o[2],href:o[0]?"/unlock":void 0,style:o[0]?"border-color: var(--photon_color)":void 0,$$slots:{default:[ot]},$$scope:{ctx:o}}}),{c(){G(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){U(e,t,r),s=!0},p(t,[r]){const n={};r&5&&(n.on_click=t[0]?void 0:t[2]),r&1&&(n.href=t[0]?"/unlock":void 0),r&1&&(n.style=t[0]?"border-color: var(--photon_color)":void 0),r&10&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){Q(e,t)}}}function at(o,e,s){let{unlocked:t}=e,{scores:r}=e,{on_click:n=null}=e;return o.$$set=i=>{"unlocked"in i&&s(0,t=i.unlocked),"scores"in i&&s(1,r=i.scores),"on_click"in i&&s(2,n=i.on_click)},[t,r,n]}let ls=class extends Y{constructor(e){super(),q(this,e,at,it,b,{unlocked:0,scores:1,on_click:2})}};function ct(o){let e,s;return e=new Le({props:{width:320,height:160,animationDuration:"90s",running:o[0].running,text:"soggy planet"}}),{c(){G(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){U(e,t,r),s=!0},p(t,[r]){const n={};r&1&&(n.running=t[0].running),e.$set(n)},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){Q(e,t)}}}function lt(o,e,s){let t;const r=ne();return se(o,r,n=>s(0,t=n)),[t,r]}let dt=class extends Y{constructor(e){super(),q(this,e,lt,ct,b,{})}};const fs={name:"soggy planet",slug:"soggy-planet",showHomeButton:!1,Preview:dt},hs={name:"starlit hammock",slug:"starlit-hammock",showHomeButton:!0,Preview:Fe};function ut(o){let e,s,t="easing function",r,n,i="visualizations and auralizations",a,l,m,$,_,p,c,I,B,H,d,u,E,f,k,V,D;return{c(){e=x("div"),s=x("h2"),s.textContent=t,r=A(),n=x("h2"),n.textContent=i,a=A(),l=x("div"),m=x("canvas"),$=A(),_=x("div"),p=x("div"),c=A(),I=x("div"),B=A(),H=x("div"),d=A(),u=x("div"),E=x("div"),f=A(),k=x("div"),V=A(),D=x("div"),this.h()},l(K){e=T(K,"DIV",{class:!0});var O=R(e);s=T(O,"H2",{"data-svelte-h":!0}),te(s)!=="svelte-j038y7"&&(s.textContent=t),r=X(O),n=T(O,"H2",{"data-svelte-h":!0}),te(n)!=="svelte-1yha21u"&&(n.textContent=i),a=X(O),l=T(O,"DIV",{class:!0});var h=R(l);m=T(h,"CANVAS",{}),R(m).forEach(v),$=X(h),_=T(h,"DIV",{class:!0,style:!0});var C=R(_);p=T(C,"DIV",{class:!0,style:!0}),R(p).forEach(v),c=X(C),I=T(C,"DIV",{class:!0,style:!0}),R(I).forEach(v),B=X(C),H=T(C,"DIV",{style:!0}),R(H).forEach(v),C.forEach(v),d=X(h),u=T(h,"DIV",{class:!0,style:!0});var z=R(u);E=T(z,"DIV",{class:!0,style:!0}),R(E).forEach(v),f=X(z),k=T(z,"DIV",{class:!0,style:!0}),R(k).forEach(v),V=X(z),D=T(z,"DIV",{style:!0}),R(D).forEach(v),z.forEach(v),h.forEach(v),O.forEach(v),this.h()},h(){S(p,"class","mouth svelte-t66ahp"),g(p,"width",L+"px"),g(p,"height",L+"px"),S(I,"class","mouth svelte-t66ahp"),g(I,"width",L+"px"),g(I,"height",L+"px"),g(H,"width",L+"px"),g(H,"height",L+"px"),g(H,"border-radius","50%"),S(_,"class","mouth-wrapper svelte-t66ahp"),g(_,"left",-L/2+"px"),g(_,"top",ue/2-L/2+"px"),g(_,"width",L+"px"),g(_,"height",L+"px"),S(E,"class","tail svelte-t66ahp"),g(E,"width",F+"px"),g(E,"height",F+"px"),S(k,"class","tail svelte-t66ahp"),g(k,"width",F+"px"),g(k,"height",F+"px"),g(D,"width",F/2+"px"),g(D,"height",F/2+"px"),g(D,"border-radius","50%"),S(u,"class","tail-wrapper svelte-t66ahp"),g(u,"right",-F/2+"px"),g(u,"top",8+ue/2-F/2+"px"),g(u,"width",F+"px"),g(u,"height",F+"px"),S(l,"class","wrapper svelte-t66ahp"),S(e,"class","preview svelte-t66ahp")},m(K,O){N(K,e,O),w(e,s),w(e,r),w(e,n),w(e,a),w(e,l),w(l,m),o[1](m),w(l,$),w(l,_),w(_,p),w(_,c),w(_,I),w(_,B),w(_,H),w(l,d),w(l,u),w(u,E),w(u,f),w(u,k),w(u,V),w(u,D)},p:y,i:y,o:y,d(K){K&&v(e),o[1](null)}}}const ft=240,ue=24,L=16,F=10;function ht(o,e,s){let t=null;const r=i=>{const a=ft,l=ue;i.width!==a&&(i.width=a),i.height!==l&&(i.height=l);const m=i.getContext("2d"),$=2,_=l-$*2;m.clearRect(0,0,a,l),m.lineWidth=$,m.strokeStyle="hsla(220deg, 60%, 65%, 0.6)",m.moveTo(0,l/2);for(let p=1;p<a;p++){const c=Ae(8,3.75,p/a),I=Math.sin(p/c)*_/2+_/2+$;m.lineTo(p,I)}m.stroke()};function n(i){Re[i?"unshift":"push"](()=>{t=i,s(0,t)})}return o.$$.update=()=>{o.$$.dirty&1&&t&&r(t)},[t,n]}let mt=class extends Y{constructor(e){super(),q(this,e,ht,ut,b,{})}};const ps={name:"easing function visualizations and auralizations",slug:"easings-2",showHomeButton:!0,Preview:mt};function pt(o){let e,s='<h2 class="svelte-1odg17l">paint freqs</h2> <img class="cosmic-kitty svelte-1odg17l" src="/assets/characters/cosmic-kitty.webp" style="width: 192px; height: 192px;" alt="Cosmic Kitty"/>';return{c(){e=x("div"),e.innerHTML=s,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),te(e)!=="svelte-pars9g"&&(e.innerHTML=s),this.h()},h(){S(e,"class","preview svelte-1odg17l")},m(t,r){N(t,e,r)},p:y,i:y,o:y,d(t){t&&v(e)}}}let _t=class extends Y{constructor(e){super(),q(this,e,null,pt,b,{})}};const gs={name:"paint freqs",slug:"paint-freqs",showHomeButton:!0,Preview:_t};function gt(o){let e,s='<h2>easing function visualizations</h2> <div class="slider-wrapper svelte-1iz1uez"><div class="slider-graphic svelte-1iz1uez"></div></div>';return{c(){e=x("div"),e.innerHTML=s,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),te(e)!=="svelte-17eew0z"&&(e.innerHTML=s),this.h()},h(){S(e,"class","preview svelte-1iz1uez")},m(t,r){N(t,e,r)},p:y,i:y,o:y,d(t){t&&v(e)}}}let vt=class extends Y{constructor(e){super(),q(this,e,null,gt,b,{})}};const ws={name:"easing function visualizations",slug:"easings-1",showHomeButton:!0,Preview:vt};function wt(o){let e,s="<h2>🐶 hearing test 🐶</h2>";return{c(){e=x("div"),e.innerHTML=s,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),te(e)!=="svelte-14qrgqj"&&(e.innerHTML=s),this.h()},h(){S(e,"class","preview svelte-1a79k33")},m(t,r){N(t,e,r)},p:y,i:y,o:y,d(t){t&&v(e)}}}let $t=class extends Y{constructor(e){super(),q(this,e,null,wt,b,{})}};const Es={name:"hearing test",slug:"hearing-test",showHomeButton:!0,Preview:$t};function Et(o){let e,s,t,r,n;return{c(){e=x("img"),this.h()},l(i){e=T(i,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){Oe(e.src,s="/assets/construction/person-dig-idea.gif")||S(e,"src",s),S(e,"alt","under construction: person rock"),g(e,"width","96px"),g(e,"height","96px"),S(e,"class","pixelated svelte-1mjb65u")},m(i,a){N(i,e,a),r||(n=Ce(t=Xe.call(null,e,o[0])),r=!0)},p(i,[a]){t&&ze(t.update)&&a&1&&t.update.call(null,i[0])},i:y,o:y,d(i){i&&v(e),r=!1,n()}}}function xt(o,e,s){let t,r;const n=ne();return se(o,n,i=>s(2,r=i)),o.$$.update=()=>{o.$$.dirty&4&&s(0,t=!r.running)},[t,n,r]}let Tt=class extends Y{constructor(e){super(),q(this,e,xt,Et,b,{})}};const Ts={name:"under construction",slug:"under-construction",showHomeButton:!0,Preview:Tt};function kt(o){let e,s,t,r;return e=new de({props:{elapsedTime:o[0].time,width:162,height:61,hzItems:[3],lowestHzItemCount:2}}),t=new de({props:{elapsedTime:o[0].time,width:162,height:61,hzItems:[3],lowestHzItemCount:2,style:"transform: rotate(180deg);"}}),{c(){G(e.$$.fragment),s=A(),G(t.$$.fragment)},l(n){j(e.$$.fragment,n),s=X(n),j(t.$$.fragment,n)},m(n,i){U(e,n,i),N(n,s,i),U(t,n,i),r=!0},p(n,[i]){const a={};i&1&&(a.elapsedTime=n[0].time),e.$set(a);const l={};i&1&&(l.elapsedTime=n[0].time),t.$set(l)},i(n){r||(W(e.$$.fragment,n),W(t.$$.fragment,n),r=!0)},o(n){J(e.$$.fragment,n),J(t.$$.fragment,n),r=!1},d(n){n&&v(s),Q(e,n),Q(t,n)}}}function St(o,e,s){let t;const r=ne();return se(o,r,n=>s(0,t=n)),[t,r]}let yt=class extends Y{constructor(e){super(),q(this,e,St,kt,b,{})}};const Ss={name:"freq speeds",slug:"freq-speeds",showHomeButton:!0,Preview:yt};function Pt(o){let e,s,t,r,n,i;return t=new de({props:{elapsedTime:o[0].time/ce,width:131,height:16,hzItems:[3],lowestHzValue:500,lowestHzItemCount:2}}),n=new $e({props:{elapsedTime:o[0].time/(ce*2),width:131,height:16,hzItems:[3],lowestHzValue:500,lowestHzItemCount:2}}),{c(){e=x("div"),s=x("div"),G(t.$$.fragment),r=A(),G(n.$$.fragment),this.h()},l(a){e=T(a,"DIV",{class:!0});var l=R(e);s=T(l,"DIV",{class:!0});var m=R(s);j(t.$$.fragment,m),m.forEach(v),r=X(l),j(n.$$.fragment,l),l.forEach(v),this.h()},h(){S(s,"class","item svelte-1xpdug8"),S(e,"class","preview svelte-1xpdug8")},m(a,l){N(a,e,l),w(e,s),U(t,s,null),w(e,r),U(n,e,null),i=!0},p(a,[l]){const m={};l&1&&(m.elapsedTime=a[0].time/ce),t.$set(m);const $={};l&1&&($.elapsedTime=a[0].time/(ce*2)),n.$set($)},i(a){i||(W(t.$$.fragment,a),W(n.$$.fragment,a),i=!0)},o(a){J(t.$$.fragment,a),J(n.$$.fragment,a),i=!1},d(a){a&&v(e),Q(t),Q(n)}}}const ce=2;function It(o,e,s){let t;const r=ne();return se(o,r,n=>s(0,t=n)),[t,r]}let Rt=class extends Y{constructor(e){super(),q(this,e,It,Pt,b,{})}};const Ps={name:"clocks",slug:"clocks",showHomeButton:!0,Preview:Rt};function Ot(o){let e,s;return e=new $e({props:{elapsedTime:o[0].time/2,width:162,height:75,hzItems:[3,4],lowestHzItemCount:1}}),{c(){G(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){U(e,t,r),s=!0},p(t,[r]){const n={};r&1&&(n.elapsedTime=t[0].time/2),e.$set(n)},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){J(e.$$.fragment,t),s=!1},d(t){Q(e,t)}}}function Ct(o,e,s){let t;const r=ne();return se(o,r,n=>s(0,t=n)),[t,r]}class zt extends Y{constructor(e){super(),q(this,e,Ct,Ot,b,{})}}const Is={name:"freq spectacle",slug:"freq-spectacle",showHomeButton:!0,Preview:zt};export{Ut as P,rt as S,Ee as a,Jt as b,Wt as c,Qt as d,Zt as e,es as f,jt as g,Ss as h,Ps as i,Is as j,ss as k,ns as l,os as m,ls as n,fs as o,hs as p,ps as q,rs as r,gs as s,ws as t,Es as u,Ts as v,is as w,ts as x,cs as y,as as z};
