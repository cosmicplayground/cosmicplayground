import{w as l}from"./index.c0wBgp3C.js";import{f as v,h as b,v as d}from"./scheduler.0wHob__M.js";const q=(n={})=>{let s,t;const{subscribe:p,set:c,update:r}=l({running:n.running??!1,time:n.time??0,dt:n.dt??0},()=>(d(i).running&&o(),()=>u())),m=e=>{if(s!==void 0){const a=e-s;r(g=>({running:g.running,time:g.time+a,dt:a}))}s=e,t=requestAnimationFrame(m)},o=()=>{t&&u(),s=void 0,t=requestAnimationFrame(m)},u=()=>{t&&(cancelAnimationFrame(t),t=void 0)},i={subscribe:p,set:c,update:r,resume:()=>{r(e=>e.running?e:(o(),{running:!0,time:e.time,dt:e.dt}))},pause:()=>{r(e=>e.running?(u(),{running:!1,time:e.time,dt:e.dt}):e)},toggle:()=>{d(i).running?i.pause():i.resume()},reset:()=>{r(e=>({running:e.running,time:0,dt:0}))}};return i},f=Symbol(),x=()=>v(f),A=(n=q())=>(b(f,n),n);export{x as g,A as s};
