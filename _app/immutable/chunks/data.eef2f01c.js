var Se=Object.defineProperty;var Te=(r,e,s)=>e in r?Se(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s;var H=(r,e,s)=>(Te(r,typeof e!="symbol"?e+"":e,s),s);import{P as ke}from"./Preview.f5274a07.js";import{w as Ce,n as X,t as me,i as V,a as T,f as v,e as $,d as E,m as C,o as S,r as Ie,y as Re,z as Oe,B as ze,s as F,g as ne,b as A,q as _,p as g,G as He,V as De,W as Me,F as be,c as le}from"./scheduler.24efe3e9.js";import{S as N,i as B,c as W,a as U,m as J,t as Q,b as Z,d as ee}from"./index.d51c8976.js";import{P as Ye}from"./PortalPreview.30601181.js";import{e as pe}from"./each.9800de32.js";import{a as k}from"./random.c2e51b4a.js";import{w as qe}from"./index.c42bac63.js";import{S as Le,d as Fe,E as j,u as Ae,c as Xe,f as ue,D as Ee}from"./stage.0434bfc9.js";import{P as Ve}from"./Preview.35f56db3.js";import{P as Ne}from"./Preview.3f0382fa.js";import{l as Be}from"./maths.c8a7eaa0.js";import{g as de}from"./clock.06e05f62.js";import{f as Ke}from"./freezeframe.24ae45dd.js";import{F as fe}from"./FreqSpeeds.3e2724de.js";import{F as ye}from"./FreqSpectacle.733136d3.js";const Ut={name:"about",slug:"about",showHomeButton:!0,Preview:ke},Ge=[.833,.76,.72],je=[.611,1,.7],oe=[.389,.8,.6],We=[.12,.16,.5],_e=[0,1,.5],se=["🐹","🐰","🐸","🐼","🐭"],xe=.6,Jt=xe*1.618,Qt=Ee*.97,Zt=1.09,es=.01,ts=.01,ss=.01,Ue=100,ie=.03,Je=.21,Qe=Ee*1.03,Ze=0,et=-1400,tt=-3e3,st=2800,nt=1800,rt=15e3,ot=100,ae=r=>r*1.4,ns=r=>{try{const e=JSON.parse(r);if(!e||typeof e!="object")return;if(Array.isArray(e.crew)&&e.crew.every(s=>typeof s=="boolean")&&typeof e.crew_rescued_at_once_count=="number")return e}catch{}},rs=r=>r.crew.some(Boolean),os=r=>r.crew.every(Boolean),is=r=>r.crew.slice(1).every(Boolean),as=r=>r.crew.length===r.crew_rescued_at_once_count,cs=(r,e)=>{const s=structuredClone(r);if(!e)return s;for(let t=0;t<e.crew.length;t++)e.crew[t]&&(s.crew[t]=!0);return s.crew_rescued_at_once_count=Math.max(Pe(e.crew),s.crew_rescued_at_once_count),s},ve=r=>{const e=[!r.planet.dead,...r.moonsArray.map(s=>!s.dead)];return{crew:e,crew_rescued_at_once_count:Pe(e)}},ls=r=>({crew:[!1,...r.moonsArray.map(()=>!1)],crew_rescued_at_once_count:0}),Pe=r=>r.filter(Boolean).length;class ds extends Le{constructor(s){super(s);H(this,"finished",!1);H(this,"player");H(this,"planet");H(this,"rock");H(this,"moons",new Set);H(this,"moonsArray",[]);H(this,"moonFragments",new Set);H(this,"planetFragments",new Set);H(this,"rockFragments",new Set);H(this,"scores");H(this,"rockTimer",null);const t=850,n=502;this.freezeCamera||this.camera.setPosition(t,n);const{sim:i,collisions:o,controller:l,moons:d}=this;console.log("setup stage, sim, controller",i,l);const m=this.player=new j(o.createCircle(t,n,Ue));m.speed=xe,m.color=Ge,this.addEntity(m);const y=1618,f=this.planet=new j(o.createCircle(-1450+y/2,-1750+y/2,y));f.text=se[0],f.textOffsetX=850,f.textOffsetY=1150,f.fontSize=200,f.color=je,this.addEntity(f);const w=262,x=this.rock=new j(o.createCircle(2275+w/2,1200+w/2,w));x.speed=Je,x.strength=Qe,x.directionX=-1,x.directionY=-.7,x.color=We,this.addEntity(x);let a=new j(o.createCircle(1660,1012,43));a.text=se[1],a.fontSize=ae(a.radius),a.speed=ie,a.color=oe,this.addEntity(a),d.add(a),a=new j(o.createCircle(1420,1174,72)),a.text=se[2],a.fontSize=ae(a.radius),a.speed=ie,a.color=oe,this.addEntity(a),d.add(a),a=new j(o.createCircle(2010,872,19)),a.text=se[3],a.fontSize=ae(a.radius),a.speed=ie,a.color=oe,this.addEntity(a),d.add(a),a=new j(o.createCircle(1870,776,27)),a.text=se[4],a.fontSize=ae(a.radius),a.speed=ie,a.color=oe,this.addEntity(a),d.add(a),this.moonsArray.push(...d),this.scores=qe(ve(this))}updateScores(){const s=ve(this);Fe(s,Ce(this.scores))||this.scores.set(s)}update(s){const t=this.timeDilation*Math.min(Math.max(s,0),ot);super.update(t);const{collisions:n,controller:i,player:o,planet:l,rock:d,moons:m,planetFragments:y,moonFragments:f,rockFragments:w,$camera:x}=this;Ae(i,o,x);let a=null,K=null,z=null,G=!1;if(this.sim.update(t,(c,p,P)=>{Xe(c,p,P);const u=d===c?c:d===p?p:null,I=l===c?c:l===p?p:null,R=m.has(c)?c:m.has(p)?p:null,Y=w.has(c)?c:w.has(p)?p:null,D=y.has(c)?c:y.has(p)?p:null,M=f.has(c)?c:f.has(p)?p:null,h=u||Y||D||M;if(R&&h){const O=h===u,te=h===M,b=ue(R,n,12);G=!0,(z||(z=[])).push(...b),this.removeEntity(R);for(const re of b)re.speed=O?k(h.speed*1.2,h.speed*2.44):te?k(h.speed/2,h.speed*2):k(h.speed/8,h.speed),re.directionX=O?k(h.directionX/2,h.directionX*2):te?k(h.directionX/2,h.directionX*2):k(-h.directionX/2,h.directionX),re.directionY=O?k(h.directionY/2,h.directionY*2):te?k(h.directionY/2,h.directionY*2):k(-h.directionY/2,h.directionY),re.color=_e}else if(u&&I){this.removeEntity(u),this.removeEntity(I);const O=ue(I,n,42);G=!0,(K||(K=[])).push(...O);for(const b of O)b.speed=u.speed*.2*k(.5,1),b.directionX=k(-u.directionX/2,u.directionX/2),b.directionY=k(-u.directionY/2,u.directionY/2),b.color=_e;const te=ue(u,n,210);(a||(a=[])).push(...te);for(const b of te)b.speed=k(u.speed/2,u.speed*2),b.directionX=k(-u.directionX*2,u.directionX*.25),b.directionY=k(-u.directionY*2,u.directionY*.25)}else M&&(I||D||Y)&&this.removeEntity(M)},(c,p)=>{const P=c.entity,u=p.entity;if(P.dead||u.dead||P.disableSimulation||u.disableSimulation)return!1;const I=o===P?P:o===u?u:null,R=l===P?P:l===u?u:null,Y=m.has(P)?P:m.has(u)?u:null;return!(I&&(R||Y))}),this.freezeCamera){const c=o.radius+1,p=x.left+c,P=x.right-c;o.x<p?o.x=p:o.x>P&&(o.x=P);const u=x.top+c,I=x.bottom-c;o.y<u?o.y=u:o.y>I&&(o.y=I)}if(a)for(const c of a)w.add(c),this.addEntity(c);if(K)for(const c of K)y.add(c),this.addEntity(c);if(z)for(const c of z)f.add(c),this.addEntity(c);G&&this.updateScores(),this.finished||(this.rockTimer===null?d.dead?this.rockTimer=rt:(d.x<et||d.y<tt||d.x>st||d.y>nt)&&(this.rockTimer=Ze):(this.rockTimer-=t,this.rockTimer<=0&&(this.finished=!0)))}}function ge(r,e,s){const t=r.slice();return t[3]=e[s],t}function we(r){let e,s=pe(r[0]),t=[];for(let n=0;n<s.length;n+=1)t[n]=$e(ge(r,s,n));return{c(){e=$("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=E(n,"DIV",{class:!0});var i=C(e);for(let o=0;o<t.length;o+=1)t[o].l(i);i.forEach(v),this.h()},h(){S(e,"class","text svelte-evfjcz")},m(n,i){V(n,e,i);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,i){if(i&1){s=pe(n[0]);let o;for(o=0;o<s.length;o+=1){const l=ge(n,s,o);t[o]?t[o].p(l,i):(t[o]=$e(l),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=s.length}},d(n){n&&v(e),Ie(t,n)}}}function $e(r){let e=r[3]+"",s;return{c(){s=Re(e)},l(t){s=Oe(t,e)},m(t,n){V(t,s,n)},p(t,n){n&1&&e!==(e=t[3]+"")&&ze(s,e)},d(t){t&&v(s)}}}function it(r){let e,s=r[0]&&we(r);return{c(){s&&s.c(),e=me()},l(t){s&&s.l(t),e=me()},m(t,n){s&&s.m(t,n),V(t,e,n)},p(t,[n]){t[0]?s?s.p(t,n):(s=we(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:T,o:T,d(t){t&&v(e),s&&s.d(t)}}}function at(r,e,s){let t,{scores:n}=e,{defaultIcon:i=null}=e;return r.$$set=o=>{"scores"in o&&s(1,n=o.scores),"defaultIcon"in o&&s(2,i=o.defaultIcon)},r.$$.update=()=>{r.$$.dirty&6&&s(0,t=n?n.crew.map((o,l)=>o?se[l]:i).filter(Boolean):void 0)},[t,n,i]}class ct extends N{constructor(e){super(),B(this,e,at,it,X,{scores:1,defaultIcon:2})}}function lt(r){let e,s;return e=new ct({props:{scores:r[1],defaultIcon:"❔"}}),{c(){W(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,n){J(e,t,n),s=!0},p(t,n){const i={};n&2&&(i.scores=t[1]),e.$set(i)},i(t){s||(Q(e.$$.fragment,t),s=!0)},o(t){Z(e.$$.fragment,t),s=!1},d(t){ee(e,t)}}}function dt(r){let e,s;return e=new Ye({props:{onClick:r[0]?void 0:r[2],href:r[0]?"/unlock":void 0,style:r[0]?"border-color: var(--photon_color)":void 0,$$slots:{default:[lt]},$$scope:{ctx:r}}}),{c(){W(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,n){J(e,t,n),s=!0},p(t,[n]){const i={};n&5&&(i.onClick=t[0]?void 0:t[2]),n&1&&(i.href=t[0]?"/unlock":void 0),n&1&&(i.style=t[0]?"border-color: var(--photon_color)":void 0),n&10&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){s||(Q(e.$$.fragment,t),s=!0)},o(t){Z(e.$$.fragment,t),s=!1},d(t){ee(e,t)}}}function ut(r,e,s){let{unlocked:t}=e,{scores:n}=e,{onClick:i=null}=e;return r.$$set=o=>{"unlocked"in o&&s(0,t=o.unlocked),"scores"in o&&s(1,n=o.scores),"onClick"in o&&s(2,i=o.onClick)},[t,n,i]}let us=class extends N{constructor(e){super(),B(this,e,ut,dt,X,{unlocked:0,scores:1,onClick:2})}};const hs={name:"soggy planet",slug:"soggy-planet",showHomeButton:!1,Preview:Ve},ms={name:"starlit hammock",slug:"starlit-hammock",showHomeButton:!0,Preview:Ne};function ft(r){let e,s,t="easing function",n,i,o="visualizations and auralizations",l,d,m,y,f,w,x,a,K,z,G,c,p,P,u,I,R;return{c(){e=$("div"),s=$("h2"),s.textContent=t,n=F(),i=$("h2"),i.textContent=o,l=F(),d=$("div"),m=$("canvas"),y=F(),f=$("div"),w=$("div"),x=F(),a=$("div"),K=F(),z=$("div"),G=F(),c=$("div"),p=$("div"),P=F(),u=$("div"),I=F(),R=$("div"),this.h()},l(Y){e=E(Y,"DIV",{class:!0});var D=C(e);s=E(D,"H2",{"data-svelte-h":!0}),ne(s)!=="svelte-j038y7"&&(s.textContent=t),n=A(D),i=E(D,"H2",{"data-svelte-h":!0}),ne(i)!=="svelte-1yha21u"&&(i.textContent=o),l=A(D),d=E(D,"DIV",{class:!0});var M=C(d);m=E(M,"CANVAS",{}),C(m).forEach(v),y=A(M),f=E(M,"DIV",{class:!0,style:!0});var h=C(f);w=E(h,"DIV",{class:!0,style:!0}),C(w).forEach(v),x=A(h),a=E(h,"DIV",{class:!0,style:!0}),C(a).forEach(v),K=A(h),z=E(h,"DIV",{style:!0}),C(z).forEach(v),h.forEach(v),G=A(M),c=E(M,"DIV",{class:!0,style:!0});var O=C(c);p=E(O,"DIV",{class:!0,style:!0}),C(p).forEach(v),P=A(O),u=E(O,"DIV",{class:!0,style:!0}),C(u).forEach(v),I=A(O),R=E(O,"DIV",{style:!0}),C(R).forEach(v),O.forEach(v),M.forEach(v),D.forEach(v),this.h()},h(){S(w,"class","mouth svelte-t66ahp"),_(w,"width",q+"px"),_(w,"height",q+"px"),S(a,"class","mouth svelte-t66ahp"),_(a,"width",q+"px"),_(a,"height",q+"px"),_(z,"width",q+"px"),_(z,"height",q+"px"),_(z,"border-radius","50%"),S(f,"class","mouth-wrapper svelte-t66ahp"),_(f,"left",-q/2+"px"),_(f,"top",he/2-q/2+"px"),_(f,"width",q+"px"),_(f,"height",q+"px"),S(p,"class","tail svelte-t66ahp"),_(p,"width",L+"px"),_(p,"height",L+"px"),S(u,"class","tail svelte-t66ahp"),_(u,"width",L+"px"),_(u,"height",L+"px"),_(R,"width",L/2+"px"),_(R,"height",L/2+"px"),_(R,"border-radius","50%"),S(c,"class","tail-wrapper svelte-t66ahp"),_(c,"right",-L/2+"px"),_(c,"top",8+he/2-L/2+"px"),_(c,"width",L+"px"),_(c,"height",L+"px"),S(d,"class","wrapper svelte-t66ahp"),S(e,"class","preview svelte-t66ahp")},m(Y,D){V(Y,e,D),g(e,s),g(e,n),g(e,i),g(e,l),g(e,d),g(d,m),r[1](m),g(d,y),g(d,f),g(f,w),g(f,x),g(f,a),g(f,K),g(f,z),g(d,G),g(d,c),g(c,p),g(c,P),g(c,u),g(c,I),g(c,R)},p:T,i:T,o:T,d(Y){Y&&v(e),r[1](null)}}}const ht=240,he=24,q=16,L=10;function mt(r,e,s){let t=null;const n=o=>{const l=ht,d=he;o.width!==l&&(o.width=l),o.height!==d&&(o.height=d);const m=o.getContext("2d"),y=2,f=d-y*2;m.clearRect(0,0,l,d),m.lineWidth=y,m.strokeStyle="hsla(220deg, 60%, 65%, 0.6)",m.moveTo(0,d/2);for(let w=1;w<l;w++){const x=Be(8,3.75,w/l),a=Math.sin(w/x)*f/2+f/2+y;m.lineTo(w,a)}m.stroke()};function i(o){He[o?"unshift":"push"](()=>{t=o,s(0,t)})}return r.$$.update=()=>{r.$$.dirty&1&&t&&n(t)},[t,i]}let pt=class extends N{constructor(e){super(),B(this,e,mt,ft,X,{})}};const _s={name:"easing function visualizations and auralizations",slug:"easings-2",showHomeButton:!0,Preview:pt};function _t(r){let e,s='<h2 class="svelte-1odg17l">paint freqs</h2> <img class="cosmic-kitty svelte-1odg17l" src="/assets/characters/cosmic-kitty.webp" style="width: 192px; height: 192px;" alt="Cosmic Kitty"/>';return{c(){e=$("div"),e.innerHTML=s,this.h()},l(t){e=E(t,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-pars9g"&&(e.innerHTML=s),this.h()},h(){S(e,"class","preview svelte-1odg17l")},m(t,n){V(t,e,n)},p:T,i:T,o:T,d(t){t&&v(e)}}}let vt=class extends N{constructor(e){super(),B(this,e,null,_t,X,{})}};const gs={name:"paint freqs",slug:"paint-freqs",showHomeButton:!0,Preview:vt};function gt(r){let e,s='<h2>easing function visualizations</h2> <div class="slider-wrapper svelte-1iz1uez"><div class="slider-graphic svelte-1iz1uez"></div></div>';return{c(){e=$("div"),e.innerHTML=s,this.h()},l(t){e=E(t,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-17eew0z"&&(e.innerHTML=s),this.h()},h(){S(e,"class","preview svelte-1iz1uez")},m(t,n){V(t,e,n)},p:T,i:T,o:T,d(t){t&&v(e)}}}let wt=class extends N{constructor(e){super(),B(this,e,null,gt,X,{})}};const $s={name:"easing function visualizations",slug:"easings-1",showHomeButton:!0,Preview:wt};function $t(r){let e,s="<h2>🐶 hearing test 🐶</h2>";return{c(){e=$("div"),e.innerHTML=s,this.h()},l(t){e=E(t,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-14qrgqj"&&(e.innerHTML=s),this.h()},h(){S(e,"class","preview svelte-1a79k33")},m(t,n){V(t,e,n)},p:T,i:T,o:T,d(t){t&&v(e)}}}let Et=class extends N{constructor(e){super(),B(this,e,null,$t,X,{})}};const ys={name:"hearing test",slug:"hearing-test",showHomeButton:!0,Preview:Et};function yt(r){let e,s,t,n,i;return{c(){e=$("img"),this.h()},l(o){e=E(o,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){De(e.src,s="/assets/construction/person-dig-idea.gif")||S(e,"src",s),S(e,"alt","under construction: person rock"),_(e,"width","96px"),_(e,"height","96px"),S(e,"class","pixelated svelte-1mjb65u")},m(o,l){V(o,e,l),n||(i=Me(t=Ke.call(null,e,r[0])),n=!0)},p(o,[l]){t&&be(t.update)&&l&1&&t.update.call(null,o[0])},i:T,o:T,d(o){o&&v(e),n=!1,i()}}}function xt(r,e,s){let t,n;const i=de();return le(r,i,o=>s(2,n=o)),r.$$.update=()=>{r.$$.dirty&4&&s(0,t=!n.running)},[t,i,n]}let Pt=class extends N{constructor(e){super(),B(this,e,xt,yt,X,{})}};const Ps={name:"under construction",slug:"under-construction",showHomeButton:!0,Preview:Pt};function St(r){let e,s,t,n;return e=new fe({props:{elapsedTime:r[0].time,width:162,height:61,hzItems:[3],lowestHzItemCount:2}}),t=new fe({props:{elapsedTime:r[0].time,width:162,height:61,hzItems:[3],lowestHzItemCount:2,style:"transform: rotate(180deg);"}}),{c(){W(e.$$.fragment),s=F(),W(t.$$.fragment)},l(i){U(e.$$.fragment,i),s=A(i),U(t.$$.fragment,i)},m(i,o){J(e,i,o),V(i,s,o),J(t,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.elapsedTime=i[0].time),e.$set(l);const d={};o&1&&(d.elapsedTime=i[0].time),t.$set(d)},i(i){n||(Q(e.$$.fragment,i),Q(t.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),Z(t.$$.fragment,i),n=!1},d(i){i&&v(s),ee(e,i),ee(t,i)}}}function Tt(r,e,s){let t;const n=de();return le(r,n,i=>s(0,t=i)),[t,n]}let kt=class extends N{constructor(e){super(),B(this,e,Tt,St,X,{})}};const Ts={name:"freq speeds",slug:"freq-speeds",showHomeButton:!0,Preview:kt};function Ct(r){let e,s,t,n,i,o;return t=new fe({props:{elapsedTime:r[0].time/ce,width:131,height:16,hzItems:[3],lowestHzValue:500,lowestHzItemCount:2}}),i=new ye({props:{elapsedTime:r[0].time/(ce*2),width:131,height:16,hzItems:[3],lowestHzValue:500,lowestHzItemCount:2}}),{c(){e=$("div"),s=$("div"),W(t.$$.fragment),n=F(),W(i.$$.fragment),this.h()},l(l){e=E(l,"DIV",{class:!0});var d=C(e);s=E(d,"DIV",{class:!0});var m=C(s);U(t.$$.fragment,m),m.forEach(v),n=A(d),U(i.$$.fragment,d),d.forEach(v),this.h()},h(){S(s,"class","item svelte-1xpdug8"),S(e,"class","preview svelte-1xpdug8")},m(l,d){V(l,e,d),g(e,s),J(t,s,null),g(e,n),J(i,e,null),o=!0},p(l,[d]){const m={};d&1&&(m.elapsedTime=l[0].time/ce),t.$set(m);const y={};d&1&&(y.elapsedTime=l[0].time/(ce*2)),i.$set(y)},i(l){o||(Q(t.$$.fragment,l),Q(i.$$.fragment,l),o=!0)},o(l){Z(t.$$.fragment,l),Z(i.$$.fragment,l),o=!1},d(l){l&&v(e),ee(t),ee(i)}}}const ce=2;function It(r,e,s){let t;const n=de();return le(r,n,i=>s(0,t=i)),[t,n]}let Rt=class extends N{constructor(e){super(),B(this,e,It,Ct,X,{})}};const Cs={name:"clocks",slug:"clocks",showHomeButton:!0,Preview:Rt};function Ot(r){let e,s;return e=new ye({props:{elapsedTime:r[0].time/2,width:162,height:75,hzItems:[3,4],lowestHzItemCount:1}}),{c(){W(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,n){J(e,t,n),s=!0},p(t,[n]){const i={};n&1&&(i.elapsedTime=t[0].time/2),e.$set(i)},i(t){s||(Q(e.$$.fragment,t),s=!0)},o(t){Z(e.$$.fragment,t),s=!1},d(t){ee(e,t)}}}function zt(r,e,s){let t;const n=de();return le(r,n,i=>s(0,t=i)),[t,n]}class Ht extends N{constructor(e){super(),B(this,e,zt,Ot,X,{})}}const Is={name:"freq spectacle",slug:"freq-spectacle",showHomeButton:!0,Preview:Ht};export{Jt as P,ct as S,xe as a,Zt as b,Qt as c,es as d,ts as e,ss as f,Ut as g,Ts as h,Cs as i,Is as j,rs as k,os as l,as as m,us as n,hs as o,ms as p,_s as q,is as r,gs as s,$s as t,ys as u,Ps as v,cs as w,ns as x,ds as y,ls as z};
